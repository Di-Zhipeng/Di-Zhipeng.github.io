<!DOCTYPE HTML>
<html lang="zh-CN">


<head>
    <meta charset="utf-8">
    <meta name="keywords" content="Verilog游戏《大富翁》, Tenderness,Tenderness丶,dzp,dizhipeng">
    <meta name="description" content="这里是Tenderness的个人博客">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="renderer" content="webkit|ie-stand|ie-comp">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <!-- Global site tag (gtag.js) - Google Analytics -->


    <title>Verilog游戏《大富翁》 | Tenderness丶</title>
    <link rel="icon" type="image/png" href="/favicon.png">

    <link rel="stylesheet" type="text/css" href="/libs/awesome/css/all.css">
    <link rel="stylesheet" type="text/css" href="/libs/materialize/materialize.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/aos/aos.css">
    <link rel="stylesheet" type="text/css" href="/libs/animate/animate.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/lightGallery/css/lightgallery.min.css">
    <link rel="stylesheet" type="text/css" href="/css/matery.css">
    <link rel="stylesheet" type="text/css" href="/css/my.css">

    <script src="/libs/jquery/jquery.min.js"></script>
    
<meta name="generator" content="Hexo 4.2.1"><link rel="stylesheet" href="/css/prism-tomorrow.css" type="text/css">
<link rel="stylesheet" href="/css/prism-line-numbers.css" type="text/css"></head>


<body>
    <header class="navbar-fixed">
    <nav id="headNav" class="bg-color nav-transparent">
        <div id="navContainer" class="nav-wrapper container">
            <div class="brand-logo">
                <a href="/" class="waves-effect waves-light">
                    
                    <img src="/medias/logo.png" class="logo-img" alt="LOGO">
                    
                    <span class="logo-span">Tenderness丶</span>
                </a>
            </div>
            

<a href="#" data-target="mobile-nav" class="sidenav-trigger button-collapse"><i class="fas fa-bars"></i></a>
<ul class="right nav-menu">
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/" class="waves-effect waves-light">
      
      <i class="fas fa-home" style="zoom: 0.6;"></i>
      
      <span>首页</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/tags" class="waves-effect waves-light">
      
      <i class="fas fa-tags" style="zoom: 0.6;"></i>
      
      <span>标签</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/categories" class="waves-effect waves-light">
      
      <i class="fas fa-bookmark" style="zoom: 0.6;"></i>
      
      <span>分类</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/archives" class="waves-effect waves-light">
      
      <i class="fas fa-archive" style="zoom: 0.6;"></i>
      
      <span>归档</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/about" class="waves-effect waves-light">
      
      <i class="fas fa-user-circle" style="zoom: 0.6;"></i>
      
      <span>关于</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/contact" class="waves-effect waves-light">
      
      <i class="fas fa-comments" style="zoom: 0.6;"></i>
      
      <span>留言板</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/friends" class="waves-effect waves-light">
      
      <i class="fas fa-address-book" style="zoom: 0.6;"></i>
      
      <span>友情链接</span>
    </a>
    
  </li>
  
  <li>
    <a href="#searchModal" class="modal-trigger waves-effect waves-light">
      <i id="searchIcon" class="fas fa-search" title="搜索" style="zoom: 0.85;"></i>
    </a>
  </li>
</ul>

<div id="mobile-nav" class="side-nav sidenav">

    <div class="mobile-head bg-color">
        
        <img src="/medias/logo.png" class="logo-img circle responsive-img">
        
        <div class="logo-name">Tenderness丶</div>
        <div class="logo-desc">
            
            这里是Tenderness的个人博客
            
        </div>
    </div>

    

    <ul class="menu-list mobile-menu-list">
        
        <li class="m-nav-item">
	  
		<a href="/" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-home"></i>
			
			首页
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/tags" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-tags"></i>
			
			标签
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/categories" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-bookmark"></i>
			
			分类
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/archives" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-archive"></i>
			
			归档
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/about" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-user-circle"></i>
			
			关于
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/contact" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-comments"></i>
			
			留言板
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/friends" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-address-book"></i>
			
			友情链接
		</a>
          
        </li>
        
        
        <li><div class="divider"></div></li>
        <li>
            <a href="https://github.com/Di-Zhipeng" class="waves-effect waves-light" target="_blank">
                <i class="fab fa-github-square fa-fw"></i>Fork Me
            </a>
        </li>
        
    </ul>
</div>

        </div>

        
            <style>
    .nav-transparent .github-corner {
        display: none !important;
    }

    .github-corner {
        position: absolute;
        z-index: 10;
        top: 0;
        right: 0;
        border: 0;
        transform: scale(1.1);
    }

    .github-corner svg {
        color: #0f9d58;
        fill: #fff;
        height: 64px;
        width: 64px;
    }

    .github-corner:hover .octo-arm {
        animation: a 0.56s ease-in-out;
    }

    .github-corner .octo-arm {
        animation: none;
    }

    @keyframes a {
        0%,
        to {
            transform: rotate(0);
        }
        20%,
        60% {
            transform: rotate(-25deg);
        }
        40%,
        80% {
            transform: rotate(10deg);
        }
    }
</style>

<a href="https://github.com/Di-Zhipeng" class="github-corner tooltipped hide-on-med-and-down" target="_blank"
   data-tooltip="Fork Me" data-position="left" data-delay="50">
    <svg viewBox="0 0 250 250" aria-hidden="true">
        <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path>
        <path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2"
              fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path>
        <path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z"
              fill="currentColor" class="octo-body"></path>
    </svg>
</a>
        
    </nav>

</header>

    



<div class="bg-cover pd-header post-cover" style="background-image: url('/medias/featureimages/4.jpg')">
    <div class="container" style="right: 0px;left: 0px;">
        <div class="row">
            <div class="col s12 m12 l12">
                <div class="brand">
                    <h1 class="description center-align post-title">Verilog游戏《大富翁》</h1>
                </div>
            </div>
        </div>
    </div>
</div>




<main class="post-container content">

    
    <link rel="stylesheet" href="/libs/tocbot/tocbot.css">
<style>
    #articleContent h1::before,
    #articleContent h2::before,
    #articleContent h3::before,
    #articleContent h4::before,
    #articleContent h5::before,
    #articleContent h6::before {
        display: block;
        content: " ";
        height: 100px;
        margin-top: -100px;
        visibility: hidden;
    }

    #articleContent :focus {
        outline: none;
    }

    .toc-fixed {
        position: fixed;
        top: 64px;
    }

    .toc-widget {
        width: 345px;
        padding-left: 20px;
    }

    .toc-widget .toc-title {
        margin: 35px 0 15px 0;
        padding-left: 17px;
        font-size: 1.5rem;
        font-weight: bold;
        line-height: 1.5rem;
    }

    .toc-widget ol {
        padding: 0;
        list-style: none;
    }

    #toc-content {
        height: calc(100vh - 250px);
        overflow: auto;
    }

    #toc-content ol {
        padding-left: 10px;
    }

    #toc-content ol li {
        padding-left: 10px;
    }

    #toc-content .toc-link:hover {
        color: #42b983;
        font-weight: 700;
        text-decoration: underline;
    }

    #toc-content .toc-link::before {
        background-color: transparent;
        max-height: 25px;
    }

    #toc-content .is-active-link {
        color: #42b983;
    }

    #toc-content .is-active-link::before {
        background-color: #42b983;
    }

    #floating-toc-btn {
        position: fixed;
        right: 15px;
        bottom: 76px;
        padding-top: 15px;
        margin-bottom: 0;
        z-index: 998;
    }

    #floating-toc-btn .btn-floating {
        width: 48px;
        height: 48px;
    }

    #floating-toc-btn .btn-floating i {
        line-height: 48px;
        font-size: 1.4rem;
    }
</style>
<div class="row">
    <div id="main-content" class="col s12 m12 l9">
        <!-- 文章内容详情 -->
<div id="artDetail">
    <div class="card">
        <div class="card-content article-info">
            <div class="row tag-cate">
                <div class="col s7">
                    
                    <div class="article-tag">
                        
                            <a href="/tags/Verilog/">
                                <span class="chip bg-color">Verilog</span>
                            </a>
                        
                            <a href="/tags/%E6%95%B0%E5%AD%97%E9%80%BB%E8%BE%91/">
                                <span class="chip bg-color">数字逻辑</span>
                            </a>
                        
                            <a href="/tags/FPGA/">
                                <span class="chip bg-color">FPGA</span>
                            </a>
                        
                    </div>
                    
                </div>
                <div class="col s5 right-align">
                    
                    <div class="post-cate">
                        <i class="fas fa-bookmark fa-fw icon-category"></i>
                        
                            <a href="/categories/Verilog/" class="post-category">
                                Verilog
                            </a>
                        
                    </div>
                    
                </div>
            </div>

            <div class="post-info">
                
                <div class="post-date info-break-policy">
                    <i class="far fa-calendar-minus fa-fw"></i>发布日期:&nbsp;&nbsp;
                    2020-03-20
                </div>
                

                
                <div class="post-date info-break-policy">
                    <i class="far fa-calendar-check fa-fw"></i>更新日期:&nbsp;&nbsp;
                    2020-03-22
                </div>
                

                
                <div class="info-break-policy">
                    <i class="far fa-file-word fa-fw"></i>文章字数:&nbsp;&nbsp;
                    14k
                </div>
                

                

                
            </div>

        </div>
        <hr class="clearfix">
        <div class="card-content article-card-content">
            <div id="articleContent">
                <h1 id="写在前面"><a href="#写在前面" class="headerlink" title="写在前面"></a>写在前面</h1><p>本文是我在大一时数字逻辑的课程作业报告，其中我删减了一部分涉及隐私或无意义的内容，希望这篇文章能帮助到广大喜欢FPGA的朋友们。</p>
<h1 id="Part1-游戏介绍"><a href="#Part1-游戏介绍" class="headerlink" title="Part1.游戏介绍"></a>Part1.游戏介绍</h1><h3 id="一、-游戏背景"><a href="#一、-游戏背景" class="headerlink" title="一、 游戏背景"></a>一、 游戏背景</h3><p>大富翁，又名地产大亨，是一种多人策略图版游戏。参赛者分得游戏金钱，凭运气（掷骰子）及交易策略，买地、建楼以赚取租金。英文原名monopoly意为“垄断”，因为最后只得一个胜利者，其余均破产收场。<br>本次课程设计以《大富翁》游戏作为蓝本，以浙江大学紫金港校区作为游戏背景，设计了本款游戏：</p>
<p><strong>《大富翁之决战紫金港》。</strong></p>
<p><img src="https://i.loli.net/2020/03/20/OH4v6Wb3aEhPoZy.png" alt="image-20191229161657384.png"></p>
<h3 id="二、-游戏规则"><a href="#二、-游戏规则" class="headerlink" title="二、 游戏规则"></a>二、 游戏规则</h3><h4 id="1-游戏设置"><a href="#1-游戏设置" class="headerlink" title="1.游戏设置"></a>1.游戏设置</h4><p>这个游戏支持两名游戏玩家。玩家属性包括每月生活费、金钱、绩点、房屋财产。游戏开始时，每位玩家将获得一定的初始资金和初始绩点。游戏主要的目的就是争夺紫金港的地产资源，让对面破产退学或者因为没有地方自习挂科退学。</p>
<h4 id="2-游戏进行"><a href="#2-游戏进行" class="headerlink" title="2.游戏进行"></a>2.游戏进行</h4><ol>
<li>每次轮到自己时，按下按钮掷一次骰子，然后按照骰子的点数，在游戏盘上沿顺时针方向移动相应的步数。</li>
<li>如果停留在土地上，若这个土地没有人占领，则可以花钱买下这块土地，若这块土地已经被自己买下，则可以在上面盖一座房子，增加收入，每块土地最多可以盖一个房子。如果停留在别人的土地上则要缴纳滞留费并降低绩点。</li>
<li>如果停留在事件块或者红色格，则触发对应事件。</li>
<li>换下一个人进行游戏，直到有人胜出。</li>
</ol>
<h4 id="3-游戏盘说明"><a href="#3-游戏盘说明" class="headerlink" title="3.游戏盘说明"></a>3.游戏盘说明</h4><ol>
<li><p>初始：每位玩家5000￥初始资金以及3.6/5.0的初始绩点，每月生活费为2000￥</p>
</li>
<li><p>起点格：<strong>经过</strong>月初块时，可以向父母领取生活费，<strong>停留</strong>在月初块时，可以获得双倍生活费。</p>
</li>
<li><p>地产格：</p>
<p>​    A. 走到无人购买的区域时，可按支出1600￥买下区域，成为该区域的主人；</p>
<p>​    B. 走到别人的区域时，则需要根据房屋情况付出相应的代价，包括缴纳滞留费和绩点下降，土地无房屋：金钱 -2000￥，GPA -0.1；土地有房屋，金钱 -4000￥，GPA -0.2。</p>
<p>​    C. 走到自己的区域时，可以支出1200￥并建筑房屋。</p>
</li>
<li><p>事件：触发随机事件，包括：</p>
<p>​    A. 绩点变化：梦到竺可桢，绩点+0.3；一觉睡到12点，错过早八点名，绩点-0.3；</p>
<p>​    B. 金钱变化：双十一打折，金钱-3000￥；勤工俭学，金钱+2000￥；</p>
<p>​    C. 生活费变化：父母升官发财，生活费+1000￥；家庭惨遭电信诈骗，生活费-1200￥；</p>
</li>
<li><p>红色格： </p>
<p>​    A. 睡觉：玩家回到了温馨的寝室，睡大觉，跳过一回合。</p>
<p>​    B. 评奖：根据玩家当前绩点获得奖学金，奖项如下：</p>
<p>​        浙江大学学业三等奖学金：GPA：3.8/5.0以上 —— 2000￥；<br>​        浙江大学学业二等奖学金：GPA：4.2/5.0以上 —— 4000￥；<br>​        浙江大学学业一等奖学金：GPA：4.4/5.0以上 —— 6000￥；<br>​        国家奖学金：GPA：4.6/5.0以上，且GPA为所有玩家最高—— 8000￥；<br>​        竺可桢奖学金：GPA：5.0——20000￥；</p>
<p>​        注：各项奖学金不能同时获得。</p>
<p>​    C. 期末考试：当玩家<strong>停留</strong>在本方格时，掷一次骰子，获得 （点数-3）X0.05 绩点。</p>
</li>
</ol>
<h4 id="4-胜利条件"><a href="#4-胜利条件" class="headerlink" title="4.胜利条件"></a>4.胜利条件</h4><p>当一位玩家金钱为0或GPA达到1.5及以下时，另一位玩家获胜，游戏结束，播放游戏结束画面。</p>
<h4 id="5-操作说明"><a href="#5-操作说明" class="headerlink" title="5.操作说明"></a>5.操作说明</h4><p><img src="https://i.loli.net/2020/03/20/t8zKsSVurbG5MYf.png" alt="image-20191229160827419.png"></p>
<ul>
<li>重置：使用SW0开关重置输入。</li>
<li>切换输入：使用SW15切换输入，置0时使用按钮输入，置1时使用PS/2键盘输入。</li>
<li>掷骰子：我们称上图三个按钮从左到右为0、1、2，我们使用button0掷骰子</li>
<li>确认：使用button1代表“是”，使用button2代表“否”。</li>
<li>PS/2模式：使用小键盘的“1、2、3”代替button1、2、3。（后文描述均中button与PS/2小键盘等价）</li>
</ul>
<p>玩家1和玩家2均使用同一套按键进行游戏，交替操作。</p>
<p>游戏开始时，按下button1开始游戏，掷骰子使用button1。</p>
<p>当走到土地时，会等待确认是否购买土地，按下button2确认购买，button3放弃购买。</p>
<p>走到事件格时，会抽取一张事件卡显示在屏幕上，按button2确认以继续游戏。</p>
<p>走到红色格时，会自动触发对应事件，但不会显示在屏幕上（内存资源有限），按button2确认以继续游戏。</p>
<p>被购买的房子旁边会出现一个有颜色的圆点，紫色代表玩家1所有，白色代表玩家2所有。</p>
<h4 id="6-显示说明"><a href="#6-显示说明" class="headerlink" title="6.显示说明"></a>6.显示说明</h4><p>Arduino上的七段数码管显示的格式是：C1代表玩家1，C2代表玩家2，数码管第三位空出，第四位表示骰子点数和骰子动画。</p>
<p>SWORD板上七段数码管显示的格式是：GPA占用两位和一个小数点，中间空出一位，紧接着五位显示金钱（玩家不一定与Arduino的同步）。金钱上限是88888，GPA上限5.0。</p>
<p>VGA显示的是游戏主体界面，如果碰到橙色时间会有事件卡弹出，如果碰到红色事件则不会有任何提示。</p>
<p><strong>注意</strong>：无论是红色事件还是普通事件，出发后都需要按下button2确认后才能继续游戏。</p>
<p>#Part2.名词介绍</p>
<blockquote>
<p>###标注：这一部分是文档例行的名词介绍，是为了文档的完整性而存在的，有经验的读者可以跳过这个篇章。</p>
</blockquote>
<h3 id="一、VGA"><a href="#一、VGA" class="headerlink" title="一、VGA"></a>一、VGA</h3><p>VGA作为一种标准的显示接口得到了广泛的应用，其信号类型为模拟类型，显示卡端的接口为 15 针母插座。<br>常见的彩色显示器一般都是由CRT(阴极射线管)构成，其引出线共含 5 个信号：R、G、B(三基色信号)、HS(行同步信号)、VS(场同步信号)。每一个像素的色彩由R(红) .G(绿). B(蓝)三基色构成。显示屏一般通过光栅扫描的方式扫描一幅屏幕图像上的各个点，形成整个图片。<br>另外，VGA 时序控制模块是本设计的重要部分，最终的输出信号行、场同步信号必须严格按照VGA 时序标准产生相应的脉冲信号，如下图所示。</p>
<p><img src="https://i.loli.net/2020/03/20/oQbCszqvP8Spy43.png" alt="image-20191229163550133.png"></p>
<h3 id="二、PS-2"><a href="#二、PS-2" class="headerlink" title="二、PS/2"></a>二、PS/2</h3><p>PS/2 通信协议是一种双向同步串行通信协议。通信的两端通过 CLOCK(时钟脚)同步，并通过DATA(数据脚)交换数据。</p>
<p><img src="https://i.loli.net/2020/03/20/akpeB4WThRyjnz8.png" alt="image-20191229163658985.png"></p>
<p>PS/2 到主机的通信时序如下图所示。数据在 PS/2 时钟的下降沿读取。对于 PS/2 设备，一般来说从时钟脉冲的上升沿到一个数据转变的时间至少要有5us；数据变化到下降沿的时间至少要有 5us，并且不大于 25us，这个时序非常重要应该严格遵循。</p>
<p><img src="https://i.loli.net/2020/03/20/UZSzlanFOoWfd9P.png" alt="image-20191229163714256.png"></p>
<h1 id="Part3-开发心得与问题处理"><a href="#Part3-开发心得与问题处理" class="headerlink" title="Part3.开发心得与问题处理"></a>Part3.开发心得与问题处理</h1><h3 id="一、使用Basys3-Vivado-逻辑分析仪的组合进行调试"><a href="#一、使用Basys3-Vivado-逻辑分析仪的组合进行调试" class="headerlink" title="一、使用Basys3 + Vivado +逻辑分析仪的组合进行调试"></a>一、使用Basys3 + Vivado +逻辑分析仪的组合进行调试</h3><p>​    在这次课程设计中，因为实验室开放时间不定，调试我们的游戏就变成了一件困难的事情，于是我从Digilent官网自费购买了一块FPGA开发板：Basys3 。</p>
<p><img src="https://i.loli.net/2020/03/20/8ZkIFhbLSRonpwX.png" alt="image-20191229123115670"></p>
<p>这块板子与东四-509性能强大的SWORD当然是没什么可比性，但是价格也是很实惠（在与淘宝店家交流后，报出了王总辉老师的名字，甚至了我额外优惠），七段数码管、按钮、开关、LED灯、USB-HID、VGA、ROM/RAM灯资源都算齐全，基本上可以满足我的课程作业需求。</p>
<p>​    不过有一个问题，我的这款板子仅支持Vivado开发，并不支持ISE。在与我的学长们交流过后，我了解到Vivado的综合速度要远高于ISE，并且界面的友好程度也比ISE高上很多，于是我最终采用了Vivado作为本次课程作业的开发工具。</p>
<p>​    除了这些，还有一个东西我非常推荐，那就是无敌的逻辑分析仪。逻辑分析仪是一种分析数字系统逻辑关系的仪器，可以简单理解成一种只能显示0和1的示波器。逻辑分析仪的价格普遍比较贵，这里我推荐一个开源项目：DSLogic，有条件的可以直接去淘宝购买，动手能力强的也可以参考设计书自己制作。价格大概300左右。</p>
<p><img src="https://i.loli.net/2020/03/20/iqwfcYJ5OvL3dUa.png" alt="image-20191229122827566"></p>
<p><img src="https://i.loli.net/2020/03/20/H6x7igq2ntlFMRD.png" alt="image-20191229122955566"></p>
<p>在本文中，主动去编写testbench进行仿真的时候比较少，因为我们的游戏逻辑复杂，单单看简单的仿真结果是得不到很好成效的，另一个原因是我们使用了逻辑分析仪，某种意义上可以代替仿真的很多功能。</p>
<h3 id="二、PS-2协议键盘与USB-HID"><a href="#二、PS-2协议键盘与USB-HID" class="headerlink" title="二、PS/2协议键盘与USB-HID"></a>二、PS/2协议键盘与USB-HID</h3><p>​    在本次课程作业中，有一个能力提高设计，也就是使用所谓的PS/2键盘作为游戏输入。我在老师提供的VGAdemo中找到了PS/2驱动的代码，但是我一开始完全看不懂，于是我找了一些教程，大致理解了一下PS/2协议的内容。下面是我在网上随便找的一张PS/2接口的图片：</p>
<p>​    可以看到，这里面是有六个针脚的，但是实际上PS/2协议只需要4个针脚，也就是GND、VCC、PS2_CLK和PS2_DATA。</p>
<p>​    在本文的后半部分，已经给出了PS/2的时序图，我基本上就是按照这个时序图理解的PS/2键盘，不过在使用过程中却遇到了很多问题。</p>
<h4 id="1-高级键盘无法使用"><a href="#1-高级键盘无法使用" class="headerlink" title="1.高级键盘无法使用"></a>1.高级键盘无法使用</h4><p>​    首先，我自己使用的键盘是FILCO Minila 机械键盘，接到我的Basys3上，键盘输入完全无效，USB-HID旁边的busy灯长亮，这让我非常疑惑。</p>
<p>​    于是我查询了Basys3的USB-HID物理实现，得知USB-HID旁边的小芯片FT2232就是用来进行转码的芯片。</p>
<p><img src="https://i.loli.net/2020/03/20/4QLgtmRckBWJZs5.png" alt="image-20191228171410251"></p>
<p>从上图中可以看到，FT2232的TXD与RXD两个引脚就是FT2232将USB键盘码解码后得到的PS2_CLK与PS2_DATA</p>
<p>我百度了很久，我找到了原来所谓的TXD和RXD引脚就是上图中的ADBUS0与ADBUS1两个引脚。</p>
<p>于是我准备使用逻辑分析仪，分析一下这两个针脚的时序，看看是什么问题，但是由于Basys3上FT2232这个芯片的引脚都非常小，逻辑分析仪的钩子都太大了，没办法测。思考了一段时间后，我发现其实我可以间接测量Artix-7上的B18与A18，来获取PS2_DATA与PS2_CLK，进一步，因为B18和A18是可以自己定义接线的引脚，我就在我的测试工程中把他们接到Basys3右边的一排Pmod connector上的A14与A16两个引脚上，这样就可以很方便的使用逻辑分析仪来测量了。</p>
<p>​    我使用的逻辑分析仪是著名的开源项目DSLogic的基础版，原生支持PS/2时序的解码，采样了一段时间后，我发现逻辑分析仪的结果完全为空。</p>
<p>​    也就是意味着我的PS/2时序完全没有输出，这让我很是自闭。我又把我的键盘接回我的电脑，去同学那里借了一个普通薄膜键盘，不过这个键盘插上后逻辑分析仪的结果也是一样，我更自闭了，我认为我的使用方法完全正确，所以我怀疑是学校的PS/2模块本身就有问题。我正查着资料，突然灵机一动，打开我的设备管理器，看了一下设备情况，我发现原来我的键盘会被我的电脑识别成为多个键盘输入。</p>
<p><img src="https://i.loli.net/2020/03/20/LQeyx3IktGU6i9X.png" alt="image-20191229123717917"></p>
<p>​    这下我一下子就懂了，是我的键盘太高级了，我猜测是因为现代键盘都实现了N键无冲之类的功能，所以无法被简单识别成为单个设备（当然我懒得去考察这一猜测是否属实了），所以USB-HID在工作的时候，FT2232无法正常的识别与解码我的键盘。</p>
<h4 id="2-更换使用自制键盘"><a href="#2-更换使用自制键盘" class="headerlink" title="2.更换使用自制键盘"></a>2.更换使用自制键盘</h4><p>​    我在浙江大学学生E志者协会做社团工作的时候，曾经自己做过一个小键盘，当时我是使用佳达隆青轴作为轴体，使用HT82K629A作为控制芯片。拿来做这个课程作业非常合适！下面是百度找的HT82K629A的电路图：<img src="https://i.loli.net/2020/03/20/NeaxBwioQ4OLStl.png" alt="image-20191228174243712"></p>
<p>​    我的小键盘虽然简陋，但是却出奇的好用，接上这个小键盘，我的逻辑分析仪成功从两个引脚中读到了正确的时序图。</p>
<p>将这个小键盘的键盘码用DispNumber模块显示在Basys3的七段数码管上，也可以看到按下按键时键盘码正确显示，抬起按键时键盘码恢复为F0，说明我的PS/2模块是完全正常工作的。（下图使用了DSLogic的解码功能）</p>
<p><img src="https://i.loli.net/2020/03/20/71kQsWUKIYmXzSE.png" alt="image-20191229145638041"></p>
<p><img src="https://i.loli.net/2020/03/20/5ZcHGUDsYzOEXkq.png" alt="image-20191229145918962"></p>
<h4 id="3-移植到SWORD2-0"><a href="#3-移植到SWORD2-0" class="headerlink" title="3.移植到SWORD2.0"></a>3.移植到SWORD2.0</h4><p>我的代码移植到Nexys4-DDR这款板子上也可以正常工作，但是在SWORD板子上我却吃了瘪，后来得知SWORD的键盘码使用偶校验，更正后，我的键盘终于可以正常工作了！</p>
<h3 id="三、VGA模块与IP核生成"><a href="#三、VGA模块与IP核生成" class="headerlink" title="三、VGA模块与IP核生成"></a>三、VGA模块与IP核生成</h3><p>​    VGA模块是我踩坑踩的最多的一个模块。我在这次课程设计中使用的VGA模块来源于老师提供的VGAdemo。</p>
<p>​    首先碰到的问题是怎么去使用VGA模块。我一开始对VGA输出的Row_addr和Col_addr完全不能理解，我没想明白为什么会有这俩参数，我以为我要自己去推断每个周期我扫描到的像素点位置，结果写出来一堆乱七八糟的东西，完全不能运行。</p>
<p>​    在参考了几篇优秀报告后，我大概明白了，实际上这个VGA模块是先扫描到一个像素点，此时还没有把颜色涂上 ，VGA会先把这个点的坐标返回，然后根据你提供的data把这个点涂色。明白这个关键问题后，就开始了漫长的调试。</p>
<p>​    我一开始比较怂，没有直接综合实现，而是先写了Testbench进行仿真，然而仿真结果让我大吃一惊，我的行扫描与场扫描完全是红线。因为手上并没有VGA接口的显示器，没办法直接测试，于是我使用逻辑分析仪，测量HS与VS两个脚。HS与VS在Basys3上也就是P19和R19这两个针脚。</p>
<p>​    逻辑分析仪测得的时序结果非常稳定，从图中也可以看到场扫频率为60Hz，完全满足了我们的预期，于是我检查了一下仿真结果，原来是我仿真的时间太短，HS和VS还没有来得及出现。</p>
<p><img src="https://i.loli.net/2020/03/20/F6YmkoK8hUqjdME.png" alt="image-20191229125130221"></p>
<p>​    准备工作做好后，我开始生成我的ROMIP核，使用的是Block Memory Generator IP核，这里提一下，实际上除了Block Memory 还有 Distribute Memory 本质上其实就是使用FPGA的组合逻辑模拟出一些寄存器，效果并不是很好，而Block Memory则是内嵌在芯片内的高速RAM，再用这些高速RAM去充当ROM，就非常好。至于如何把BMP转成COE文件，这部分我是使用C语言完成的，代码已经放在本文最后，我在宋黎明老师开设的《图像信息处理》上已经熟练掌握了BMP的文件结构和如何使用C/C++操作BMP文件，因此就没有和其他同学那样使用Matlab进行图像处理。我们的IP核使用单口ROM核，因为我觉得单口已经足够满足需求了。</p>
<h4 id="1-资源问题"><a href="#1-资源问题" class="headerlink" title="1.资源问题"></a>1.资源问题</h4><p>​    烧好ROM核后，就出现了图片显示部分的中第一个问题：资源问题。从下面这份文件中我们可以知道，Basys3共有50块Block Memory，总共1800KB，而一张640x480，深度为12的coe文件大概需要52个Block Memory左右，所以我这个板子连一张背景图片都放不上去，于是我想到了插值。</p>
<p><img src="https://i.loli.net/2020/03/20/omEeiDLKrZqYdCS.png" alt="image-20191228195350478"></p>
<p>​    </p>
<p>总体的想法就是，不使用640x480的图片，而是改用320x240的图片，这样每张图片就只需要13个Block Memory。而在实际现实的时候，我们则将这张图片线性变换到640x480，具体的变换方法如下：</p>
<p>​    1.首先，我们先给定一个640x480的网格，求出一个到原图的逆线性变换，也就是求出从640x480的图片到320x240的线性变换。</p>
<p>​    2.然后，因为原先的网格是640x480的，变换到320x240必然会有很多点无法正好落到320x240的网格交点上，这些点应该显示出的颜色值由我们的插值得到的结果决定。</p>
<p>​    3.采用最近邻插值解决刚刚提出的问题。</p>
<p>所谓最邻近插值，也就是最naive的插值方法，即：把最近的像素点颜色原样搬过来。</p>
<p>假如图中的5个有坐标的点为320x240网格上的点，图中除了黄色点以为的其他点都是进行线性变换后640x480网格上的像素点，现在我们可以看到$P(x,y)$附近的四个点都没有正好落在格点上（我们先不管其他点），而他们四个距离黄色点最近，那么我在显示的时候，就把这四个点的颜色都显示成$P(x,y)$的颜色。</p>
<p>​    这是一种很简单很基础的插值，但是对于我们这种小图片还是很管用的，大大减少了Block Memory资源的浪费。</p>
<h4 id="2-同步问题"><a href="#2-同步问题" class="headerlink" title="2.同步问题"></a>2.同步问题</h4><p>我遇到的第二个问题是同步问题，我发现我显示的图片整体向右偏移了一个细条，我经过反复查阅资料和参考优秀实验报告，得出这是因为：我VGA模块输出的x，y坐标，在always语句中不会立刻计算这个xy对应的ROM地址值，他会等到下一个时钟周期（clkdiv[1]）到来的时候才会更新，ROM地址更新后，ROM的data也不会立刻更新，而是等到再过一个时钟周期，而VGA模块接受到Data后，也是要再过一个时钟周期才能更新，这就是为什么我的模块无法预期进行。</p>
<p>解决方案实际上是这样的：首先把根据x、y计算地址值的always模块改成always@(*)，这样他就会退化成时序逻辑，就不存在非阻塞赋值引发的延时问题了，但ROM模块必须是时序的，不过也有办法解决。我最开始给ROM的时钟是25MHz，与VGA同步，这样就一定会造成延迟，但我可以把ROM的时钟加速到VGA时钟的整数倍，比如100MHz。</p>
<p><img src="https://i.loli.net/2020/03/20/8dfRUk26CiI4OoV.png" alt="image-20191228214741772"></p>
<p>这样是可以完成对齐的，也可以解决延时问题，不过实际操作的时候我采用了50MHz的时钟频率，因为我发现理论上虽然100MHz可行，但Vivado综合会给出warning，提示我板子的Block Memory可接受最高的时钟频率是50MHz，因此就使用了clkdiv[0]作为时钟。</p>
<h4 id="3-曲线人物边缘问题"><a href="#3-曲线人物边缘问题" class="headerlink" title="3.曲线人物边缘问题"></a>3.曲线人物边缘问题</h4><p>我的图片显示出来后，还是存在很多问题，最典型的问题就是我的人物是一个复杂几何形状，但我烧好的ROM核里面的图片信息肯定是一个方形的，coe文件没办法携带Alpha通道，无法表示透明度，这样我的人都变成一个个方块，就非常不好。</p>
<p>我的解决方案也比较简单，就是选择在处理图片的时候，将方块中人物周围的不需要部分填充成为特殊颜色，在转换为coe文件后，只要读取到这种颜色编码，就选择不显示ROM中的数据，而是显示游戏背景，这样就避免了刚刚提到的问题。</p>
<p>不过另一个问题是，因为Photoshop生成的bmp图片是32位的，在转换为12位coe的时候就会使得很多颜色相近的颜色编码暴力变为同一种颜色编码，这个我最初在图片中埋藏的信息就不知道被转换成什么了。</p>
<p>所以我干脆以暴制暴，我把整个图片的色阶调低，让他所有颜色都变暗，背景颜色全部填充为0xffffffff，32位色到12位色是一个线性变换过程，不会改变端点的值，因此0xffffffff会被变换成0xffff，我只需检测0xffff就可以了，而且因为我调低了色阶，游戏人物的主体就不会被我干扰到。最后的成型效果如下：</p>
<p><img src="https://i.loli.net/2020/03/20/53rcMdmfwGt6DKR.png" alt="image-20191229151205953"></p>
<h3 id="四、底层封装与合理分工"><a href="#四、底层封装与合理分工" class="headerlink" title="四、底层封装与合理分工"></a>四、底层封装与合理分工</h3><p>我在写代码的过程中，觉得如果游戏逻辑的编写者还要去处理复杂的底层逻辑，比如VGA显示输出、七段数码管输出等等。我希望能够让游戏逻辑编写者不去思考这些问题，于是我将我们小组分为游戏逻辑编写和底层封装两部分，正好由两个人完成，两个人提前约定好API，就可以单独调试，互不干扰。</p>
<p>比如，在处理玩家显示位置的时候，底层部分就这样去实现：</p>
<pre class="line-numbers language-verilog"><code class="language-verilog"> <span class="token function">if</span><span class="token punctuation">(</span>p1_location <span class="token operator">==</span> <span class="token number">5'b00000</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">>=</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">&lt;</span> <span class="token number">48</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">>=</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">&lt;</span> <span class="token number">48</span><span class="token punctuation">)</span><span class="token keyword">begin</span>
        player1_data_addr <span class="token operator">&lt;=</span> <span class="token punctuation">(</span>y_pos <span class="token operator">-</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">48</span><span class="token operator">+</span><span class="token punctuation">(</span>x_pos <span class="token operator">-</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token function">if</span><span class="token punctuation">(</span>p1_location <span class="token operator">==</span> <span class="token number">5'b00001</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">>=</span> <span class="token number">54</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">&lt;</span> <span class="token number">102</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">>=</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">&lt;</span> <span class="token number">48</span><span class="token punctuation">)</span> <span class="token keyword">begin</span>
        player1_data_addr <span class="token operator">&lt;=</span> <span class="token punctuation">(</span>y_pos <span class="token operator">-</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">48</span><span class="token operator">+</span><span class="token punctuation">(</span>x_pos <span class="token operator">-</span> <span class="token number">54</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token function">if</span><span class="token punctuation">(</span>p1_location <span class="token operator">==</span> <span class="token number">5'b00010</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">>=</span> <span class="token number">187</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">&lt;</span> <span class="token number">235</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">>=</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">&lt;</span> <span class="token number">48</span><span class="token punctuation">)</span> <span class="token keyword">begin</span>
        player1_data_addr <span class="token operator">&lt;=</span> <span class="token punctuation">(</span>y_pos <span class="token operator">-</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">48</span><span class="token operator">+</span><span class="token punctuation">(</span>x_pos <span class="token operator">-</span> <span class="token number">187</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>（这是一小部分代码举例）</p>
<p>在这种设计中，底层部分把人物的显示位置交给了变量p1_location接管，这个有限状态机的构造，就使得游戏逻辑的编写者只需简单操作p1_location的数值，就可以改变人物的显示位置。同样，房子的显示也是这样构造的：</p>
<pre class="line-numbers language-Verilog"><code class="language-Verilog">if(has_house[1] == 1 && x_pos >= 96 && x_pos < 144 && y_pos >= 0 && y_pos < 48)begin
house_data_addr <= y_pos * 48 + (x_pos - 96);
end

if(has_house[2] == 1 && x_pos >= 229 && x_pos < 277 && y_pos >= 0 && y_pos < 48)begin
house_data_addr <= y_pos * 48 + (x_pos - 229);
end<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>不过有一点不同的是房子的状态是使用类似独热码（但不是）进行编码的，这样就可以在多个地方显示房子。</p>
<p>至于调试的时候，底层部分编写者就简单写一下Testbench，在里面为几个状态赋值一下，就可以测试到是否有正确显示图片，而游戏逻辑编写者，则可以仿真查看一下各个状态的情况，或者把状态输出到七段数码管和LED灯上。</p>
<p>从代码总量和调试时间上来看，这样分工也是很合理的，两个人最后是游戏逻辑比底层模块早完成一天。</p>
<h3 id="六、游戏逻辑的设计"><a href="#六、游戏逻辑的设计" class="headerlink" title="六、游戏逻辑的设计"></a>六、游戏逻辑的设计</h3><p>游戏逻辑的主体就是一个巨大的有限状态机。最顶层的状态被称为global_state，负责管理游戏的开始界面、游戏进行界面和游戏结束界面。而在游戏进行这个状态就是游戏逻辑的主要体现，游戏进行状态下设一个状态名为state的有限状态机，分管如下内容：</p>
<p>（配图：state状态机）</p>
<p>可以看出，在这个状态机中，状态与状态之间的转换是设计的最复杂部分。单纯去讲这个游戏的设计的复杂度并不能体现什么，所以我下面会挑一些我遇到的困难进行描述。</p>
<h4 id="1-随机数问题"><a href="#1-随机数问题" class="headerlink" title="1.随机数问题"></a>1.随机数问题</h4><p>在Verilog中，实际上是预制了随机数生成的方法，也就是使用：$random ，但是这个方法无法在Basys3上正常通过综合，这就造成了很多麻烦。我百度了一些随机数生成方法，最常见的也就是LFSR方法。</p>
<p><img src="https://i.loli.net/2020/03/20/Qkw9cDH1se3TIJq.png" alt="image-20191228234558989"></p>
<p>具体的原理上图已经很清楚了，就不过多赘述了，说说我碰到的问题，虽然LFSR模块可以给我一个随机数，但是不知为何，这个随机数在Basys3上是一个不会变化的随机数，这就导致了我的人物每次都走同样的路程，显然这是与我的初衷不符合的。在反复调试后，我依然没有让这个模块正常运转。现在我倒是可能理解了当时为什么会出现问题，很大可能是我为LFSR提供的时钟太快了（后面会详细描述）</p>
<p>于是我换了一种想法生成随机数，我自己写了一个计时模块，记录从游戏开始到现在经历的周期数目，然后截取低四位，模6再加1返回，作为随机数。</p>
<pre class="line-numbers language-verilog"><code class="language-verilog"><span class="token keyword">module</span> <span class="token function">Random</span><span class="token punctuation">(</span>
    <span class="token keyword">input</span> clk<span class="token punctuation">,</span>
    <span class="token keyword">output</span> <span class="token keyword">wire</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span>random
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">reg</span> <span class="token punctuation">[</span><span class="token number">31</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token keyword">rand</span><span class="token punctuation">;</span>
    <span class="token keyword">assign</span> random <span class="token operator">=</span>  <span class="token keyword">rand</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">%</span> <span class="token number">6</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span> 
    <span class="token keyword">initial</span> <span class="token keyword">begin</span>
        <span class="token keyword">rand</span> <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">end</span>

    <span class="token important">always @</span><span class="token punctuation">(</span><span class="token keyword">posedge</span> clk<span class="token punctuation">)</span> <span class="token keyword">begin</span> 
        <span class="token keyword">rand</span> <span class="token operator">&lt;=</span> <span class="token keyword">rand</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token keyword">end</span>
<span class="token keyword">endmodule</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>这个方法很简单，因为我需要随机数的地方只有掷骰子，而每次按下按键的间隔必然是不同的，所以这个随机数还是非常靠谱的。但是实际使用的时候，我所有得到的返回值都是1，也就是我rand % 6的结果都是0，但仿真结果是正常的，这就非常离谱。我调试了一天半，最后发现是时钟周期过快了，随机数模块接收的时钟周期太快了，以至于在物理实现上出现了锁存现象，后来经过试验，将时钟周期调到10ms是非常合适的。</p>
<p><img src="https://i.loli.net/2020/03/20/a5swQTgX3G6mDbB.png" alt="image-20191229000956417"></p>
<h4 id="2-掷骰子动画"><a href="#2-掷骰子动画" class="headerlink" title="2.掷骰子动画"></a>2.掷骰子动画</h4><p>我希望在掷骰子的过程中，尽可能让玩家有一些参与感，所以想用Arduino上的四个七段数码管显示一个掷骰子的过程，大概就是：七段数码管上面一直数字乱转，最后停在一个数字上静止，这个数字就是最后骰子的点数。实现这个动画花了我一点脑力，基本上就是，设置两个计数器，一个用来延时，一个用来更新显示数字，然后当更新数字的计数器归零的时候，意味着动画结束，就该显示我的骰子点数了。</p>
<p>想法是好的，初衷是好的，但是现实是残酷的，我这个东西一开始一直都是常数显示，随机数模块又弄了好久，最后发现的问题还是在非阻塞赋值上。</p>
<pre class="line-numbers language-verilog"><code class="language-verilog"><span class="token function">if</span><span class="token punctuation">(</span>step <span class="token operator">==</span> <span class="token number">4'b1111</span><span class="token punctuation">)</span><span class="token keyword">begin</span>
    step <span class="token operator">&lt;=</span> rand_num<span class="token punctuation">;</span>
    rand_delay <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    randing <span class="token operator">&lt;=</span> <span class="token number">4'b1111</span><span class="token punctuation">;</span>
<span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token function">if</span><span class="token punctuation">(</span> randing <span class="token operator">!=</span> <span class="token number">0</span> <span class="token punctuation">)</span><span class="token keyword">begin</span>
    <span class="token function">if</span><span class="token punctuation">(</span>rand_delay <span class="token operator">!=</span> <span class="token number">24'hffffff</span><span class="token punctuation">)</span><span class="token keyword">begin</span>
        rand_delay <span class="token operator">&lt;=</span> rand_delay <span class="token operator">+</span> <span class="token number">24'h000001</span><span class="token punctuation">;</span>
    <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token keyword">begin</span>
        randing <span class="token operator">&lt;=</span> randing <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>
        rand_delay <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        numberInArduino <span class="token operator">&lt;=</span> <span class="token operator">{</span><span class="token number">12'b1100_0010_0000</span><span class="token punctuation">,</span>rand_num <span class="token operator">}</span><span class="token punctuation">;</span>
        <span class="token function">if</span><span class="token punctuation">(</span>randing <span class="token operator">==</span> <span class="token number">4'b0001</span><span class="token punctuation">)</span><span class="token keyword">begin</span>
            numberInArduino <span class="token operator">&lt;=</span> <span class="token operator">{</span><span class="token number">12'b1100_0010_0000</span><span class="token punctuation">,</span> step <span class="token operator">}</span><span class="token punctuation">;</span>
        <span class="token keyword">end</span>
    <span class="token keyword">end</span>
<span class="token keyword">end</span>    <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>这段代码中，我所有的检测机制，比如对randing的检测，最初都是写的randing == 4‘b0000这样，但是问题在于，这是一个全部由非阻塞赋值写的always模块，我上一句虽然设置了randing归零，但是到了下面检测的时候还没有起作用，所以这里所有的语句都要提前“预判”检测。这个问题引发了不知道多少BUG，说到底还是我对Verilog不够熟悉。</p>
<h4 id="3-游戏性的考虑"><a href="#3-游戏性的考虑" class="headerlink" title="3.游戏性的考虑"></a>3.游戏性的考虑</h4><p>作为一个能被称为好的游戏，我认为游戏设计者必须考虑到平衡性的问题。因为游戏是《大富翁》，所以在这个游戏里面有很多触发事件。但是我最初设计的时候，六种普通事件分别是：GPA +0.3、GPA -0.3、Money +3000、Money -1500、Salary +1500、Salary -1000。</p>
<p>这些数据看起来好像没什么问题，但是很有问题的一点就是，金钱、GPA、薪水的期望值都是正的，也就是意味着，这个游戏在后期，越玩钱会越来越多。我曾经测试过，后期到一定程度后，即便一个人占领了全部土地，并在全部土地改好了房子，也很难让另一个玩家破产，但实际上面对这种绝对优势对方应该很快就要败北才对。从这一点考虑，无论如何游戏的金钱总期望应该是负的，这样才是一个有游戏性的游戏。所以我大幅度修改了这些事件的奖励值。</p>
<h4 id="4-更换性能更强大的板子：Nexys4-DDR"><a href="#4-更换性能更强大的板子：Nexys4-DDR" class="headerlink" title="4.更换性能更强大的板子：Nexys4 DDR"></a>4.更换性能更强大的板子：Nexys4 DDR</h4><p>虽然我已经对我的所有大图片都进行了最近邻插值处理，尽可能的提高空间利用率，但是到了游戏制作后期，我的图片素材占用空间仍然达到了61个Block memory，超过了Basys3能处理的50Block memory上限，这时候其实有两种办法处理，一种是干脆放弃Basys3，去509用SWORD，另一种则是使用FPGA外的存储设备，但是时间紧，任务重，我已经承担不起这个学习成本了。</p>
<p>最终我另辟蹊径，从我电气学院的同学那边借到了一块Nexys4 DDR板子，它的资源数有足足100 Block memory（当然价格也贵了一倍）。这块板子就成为了我后期调试DEBUG的救星。</p>
<p><img src="https://i.loli.net/2020/03/20/HSi2QX3I6nd4Zrx.png" alt="image-20191229115016099"></p>
<p>不过比较遗憾的是，这个板子的八个七段数码管全部都是并行的，而我的游戏中除了并行数码管还用了串行数码管，所以就没办法在这个板子上测试七段数码管了。所以最后几天我还是老老实实去509蹲了几天实验室，不得不说SWORD板子还是真的牛逼。</p>
<h1 id="Part4-改进想法"><a href="#Part4-改进想法" class="headerlink" title="Part4.改进想法"></a>Part4.改进想法</h1><h3 id="一、用双线性插值代替最近邻插值"><a href="#一、用双线性插值代替最近邻插值" class="headerlink" title="一、用双线性插值代替最近邻插值"></a>一、用双线性插值代替最近邻插值</h3><p>​    最近邻插值虽然简单好用，但是最后线性变换得到的图片清晰度实在是不敢恭维，只能说勉勉强强能看，要想在长宽各放大一倍的情况下还能得到清晰的图片，我最推荐的插值方式其实是双线性插值，但是因为实现起来比较麻烦，我真实的工程里面仍然使用的是最近邻插值。</p>
<p>具体操作：</p>
<p>​    设目标点$P$和其他四个点$Q_{11},Q_{12},Q_{21},Q_{22}$的颜色为$f(x,y),f(x_1,y_1),f(x_1,y_2),f(x_2,y_1),f(x_2,y_2)$</p>
<p>对目标点在$x$轴的两个投影点进行线性Lagrange插值：<br>$$<br>\displaystyle {<br>\begin{aligned}<br>    f(x,y_{1})&amp;\approx {\frac {x_{2}-x}{x_{2}-x_{1}}}f(Q_{11})+{\frac {x-x_{1}}{x_{2}-x_{1}}}f(Q_{21}),\<br>    f(x,y_{2})&amp;\approx {\frac {x_{2}-x}{x_{2}-x_{1}}}f(Q_{12})+{\frac {x-x_{1}}{x_{2}-x_{1}}}f(Q_{22}).<br>\end{aligned}}<br>$$<br>然后再对这两个点使用线性Lagrange插值，得出：<br>$$<br>{\displaystyle {\begin{aligned}f(x,y)&amp;\approx {\frac {y_{2}-y}{y_{2}-y_{1}}}f(x,y_{1})+{\frac {y-y_{1}}{y_{2}-y_{1}}}f(x,y_{2})\&amp;={\frac {y_{2}-y}{y_{2}-y_{1}}}\left({\frac {x_{2}-x}{x_{2}-x_{1}}}f(Q_{11})+{\frac {x-x_{1}}{x_{2}-x_{1}}}f(Q_{21})\right)\&amp;+{\frac {y-y_{1}}{y_{2}-y_{1}}}\left({\frac {x_{2}-x}{x_{2}-x_{1}}}f(Q_{12})+{\frac {x-x_{1}}{x_{2}-x_{1}}}f(Q_{22})\right)\&amp;={\frac {1}{(x_{2}-x_{1})(y_{2}-y_{1})}}{\big (}f(Q_{11})(x_{2}-x)(y_{2}-y)+f(Q_{21})(x-x_{1})(y_{2}-y)\&amp;+f(Q_{12})(x_{2}-x)(y-y_{1})+f(Q_{22})(x-x_{1})(y-y_{1}){\big )}\&amp;={\frac {1}{(x_{2}-x_{1})(y_{2}-y_{1})}}{\begin{bmatrix}x_{2}-x&amp;x-x_{1}\end{bmatrix}}{\begin{bmatrix}f(Q_{11})&amp;f(Q_{12})\f(Q_{21})&amp;f(Q_{22})\end{bmatrix}}{\begin{bmatrix}y_{2}-y\y-y_{1}\end{bmatrix}}.\end{aligned}}}<br>$$<br>这样我们就得到了目标点的颜色值。我一般使用双线性插值时都是对$RGB$三个通道一起进行双线性插值，实际上也可以对三个通道分别进行双线性插值，效果也不错。</p>
<h3 id="二、为游戏添加配乐"><a href="#二、为游戏添加配乐" class="headerlink" title="二、为游戏添加配乐"></a>二、为游戏添加配乐</h3><p>作为一款大富翁游戏，没有音乐实在是非常遗憾，但实际上这个功能的实现并不是很复杂。我们可以看到，SWORD板子上附带的那个小块Arduino实际上已经自带了一个蜂鸣器，使用这个蜂鸣器就可以简单做出配乐效果。</p>
<p>但是我问了一些学长学姐，据说509实验板上的蜂鸣器都是被屏蔽改造的，因为往届做实验的时候蜂鸣器会经常发声，干扰学生，于是学校就把这些蜂鸣器都屏蔽了（未经考证）</p>
<p>这就断了蜂鸣器这条路。不过如果真的想做配乐，也不是没有办法的。我思考了一下大概有两条路：</p>
<p>其一，使用SWORD板子上的3.5MM音频输出口。</p>
<p><img src="https://i.loli.net/2020/03/20/c4ErHGShJoQpj8z.png" alt="image-20191229120706561"></p>
<p>这个3.5MM接口的推力可能不是很够，这里我没有找到SWORD2.0的设计文档，不过我自己猜测应该和Nexys4-DDR的3.5MM接口构造差不多。下图是Nexys4-DDR的设计图：</p>
<p><img src="https://i.loli.net/2020/03/20/sUhApQK7aSczFNV.png" alt="image-20191229121209930"></p>
<p>看起来只是可以输出音频信号，但是推动力应该不够驱动小音箱，不过我们可以从淘宝上购买一个小功放来解决这个问题。</p>
<p><img src="https://i.loli.net/2020/03/20/b8zBEgnDJcloxvr.png" alt="image-20191229121845673"></p>
<p>不过这个改造和使用起来也不是很方便。</p>
<p>第二种方法就是使用板子上的Pmods扩展一个音频输出。Digilent中国官网上就有售卖这种东西，我们以PmodAMP2举例：</p>
<p><img src="https://i.loli.net/2020/03/20/1YUAFsi2lQ4bcMW.png" alt="image-20191229122054226"></p>
<p>这种方式的好处是文档齐全，而且保证能用，毕竟是官网扩展，肯定是靠谱的。</p>
<p><img src="https://i.loli.net/2020/03/20/wBp1CNadlmqJu3O.png" alt="image-20191229122154147"></p>
<p>PmodAMP2的构造非常简单，如果不想购买的话也可以直接自己焊一块出来。官方有很多这个模块的使用教程，甚至还有一些PmodAMP2配合Basys3制作的项目案例，比如节奏大师之类的。</p>
<p>使用PmodAMP2的时候只需要把对应的模块针脚接好就行了。</p>
<p><img src="https://i.loli.net/2020/03/20/KhVWqAsSZuLMJoj.png" alt="image-20191229122355972"></p>
<h3 id="三、实现人物选择界面"><a href="#三、实现人物选择界面" class="headerlink" title="三、实现人物选择界面"></a>三、实现人物选择界面</h3><p>在期中时交的课程设计规划中，我给出了一个人物选择界面，支持2-4人同时游戏，其实这一部分在实现难度上并不大，对于一个大富翁游戏而言，2个玩家4个玩家的区别无非就是复读一遍代码，把状态机改的更复杂一点，但是问题在于，如果添加了任务选择界面，我就需要再添加一张320x240的选择界面图片和四张192x192人物大图以及两个48x48人物小图。</p>
<p>在添加这些图片之前，我已经使用了61个Block Memory，加上这些图片必然会超过100个Block Memory，而Nexys4-DDR仅有100个Block Memory，所以为了方便我的调试（不想每天都蹲在509），就把这部分无关紧要的添头功能去掉了。</p>
<h1 id="Part5-辅助模块描述"><a href="#Part5-辅助模块描述" class="headerlink" title="Part5.辅助模块描述"></a>Part5.辅助模块描述</h1><h3 id="一、BCD转换模块"><a href="#一、BCD转换模块" class="headerlink" title="一、BCD转换模块"></a>一、BCD转换模块</h3><p>该模块十分简单，主要工作就是把传入的数据（二进制）进行处理，转换为十进制输出，该模块的作用是将人物的金钱、绩点等信息转换为十进制，然后送给七段数码管模块进行显示。代码如下图所示，输入数据为8bit或20bit的二进制数值，然后转换为相应的四位十进制数输出。</p>
<pre class="line-numbers language-Verilog"><code class="language-Verilog">module BCD_20(
    input [19:0]binary,
    output [19:0]bcd
    );
    wire [3:0] d1;    
    wire [3:0] d2;    
    wire [3:0] d3;    
    wire [3:0] d4;    
    wire [3:0] d5;    

    assign d1 = binary % 10;
    assign d2 = (binary / 10) % 10; 
    assign d3 = (binary / 100) % 10; 
    assign d4 = (binary / 1000) % 10; 
    assign d5 = (binary / 10000) % 10; 
    assign bcd = { d5 , d4 , d3 , d2 , d1 };
endmodule<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="二、ROM-IP核模块"><a href="#二、ROM-IP核模块" class="headerlink" title="二、ROM IP核模块"></a>二、ROM IP核模块</h3><p>本游戏的游戏界面为静态显示，为了给玩家带来更好的游戏体验，我们从网上搜寻和绘制处理了丰富的图片素材，通过c语言处理32位，生成相应的COE文件，创建了游戏开始界面、游戏盘、游戏结束界面、人物、房屋、事件卡等图片的ROM IP核。</p>
<p>具体如下图所示。</p>
<p><img src="https://i.loli.net/2020/03/20/x15vO9wcyhLJHMn.png" alt="image-20191229165250124"></p>
<p>其中，backboard、start、event图片均采取了最近邻差值的方式进行处理，可以在保存图像信息的情况下尽量减少ROM占用。而house与player图片则使用了PS工具进行处理，人物、房屋边缘以外的部分均为白色，并调整主体部分的色阶。当读取到0xffff时，转而读取gameborad的图像信息，以实现图片有效覆盖的设计。</p>
<p>、start图片均采取了最逼近差值的方式进行处理，可以在保障图像信息的情况下更好地完成显示。而house与player图片则使用了PS工具进行处理，人物、房屋边缘以外的部分均为白色，并调整主体部分的色阶。当读取到0xffff时，转而读取gameborad的图像信息，以实现图片有效覆盖的设计。</p>
<h3 id="三、随机数模块"><a href="#三、随机数模块" class="headerlink" title="三、随机数模块"></a>三、随机数模块</h3><p>这个部分前文已经介绍了，这里略过。</p>
<h3 id="四、VGA模块"><a href="#四、VGA模块" class="headerlink" title="四、VGA模块"></a>四、VGA模块</h3><p>使用的是学校提供的VGAdemo中的VGA模块，代码附在文末。</p>
<h3 id="五、PS-2模块"><a href="#五、PS-2模块" class="headerlink" title="五、PS/2模块"></a>五、PS/2模块</h3><p>使用的是学校提供的SWORD说明书PPT中的PS/2模块，代码附在文末。</p>
<h3 id="六、DispNumber模块"><a href="#六、DispNumber模块" class="headerlink" title="六、DispNumber模块"></a>六、DispNumber模块</h3><p>在数逻实验中我们曾经自己通过ISE画图的方式设计过并行数码管显示模块，但是我觉得我当时画图得到的模块不是很好用，于是将sch生成的vf文件改造了一下，重构了部分代码，把所有的使能改成了高有效。代码附在文末</p>
<h3 id="七、去抖动模块"><a href="#七、去抖动模块" class="headerlink" title="七、去抖动模块"></a>七、去抖动模块</h3><p>使用的是实验课上做的pbdebounce模块，用来给按钮输入去抖动，没什么好说的，大家都做过。</p>
<pre class="line-numbers language-verilog"><code class="language-verilog"><span class="token keyword">module</span> <span class="token function">pbdebounce</span><span class="token punctuation">(</span>
    <span class="token keyword">input</span> <span class="token keyword">wire</span> clk_1ms<span class="token punctuation">,</span>
    <span class="token keyword">input</span> <span class="token keyword">wire</span> button<span class="token punctuation">,</span>
    <span class="token keyword">output</span> <span class="token keyword">reg</span> pbreg
        <span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">reg</span> <span class="token punctuation">[</span><span class="token number">7</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span> pbshift<span class="token punctuation">;</span>
    <span class="token keyword">initial</span> <span class="token keyword">begin</span>
        pbshift <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">end</span>
    <span class="token important">always@</span><span class="token punctuation">(</span><span class="token keyword">posedge</span> clk_1ms<span class="token punctuation">)</span><span class="token keyword">begin</span>
    pbshift <span class="token operator">=</span> pbshift <span class="token operator">&lt;&lt;</span> <span class="token number">1</span><span class="token punctuation">;</span>
    pbshift<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">=</span>button<span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>pbshift<span class="token operator">==</span><span class="token number">8'b0</span><span class="token punctuation">)</span>
    pbreg<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>pbshift<span class="token operator">==</span><span class="token number">8'hff</span><span class="token punctuation">)</span>
     pbreg<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>
     <span class="token keyword">end</span>

 <span class="token keyword">endmodule</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="八、分频器模块"><a href="#八、分频器模块" class="headerlink" title="八、分频器模块"></a>八、分频器模块</h3><p>使用实验课上做的clkdiv模块，没什么好描述的，代码附在文末。</p>
<h3 id="九、串行数码管显示模块"><a href="#九、串行数码管显示模块" class="headerlink" title="九、串行数码管显示模块"></a>九、串行数码管显示模块</h3><p>这个模块的核心部分是并行转串行，需要一个移位寄存器，这个部分的代码我是使用的VGAdemo中的位移寄存器，译码工作则是使用的MC14495模块。代码附在文末</p>
<h1 id="Part6-仿真、资源分配与RTL"><a href="#Part6-仿真、资源分配与RTL" class="headerlink" title="Part6.仿真、资源分配与RTL"></a>Part6.仿真、资源分配与RTL</h1><h3 id="一、RTL、资源分配与引脚分配图"><a href="#一、RTL、资源分配与引脚分配图" class="headerlink" title="一、RTL、资源分配与引脚分配图"></a>一、RTL、资源分配与引脚分配图</h3><p>这次课程作业使用的板子是SWORD2.0，我利用的资源也是非常多的，包括arduino七段数码管、主板串行七段数码管、VGA、USB-HID等等，综合实现后的资源使用图如下：</p>
<p><img src="https://i.loli.net/2020/03/20/sL49kRAZv6Iy1Kx.png" alt="image-20191229174557967"></p>
<p>引脚分配图如下：</p>
<p><img src="https://i.loli.net/2020/03/20/uOib3KQtWqZCRGd.png" alt="image-20191229175054998"></p>
<p>Schematic图如下：</p>
<p><img src="https://i.loli.net/2020/03/20/UyS5g4bMkLWRwiC.png" alt="image-20191229175234475"></p>
<p>从上面这几张图我们可以看到，这次课程作业实际上使用的门级电路和板上资源是非常非常多的，我使用1467cells，总计8320nets，连输出输入口都有39个，实际上在期中开题报告中，我本来规划做出更多的功能，但未能完全实现主要还是受到了板子资源的制约和时间制约。</p>
<h3 id="二、TOP模块综合后时序仿真"><a href="#二、TOP模块综合后时序仿真" class="headerlink" title="二、TOP模块综合后时序仿真"></a>二、TOP模块综合后时序仿真</h3><p>####输入输出时序图</p>
<p><img src="https://i.loli.net/2020/03/20/VaPkFzGulJ7RwKS.png" alt="image-20191230134808335"></p>
<h4 id="游戏关键变量时序图：玩家金钱与GPA"><a href="#游戏关键变量时序图：玩家金钱与GPA" class="headerlink" title="游戏关键变量时序图：玩家金钱与GPA"></a>游戏关键变量时序图：玩家金钱与GPA</h4><p><img src="https://i.loli.net/2020/03/20/MdWhN42Zr9BHkGC.png" alt="image-20191230140254197"></p>
<h3 id="三、TOP模块实现后时序仿真"><a href="#三、TOP模块实现后时序仿真" class="headerlink" title="三、TOP模块实现后时序仿真"></a>三、TOP模块实现后时序仿真</h3><h4 id="输入输出时序图"><a href="#输入输出时序图" class="headerlink" title="输入输出时序图"></a>输入输出时序图</h4><p><img src="https://i.loli.net/2020/03/20/ypY72XSVUe6gmcF.png" alt="image-20191230120328942"></p>
<p><img src="https://i.loli.net/2020/03/20/HUO3rBhJNpS1wQv.png" alt="image-20191230120435765"></p>
<h4 id="游戏关键变量时序图：玩家金钱与GPA-1"><a href="#游戏关键变量时序图：玩家金钱与GPA-1" class="headerlink" title="游戏关键变量时序图：玩家金钱与GPA"></a>游戏关键变量时序图：玩家金钱与GPA</h4><p><img src="https://i.loli.net/2020/03/20/UWi1wd3z8b2g7fl.png" alt="image-20191230130254321"></p>
<h1 id="Part7-物理验证"><a href="#Part7-物理验证" class="headerlink" title="Part7.物理验证"></a>Part7.物理验证</h1><p>这次课程作业前期主要在Basys3上完成，后期资源不够后则改用Nexys4完成，最后再移植到SWORD2.0上。</p>
<p>最终的工程文件已经不能在Basys3上通过实现了（资源数不足）因此我们物理验证仅在Nexys4和SWORD2.0上开展，顺便也验证工程的可移植性。</p>
<p>以下综合、实现、生成比特流均在下述配置下进行，使用开发工具为Vivado 2019.1：</p>
<p><strong>CPU Name: Intel(R) Core(TM) i7-8650U CPU @ 1.90GHz</strong></p>
<table>
<thead>
<tr>
<th>Property</th>
<th>Value</th>
</tr>
</thead>
<tbody><tr>
<td>Base Frequency</td>
<td>2.11 GHz</td>
</tr>
<tr>
<td>Max Turbo Frequency</td>
<td>4.20 GHz</td>
</tr>
<tr>
<td>Cache</td>
<td>8 MB Intel® Smart Cache</td>
</tr>
<tr>
<td>Cores Number</td>
<td>4</td>
</tr>
<tr>
<td>Threads</td>
<td>8</td>
</tr>
<tr>
<td>TDP(TDP-up)</td>
<td>25W</td>
</tr>
</tbody></table>
<p><strong>RAM:   16GB LPDDR3 2133MHz with Two channel memory</strong></p>
<p><strong>SSD:     SAMSUNG MZVLB512HAJQ-000L7</strong></p>
<h3 id="一、Nexys4物理验证"><a href="#一、Nexys4物理验证" class="headerlink" title="一、Nexys4物理验证"></a>一、Nexys4物理验证</h3><p>由于金钱和GPA两个部分需要在去串行的七段数码管上显示，Nexys4不具备这个硬件，所以这个部分在Nexys4的物理验证中不会给出。我在代码中注释掉这个部分。</p>
<p>我们来记录一下时间：</p>
<table>
<thead>
<tr>
<th>Event</th>
<th>Time</th>
</tr>
</thead>
<tbody><tr>
<td>Synthesis（including ROM IP cores）</td>
<td>00:01:22</td>
</tr>
<tr>
<td>Implementation</td>
<td>00:01:48</td>
</tr>
<tr>
<td>Generate Bitstream</td>
<td>00:00:26</td>
</tr>
</tbody></table>
<p>连接板子进行验证：</p>
<p><img src="https://i.loli.net/2020/03/20/WYGmPqltaQjn97i.png" alt="image-20200320132824054"></p>
<p>从上图可以看出，我们的游戏界面很好的展现了（注：屏幕左上角白斑是屏幕自身有物理损坏，并非代码问题）</p>
<p>进入正式的游戏界面，我们可以看到：</p>
<p><img src="https://i.loli.net/2020/03/20/lXU5mtxygBRjoEz.png" alt="image-20191230154523963"></p>
<p>我们的游戏界面也是可以正确显示的，现在再让我们看一下并行七段数码管的显示效果：</p>
<p><img src="https://i.loli.net/2020/03/20/QtDEB7OVlbKqxRW.png" alt="image-20191230154611173"></p>
<p>C1代表轮到玩家1游戏，这说明我们正确的显示了游戏顺序。下面是事件的触发截图：</p>
<p><img src="https://i.loli.net/2020/03/20/qwZKMsUTL1yiteD.png" alt="image-20191230154727877"></p>
<p>此时，轮到了玩家2游戏：</p>
<p><img src="https://i.loli.net/2020/03/20/RVhDrHUApmzLc9Y.png" alt="image-20191230154829149"></p>
<p>可以看到显示数据也是完全正确的。</p>
<p>至此，我们简单的物理验证成功，满足了最初的设计需求。</p>
<h3 id="二、SWORD2-0物理验证"><a href="#二、SWORD2-0物理验证" class="headerlink" title="二、SWORD2.0物理验证"></a>二、SWORD2.0物理验证</h3><p>首先还是一样，我们先来记录一下时间：</p>
<table>
<thead>
<tr>
<th>Event</th>
<th>Time</th>
</tr>
</thead>
<tbody><tr>
<td>Synthesis（including ROM IP cores）</td>
<td>00:01:54</td>
</tr>
<tr>
<td>Implementation</td>
<td>00:02:28</td>
</tr>
<tr>
<td>Generate Bitstream</td>
<td>00:01:06</td>
</tr>
</tbody></table>
<p>因为本次课程设计的主要板子是SWORD2.0，所以我们会在这个板子上验证全部的功能实现。</p>
<p>首先是游戏开始画面的展示：</p>
<p><img src="https://i.loli.net/2020/03/20/BtDAKgbQh84ZIU5.png" alt="image-20200101155424592"></p>
<p>进入游戏：</p>
<p><img src="https://i.loli.net/2020/03/20/epTRXhsyH9Z5gfW.png" alt="image-20200101155506377"></p>
<p>数码管显示：</p>
<p><img src="https://i.loli.net/2020/03/20/Rxkcr4Le3yNalvf.png" alt="image-20200101155528717"></p>
<p>触发事件：</p>
<p><img src="https://i.loli.net/2020/03/20/xYmh7XvNFZ3SA1u.png" alt="image-20200101155547032"></p>
<p>购买土地：</p>
<p><img src="https://i.loli.net/2020/03/20/iAgLG1EeTSaJvrB.png" alt="image-20200101155619122"></p>
<p>上图紫色和白色圆点分别代表玩家1、2持有土地</p>
<p>从上述内容可以看出，我们的游戏在SWORD2.0上也能很好的运行，这完成了我们的课程设计预期目的，同时也验证了我们游戏具有良好的可移植性，在不同资源数的板子上都可以正常运行。</p>
<h1 id="Part8-心得体会"><a href="#Part8-心得体会" class="headerlink" title="Part8.心得体会"></a>Part8.心得体会</h1><p>数逻的课程设计是我在大学这段时间碰到的最困难的课程设计，其困难的主要原因在于我对Verilog语法和对开发环境的不熟悉。硬件开发与以往我们使用高级语言进行软件开发的感觉完全不同，因为他既需要很好的逻辑思维，又需要开发者直接去与底层接触，思考每个模块在物理实现上的运作方式。这个作业前前后后做了两周多的时间，并且紧紧连着考试周，所以我做的也非常紧张。</p>
<p>如果这个作业不是在考试周附近完成的，我可能会做的更好，我觉得目前看来制约我作业完成程度的主要原因还是时间和其他学科的课业压力。</p>
<p>在本次实验过程中，我参考了很多先人前辈的作品，也翻阅了很多文档。下面是我自己的一点心得：</p>
<h3 id="对我有帮助的参考文档"><a href="#对我有帮助的参考文档" class="headerlink" title="对我有帮助的参考文档"></a>对我有帮助的参考文档</h3><h4 id="1-Digilent中国"><a href="#1-Digilent中国" class="headerlink" title="1.Digilent中国"></a>1.Digilent中国</h4><p>这是Digilent的中国官网，里面从开发板购买、入门，到Verilog编写、仿真、物理实现都有很详细的教程，而且有自己的开源社区，有无数FPGA爱好者在这里讨论，作为一个课程设计的编写者，这个网站的资源对我是非常非常有价值的。</p>
<p>我自己的板子是Basys3，Basys3的教程也是最为丰富的之一。</p>
<p>这些项目中，有很多精品，对课程设计会起到极大的帮助，我最开始设计课程作业的时候就是先阅读了下面这个贪吃蛇小游戏的代码，从代码中学习Verilog的编写方法和流程，逐步去学会自己设计。</p>
<h4 id="2-ZJUArch"><a href="#2-ZJUArch" class="headerlink" title="2.ZJUArch"></a>2.ZJUArch</h4><p>在github上有浙大的一个仓库，名为ZJUArch，里面有着很丰富的Verilog语法学习资料，适合初学者入门参考。<img src="https://i.loli.net/2020/03/20/SJGDIvB8x41jsrz.png" alt="image-20191229114046330"></p>
<h4 id="3-FPGA4FUN"><a href="#3-FPGA4FUN" class="headerlink" title="3.FPGA4FUN"></a>3.FPGA4FUN</h4><p><a href="https://www.fpga4fun.com/" target="_blank" rel="noopener">https://www.fpga4fun.com/</a> 是一个神奇的网站，里面专门有很多神仙教程教新人如何使用FPGA做一些有趣的东西，课程设计的VGA和PS2模块在这里讲的非常清楚。</p>
<p><img src="https://i.loli.net/2020/03/20/R6haZfvlqtQFDA2.png" alt="image-20191229114236200"></p>
<h1 id="附录：各模块代码合集"><a href="#附录：各模块代码合集" class="headerlink" title="附录：各模块代码合集"></a>附录：各模块代码合集</h1><h3 id="一、TOP模块（附有注释）"><a href="#一、TOP模块（附有注释）" class="headerlink" title="一、TOP模块（附有注释）"></a>一、TOP模块（附有注释）</h3><pre class="line-numbers language-verilog"><code class="language-verilog"><span class="token constant">`timescale</span> <span class="token number">1</span>ns <span class="token operator">/</span> <span class="token number">1</span>ps
<span class="token comment" spellcheck="true">//////////////////////////////////////////////////////////////////////////////////</span>
<span class="token comment" spellcheck="true">// Company: </span>
<span class="token comment" spellcheck="true">// Engineer: </span>
<span class="token comment" spellcheck="true">// </span>
<span class="token comment" spellcheck="true">// Create Date: 12/06/2019 08:38:02 PM</span>
<span class="token comment" spellcheck="true">// Design Name: </span>
<span class="token comment" spellcheck="true">// Module Name: Top</span>
<span class="token comment" spellcheck="true">// Project Name: </span>
<span class="token comment" spellcheck="true">// Target Devices: </span>
<span class="token comment" spellcheck="true">// Tool Versions: </span>
<span class="token comment" spellcheck="true">// Description: </span>
<span class="token comment" spellcheck="true">// </span>
<span class="token comment" spellcheck="true">// Dependencies: </span>
<span class="token comment" spellcheck="true">// </span>
<span class="token comment" spellcheck="true">// Revision:</span>
<span class="token comment" spellcheck="true">// Revision 0.01 - File Created</span>
<span class="token comment" spellcheck="true">// Additional Comments:</span>
<span class="token comment" spellcheck="true">// </span>
<span class="token comment" spellcheck="true">//////////////////////////////////////////////////////////////////////////////////</span>


<span class="token keyword">module</span> <span class="token function">Top</span><span class="token punctuation">(</span>
    <span class="token keyword">input</span> clk<span class="token punctuation">,</span>
    <span class="token keyword">input</span> reset<span class="token punctuation">,</span> <span class="token comment" spellcheck="true">//restart the game</span>
    <span class="token keyword">input</span> sw_input<span class="token punctuation">,</span> <span class="token comment" spellcheck="true">//swith the input-style : PS2/button</span>
    <span class="token keyword">input</span> dice_in<span class="token punctuation">,</span> <span class="token comment" spellcheck="true">//roll the dice</span>
    <span class="token keyword">input</span> yes_in<span class="token punctuation">,</span> <span class="token comment" spellcheck="true">//1 means choosing yes</span>
    <span class="token keyword">input</span> no_in<span class="token punctuation">,</span> <span class="token comment" spellcheck="true">//1 means choosing no</span>
    <span class="token keyword">input</span> ps2_clk<span class="token punctuation">,</span>
    <span class="token keyword">input</span> ps2_data<span class="token punctuation">,</span>
    <span class="token comment" spellcheck="true">//SWORD</span>
     <span class="token keyword">output</span> S_DT<span class="token punctuation">,</span>
     <span class="token keyword">output</span> S_CLK<span class="token punctuation">,</span>
     <span class="token keyword">output</span> S_CLR<span class="token punctuation">,</span>
     <span class="token keyword">output</span> S_EN<span class="token punctuation">,</span>
    <span class="token comment" spellcheck="true">//</span>
    <span class="token keyword">output</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span>ArduinoAN<span class="token punctuation">,</span>
    <span class="token keyword">output</span> <span class="token punctuation">[</span><span class="token number">7</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span>ArduinoSegment<span class="token punctuation">,</span>
    <span class="token keyword">output</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span> r<span class="token punctuation">,</span>
    <span class="token keyword">output</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span> g<span class="token punctuation">,</span>
    <span class="token keyword">output</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span> b<span class="token punctuation">,</span>
    <span class="token keyword">output</span> hs<span class="token punctuation">,</span>
    <span class="token keyword">output</span> vs<span class="token punctuation">,</span>
    <span class="token keyword">output</span> keypad
    <span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">//------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="token comment" spellcheck="true">//Keypad</span>
<span class="token keyword">assign</span> keypad <span class="token operator">=</span> <span class="token number">1'b0</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">//VGA out</span>
<span class="token keyword">wire</span> VGA_rdn<span class="token punctuation">;</span>
<span class="token keyword">wire</span> <span class="token punctuation">[</span><span class="token number">16</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span>x_pos<span class="token punctuation">;</span>
<span class="token keyword">wire</span> <span class="token punctuation">[</span><span class="token number">16</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span>y_pos<span class="token punctuation">;</span>
<span class="token keyword">reg</span> <span class="token punctuation">[</span><span class="token number">11</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span>display_data<span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">//input </span>
<span class="token keyword">reg</span> yes<span class="token punctuation">;</span>
<span class="token keyword">reg</span> no<span class="token punctuation">;</span>
<span class="token keyword">reg</span> dice<span class="token punctuation">;</span> 
<span class="token comment" spellcheck="true">//PS2 out</span>
<span class="token keyword">wire</span> <span class="token punctuation">[</span><span class="token number">9</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span>ps2_data_cur<span class="token punctuation">;</span>
<span class="token keyword">wire</span> ps2_ready<span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">//rom addr</span>
<span class="token keyword">reg</span> <span class="token punctuation">[</span><span class="token number">16</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span>background_data_addr<span class="token punctuation">;</span>
<span class="token keyword">wire</span> <span class="token punctuation">[</span><span class="token number">11</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span>background_data<span class="token punctuation">;</span>

<span class="token keyword">reg</span> <span class="token punctuation">[</span><span class="token number">11</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span>player1_data_addr<span class="token punctuation">;</span>
<span class="token keyword">wire</span> <span class="token punctuation">[</span><span class="token number">11</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span>player1_data<span class="token punctuation">;</span>

<span class="token keyword">reg</span> <span class="token punctuation">[</span><span class="token number">11</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span>player2_data_addr<span class="token punctuation">;</span>
<span class="token keyword">wire</span> <span class="token punctuation">[</span><span class="token number">11</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span>player2_data<span class="token punctuation">;</span>

<span class="token keyword">reg</span> <span class="token punctuation">[</span><span class="token number">11</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span>house_data_addr<span class="token punctuation">;</span>
<span class="token keyword">wire</span> <span class="token punctuation">[</span><span class="token number">11</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span>house_data<span class="token punctuation">;</span>

<span class="token keyword">reg</span> <span class="token punctuation">[</span><span class="token number">16</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span>start_data_addr<span class="token punctuation">;</span>
<span class="token keyword">wire</span> <span class="token punctuation">[</span><span class="token number">11</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span>start_data<span class="token punctuation">;</span>

<span class="token keyword">reg</span> <span class="token punctuation">[</span><span class="token number">14</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span>game_over_data_addr<span class="token punctuation">;</span>
<span class="token keyword">wire</span> <span class="token punctuation">[</span><span class="token number">11</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span>game_over_data<span class="token punctuation">;</span>

<span class="token keyword">reg</span> <span class="token punctuation">[</span><span class="token number">13</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span>event1_data_addr<span class="token punctuation">;</span>
<span class="token keyword">wire</span> <span class="token punctuation">[</span><span class="token number">11</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span>event1_data<span class="token punctuation">;</span>

<span class="token keyword">reg</span> <span class="token punctuation">[</span><span class="token number">13</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span>event2_data_addr<span class="token punctuation">;</span>
<span class="token keyword">wire</span> <span class="token punctuation">[</span><span class="token number">11</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span>event2_data<span class="token punctuation">;</span>

<span class="token keyword">reg</span> <span class="token punctuation">[</span><span class="token number">13</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span>event3_data_addr<span class="token punctuation">;</span>
<span class="token keyword">wire</span> <span class="token punctuation">[</span><span class="token number">11</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span>event3_data<span class="token punctuation">;</span>

<span class="token keyword">reg</span> <span class="token punctuation">[</span><span class="token number">13</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span>event4_data_addr<span class="token punctuation">;</span>
<span class="token keyword">wire</span> <span class="token punctuation">[</span><span class="token number">11</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span>event4_data<span class="token punctuation">;</span>

<span class="token keyword">reg</span> <span class="token punctuation">[</span><span class="token number">13</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span>event5_data_addr<span class="token punctuation">;</span>
<span class="token keyword">wire</span> <span class="token punctuation">[</span><span class="token number">11</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span>event5_data<span class="token punctuation">;</span>

<span class="token keyword">reg</span> <span class="token punctuation">[</span><span class="token number">13</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span>event6_data_addr<span class="token punctuation">;</span>
<span class="token keyword">wire</span> <span class="token punctuation">[</span><span class="token number">11</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span>event6_data<span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">//disp number</span>
<span class="token keyword">reg</span> <span class="token punctuation">[</span><span class="token number">15</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span>numberInArduino<span class="token punctuation">;</span>
<span class="token keyword">wire</span> <span class="token punctuation">[</span><span class="token number">31</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span>numberInSWORD<span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">//AntiJitter</span>
<span class="token keyword">wire</span> <span class="token punctuation">[</span><span class="token number">31</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span>clk_div<span class="token punctuation">;</span>
<span class="token keyword">wire</span> dice_AJ<span class="token punctuation">;</span>
<span class="token keyword">wire</span> yes_AJ<span class="token punctuation">;</span>
<span class="token keyword">wire</span> no_AJ<span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">//rand</span>
<span class="token keyword">wire</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span>rand_num<span class="token punctuation">;</span>
Random <span class="token function">FuckRandom</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token function">clk</span><span class="token punctuation">(</span>clk_div<span class="token punctuation">[</span><span class="token number">21</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span>rand_num<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
clkdiv <span class="token function">clk_d</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token function">clk</span><span class="token punctuation">(</span>clk<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token function">rst</span><span class="token punctuation">(</span>reset<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token function">clkdiv</span><span class="token punctuation">(</span>clk_div<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
pbdebounce <span class="token function">ccc</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token function">clk_1ms</span><span class="token punctuation">(</span>clk_div<span class="token punctuation">[</span><span class="token number">16</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token function">button</span><span class="token punctuation">(</span><span class="token operator">~</span>dice_in<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token function">pbreg</span><span class="token punctuation">(</span>dice_AJ<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
pbdebounce <span class="token function">ddd</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token function">clk_1ms</span><span class="token punctuation">(</span>clk_div<span class="token punctuation">[</span><span class="token number">16</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token function">button</span><span class="token punctuation">(</span><span class="token operator">~</span>yes_in<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token function">pbreg</span><span class="token punctuation">(</span>yes_AJ<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
pbdebounce <span class="token function">eee</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token function">clk_1ms</span><span class="token punctuation">(</span>clk_div<span class="token punctuation">[</span><span class="token number">16</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token function">button</span><span class="token punctuation">(</span><span class="token operator">~</span>no_in<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token function">pbreg</span><span class="token punctuation">(</span>no_AJ<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">//debug</span>
<span class="token comment" spellcheck="true">//assign reset = rst;</span>
<span class="token comment" spellcheck="true">//assign sw_input_AJ = sw_input;</span>
<span class="token comment" spellcheck="true">//assign dice_AJ = dice;</span>
<span class="token comment" spellcheck="true">//assign no_AJ = no;</span>
<span class="token comment" spellcheck="true">//assign yes_AJ = yes;</span>
<span class="token comment" spellcheck="true">// reg S_DT;</span>
<span class="token comment" spellcheck="true">// reg  S_CLK;</span>
<span class="token comment" spellcheck="true">// reg S_CLR;</span>
<span class="token comment" spellcheck="true">// reg S_EN;</span>



<span class="token comment" spellcheck="true">//ROM</span>
Start <span class="token function">start_rom</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token function">ena</span><span class="token punctuation">(</span><span class="token operator">~</span>reset<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token function">addra</span><span class="token punctuation">(</span>start_data_addr<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token function">clka</span><span class="token punctuation">(</span>clk_div<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token function">douta</span><span class="token punctuation">(</span>start_data<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Game_over <span class="token function">game_over_rom</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token function">ena</span><span class="token punctuation">(</span><span class="token operator">~</span>reset<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token function">addra</span><span class="token punctuation">(</span>game_over_data_addr<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token function">clka</span><span class="token punctuation">(</span>clk_div<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token function">douta</span><span class="token punctuation">(</span>game_over_data<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
background <span class="token function">Background_rom</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token function">ena</span><span class="token punctuation">(</span><span class="token operator">~</span>reset<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token function">addra</span><span class="token punctuation">(</span>background_data_addr<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token function">clka</span><span class="token punctuation">(</span>clk_div<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token function">douta</span><span class="token punctuation">(</span>background_data<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//ROM of background img</span>
House_rom <span class="token function">House_rom</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token function">ena</span><span class="token punctuation">(</span><span class="token operator">~</span>reset<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token function">addra</span><span class="token punctuation">(</span>house_data_addr<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token function">clka</span><span class="token punctuation">(</span>clk_div<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token function">douta</span><span class="token punctuation">(</span>house_data<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//ROM of house img</span>
Player1_rom <span class="token function">Player1_rom</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token function">ena</span><span class="token punctuation">(</span><span class="token operator">~</span>reset<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token function">addra</span><span class="token punctuation">(</span>player1_data_addr<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token function">clka</span><span class="token punctuation">(</span>clk_div<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token function">douta</span><span class="token punctuation">(</span>player1_data<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//ROM of house img</span>
Player2_rom <span class="token function">Player2_rom</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token function">ena</span><span class="token punctuation">(</span><span class="token operator">~</span>reset<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token function">addra</span><span class="token punctuation">(</span>player2_data_addr<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token function">clka</span><span class="token punctuation">(</span>clk_div<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token function">douta</span><span class="token punctuation">(</span>player2_data<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//ROM of house img</span>
event1 <span class="token function">event1_rom</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token function">ena</span><span class="token punctuation">(</span><span class="token operator">~</span>reset<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token function">addra</span><span class="token punctuation">(</span>event1_data_addr<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token function">clka</span><span class="token punctuation">(</span>clk_div<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token function">douta</span><span class="token punctuation">(</span>event1_data<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
event2 <span class="token function">event2_rom</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token function">ena</span><span class="token punctuation">(</span><span class="token operator">~</span>reset<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token function">addra</span><span class="token punctuation">(</span>event2_data_addr<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token function">clka</span><span class="token punctuation">(</span>clk_div<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token function">douta</span><span class="token punctuation">(</span>event2_data<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
event3 <span class="token function">event3_rom</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token function">ena</span><span class="token punctuation">(</span><span class="token operator">~</span>reset<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token function">addra</span><span class="token punctuation">(</span>event3_data_addr<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token function">clka</span><span class="token punctuation">(</span>clk_div<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token function">douta</span><span class="token punctuation">(</span>event3_data<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
event4 <span class="token function">event4_rom</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token function">ena</span><span class="token punctuation">(</span><span class="token operator">~</span>reset<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token function">addra</span><span class="token punctuation">(</span>event4_data_addr<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token function">clka</span><span class="token punctuation">(</span>clk_div<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token function">douta</span><span class="token punctuation">(</span>event4_data<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
event5 <span class="token function">event5_rom</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token function">ena</span><span class="token punctuation">(</span><span class="token operator">~</span>reset<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token function">addra</span><span class="token punctuation">(</span>event5_data_addr<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token function">clka</span><span class="token punctuation">(</span>clk_div<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token function">douta</span><span class="token punctuation">(</span>event5_data<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
event6 <span class="token function">event6_rom</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token function">ena</span><span class="token punctuation">(</span><span class="token operator">~</span>reset<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token function">addra</span><span class="token punctuation">(</span>event6_data_addr<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token function">clka</span><span class="token punctuation">(</span>clk_div<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token function">douta</span><span class="token punctuation">(</span>event6_data<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">//input and output </span>
vgac <span class="token function">Display</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token function">d_in</span><span class="token punctuation">(</span>display_data<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token function">vga_clk</span><span class="token punctuation">(</span>clk_div<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token function">clrn</span><span class="token punctuation">(</span><span class="token operator">~</span>reset<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token function">row_addr</span><span class="token punctuation">(</span>y_pos<span class="token punctuation">[</span><span class="token number">8</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token function">col_addr</span><span class="token punctuation">(</span>x_pos<span class="token punctuation">[</span><span class="token number">9</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token function">r</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token function">g</span><span class="token punctuation">(</span>g<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token function">b</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token function">rdn</span><span class="token punctuation">(</span>VGA_rdn<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token function">hs</span><span class="token punctuation">(</span>hs<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token function">vs</span><span class="token punctuation">(</span>vs<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// display module</span>
ps2_keyboard <span class="token function">KBD</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token function">clk</span><span class="token punctuation">(</span>clk<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token function">rst</span><span class="token punctuation">(</span>reset<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token function">ps2_clk</span><span class="token punctuation">(</span>ps2_clk<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token function">ps2_data</span><span class="token punctuation">(</span>ps2_data<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token function">data_out</span><span class="token punctuation">(</span>ps2_data_cur<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token function">ready</span><span class="token punctuation">(</span>ps2_ready<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//ps2 keyboard module</span>

DispNumber <span class="token function">DispNumberInArduino</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token function">clk</span><span class="token punctuation">(</span>clk<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token function">HEXS</span><span class="token punctuation">(</span>numberInArduino<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token function">LES</span><span class="token punctuation">(</span><span class="token number">4'b1101</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token function">points</span><span class="token punctuation">(</span><span class="token number">4'b0000</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token function">RST</span><span class="token punctuation">(</span>reset<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token function">AN</span><span class="token punctuation">(</span>ArduinoAN<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token function">Segment</span><span class="token punctuation">(</span>ArduinoSegment<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
SEG_DRV <span class="token function">DispNumberInSWORD</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token function">clk</span><span class="token punctuation">(</span>clk<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token function">num</span><span class="token punctuation">(</span>numberInSWORD<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token function">ena</span><span class="token punctuation">(</span><span class="token operator">~</span>reset<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token function">point</span><span class="token punctuation">(</span><span class="token number">8'b1000_0000</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token function">S_DT</span><span class="token punctuation">(</span>S_DT<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token function">S_CLK</span><span class="token punctuation">(</span>S_CLK<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token function">S_CLR</span><span class="token punctuation">(</span>S_CLR<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token function">S_EN</span><span class="token punctuation">(</span>S_EN<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">//------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>

<span class="token comment" spellcheck="true">//GAME Properties</span>
<span class="token keyword">reg</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span>global_state<span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">//the global state: 0 represents start-state; 1 represents game-going; 2 represents game-over.</span>
<span class="token keyword">reg</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span>state<span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">/*the state of game-going: 0 represents stand-by state for checking current player properties to tell if the game is over, to decide the next state;
                           1 represents that it's player1's turn to roll the dice;
                           2 represents that it's player2's turn to roll the dice;
                           3 represents executing red-square events;
                           4 represents random events;
                           5 represents buying empty land or build houses on your land;
                           6 represents staying on another player's land;
                           7 represents game over.

*/</span>
<span class="token keyword">reg</span> turn<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//1 represents it's player1's turn while 0 reprenstes palyer2</span>
<span class="token keyword">reg</span> <span class="token punctuation">[</span><span class="token number">19</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span>has_house<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//to tell if there are any houses on 20 lands: 0 means there are no houses while 1 means there is</span>
<span class="token keyword">reg</span> <span class="token punctuation">[</span><span class="token number">39</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span>land_owner<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//to store the land onwer information of 20 lands: 00 means the land doesn't belong to anyone; 01 means the land belongs to player1 while 10 means the land belongs to player2</span>
<span class="token keyword">reg</span> <span class="token punctuation">[</span><span class="token number">23</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span>move_delay<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//the time interval of showing the movement steps of the players</span>
<span class="token keyword">reg</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span>step<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//to store the steps one player should go after rolling the dice.</span>
<span class="token keyword">reg</span> <span class="token punctuation">[</span><span class="token number">23</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span>rand_delay<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//the time interval of showing the rolling numbers of the dice</span>
<span class="token keyword">reg</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span>randing<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//the dice number shown each time</span>
<span class="token keyword">reg</span> <span class="token punctuation">[</span><span class="token number">23</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span>gpa_delay<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//the time interval of showing the random gpa after one player stay on the exam square</span>
<span class="token keyword">reg</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span>gpa_rand<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//the gpa of the player gets after staying ont the exam square</span>
<span class="token keyword">reg</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span>show_event<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//the card of 6 random events</span>

<span class="token comment" spellcheck="true">//Player Properties</span>
<span class="token keyword">reg</span> <span class="token punctuation">[</span><span class="token number">19</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span>p1_money<span class="token punctuation">;</span>
<span class="token keyword">reg</span> <span class="token punctuation">[</span><span class="token number">19</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span>p2_money<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//in the range of 0-88888</span>
<span class="token keyword">wire</span> <span class="token punctuation">[</span><span class="token number">19</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span>p1_money_bcd<span class="token punctuation">;</span>
<span class="token keyword">wire</span> <span class="token punctuation">[</span><span class="token number">19</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span>p2_money_bcd<span class="token punctuation">;</span>
<span class="token keyword">reg</span> <span class="token punctuation">[</span><span class="token number">7</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span>p1_gpa<span class="token punctuation">;</span> 
<span class="token keyword">reg</span> <span class="token punctuation">[</span><span class="token number">7</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span>p2_gpa<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//in the range of 0-50, 50 represents gpa 5.0</span>
<span class="token keyword">wire</span> <span class="token punctuation">[</span><span class="token number">7</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span>p1_gpa_bcd<span class="token punctuation">;</span>
<span class="token keyword">wire</span> <span class="token punctuation">[</span><span class="token number">7</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span>p2_gpa_bcd<span class="token punctuation">;</span>
<span class="token keyword">reg</span> <span class="token punctuation">[</span><span class="token number">19</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span>p1_salary<span class="token punctuation">;</span>
<span class="token keyword">reg</span> <span class="token punctuation">[</span><span class="token number">19</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span>p2_salary<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//salary means the monthly living expenses</span>
<span class="token keyword">reg</span> <span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span>p1_location<span class="token punctuation">;</span>
<span class="token keyword">reg</span> <span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span>p2_location<span class="token punctuation">;</span>
<span class="token keyword">reg</span> p1_sleep<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//the sleep state of player1: if it's 1, player1 will skip his next turn.</span>
<span class="token keyword">reg</span> p2_sleep<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//the sleep state of player1: if it's 1, player2 will skip his next turn.</span>

<span class="token comment" spellcheck="true">//initialization</span>
<span class="token keyword">initial</span> <span class="token keyword">begin</span>
    yes <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    no <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    dice <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    global_state <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    state <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    turn <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">;</span> 
    has_house <span class="token operator">&lt;=</span> <span class="token number">20'b0</span><span class="token punctuation">;</span>
    land_owner <span class="token operator">&lt;=</span> <span class="token number">40'b0</span><span class="token punctuation">;</span>

    move_delay <span class="token operator">&lt;=</span> <span class="token number">24'b0</span><span class="token punctuation">;</span>
    step <span class="token operator">&lt;=</span> <span class="token number">4'b1111</span><span class="token punctuation">;</span>


    rand_delay <span class="token operator">&lt;=</span> <span class="token number">24'b0</span><span class="token punctuation">;</span>
    randing <span class="token operator">&lt;=</span> <span class="token number">4'b0</span><span class="token punctuation">;</span>

    gpa_delay <span class="token operator">=</span><span class="token number">24'b0</span><span class="token punctuation">;</span>
    gpa_rand <span class="token operator">&lt;=</span> <span class="token number">4'b1111</span><span class="token punctuation">;</span>

    show_event <span class="token operator">&lt;=</span> <span class="token number">4'b1111</span><span class="token punctuation">;</span>

    p1_money <span class="token operator">&lt;=</span> <span class="token number">20'd5000</span><span class="token punctuation">;</span>
    p2_money <span class="token operator">&lt;=</span> <span class="token number">20'd5000</span><span class="token punctuation">;</span>
    p1_gpa <span class="token operator">&lt;=</span> <span class="token number">8'd36</span><span class="token punctuation">;</span>
    p2_gpa <span class="token operator">&lt;=</span> <span class="token number">8'd36</span><span class="token punctuation">;</span>
    p1_salary <span class="token operator">&lt;=</span> <span class="token number">20'd2000</span><span class="token punctuation">;</span>
    p2_salary <span class="token operator">&lt;=</span> <span class="token number">20'd2000</span><span class="token punctuation">;</span>
    <span class="token comment" spellcheck="true">//Every player has 3.6gpa, 5000 money and 2000 salary at the beginning of the game.</span>

    p1_location <span class="token operator">&lt;=</span> <span class="token number">5'b0</span><span class="token punctuation">;</span>
    p2_location <span class="token operator">&lt;=</span> <span class="token number">5'b0</span><span class="token punctuation">;</span>
    p1_sleep <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    p2_sleep <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token keyword">end</span>


<span class="token comment" spellcheck="true">//GAME</span>
<span class="token important">always@</span><span class="token punctuation">(</span><span class="token keyword">posedge</span> clk <span class="token keyword">or</span> <span class="token keyword">posedge</span> reset<span class="token punctuation">)</span><span class="token keyword">begin</span>

        <span class="token comment" spellcheck="true">//if reset is 1, then initialize the game again and set the global_state and state to 0</span>
        <span class="token function">if</span><span class="token punctuation">(</span>reset <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token keyword">begin</span> 
            global_state <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">;</span>
            state <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">;</span>
            turn <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">;</span>
            has_house <span class="token operator">&lt;=</span> <span class="token number">20'b0</span><span class="token punctuation">;</span>
            land_owner <span class="token operator">&lt;=</span> <span class="token number">40'b0</span><span class="token punctuation">;</span>

            move_delay <span class="token operator">&lt;=</span> <span class="token number">24'b0</span><span class="token punctuation">;</span>
            step <span class="token operator">&lt;=</span> <span class="token number">4'b1111</span><span class="token punctuation">;</span>

            rand_delay <span class="token operator">&lt;=</span> <span class="token number">24'b0</span><span class="token punctuation">;</span>
            randing <span class="token operator">&lt;=</span> <span class="token number">4'b0</span><span class="token punctuation">;</span>

            gpa_delay <span class="token operator">&lt;=</span> <span class="token number">24'b0</span><span class="token punctuation">;</span>
            gpa_rand <span class="token operator">&lt;=</span> <span class="token number">4'b1111</span><span class="token punctuation">;</span>

            show_event <span class="token operator">&lt;=</span> <span class="token number">4'b1111</span><span class="token punctuation">;</span>

            p1_money <span class="token operator">&lt;=</span> <span class="token number">20'd5000</span><span class="token punctuation">;</span>
            p2_money <span class="token operator">&lt;=</span> <span class="token number">20'd5000</span><span class="token punctuation">;</span>
            p1_gpa <span class="token operator">&lt;=</span> <span class="token number">8'd36</span><span class="token punctuation">;</span>
            p2_gpa <span class="token operator">&lt;=</span> <span class="token number">8'd36</span><span class="token punctuation">;</span>
            p1_salary <span class="token operator">&lt;=</span> <span class="token number">20'd2000</span><span class="token punctuation">;</span>
            p2_salary <span class="token operator">&lt;=</span> <span class="token number">20'd2000</span><span class="token punctuation">;</span>
            p1_location <span class="token operator">&lt;=</span> <span class="token number">5'b0</span><span class="token punctuation">;</span>
            p2_location <span class="token operator">&lt;=</span> <span class="token number">5'b0</span><span class="token punctuation">;</span>
            p1_sleep <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">;</span>
            p2_sleep <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">;</span>

        <span class="token comment" spellcheck="true">//or else begin the game</span>
        <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token keyword">begin</span> 

            <span class="token comment" spellcheck="true">//global_state = 0, show the start picture and you need to press "yes" button to begin the game</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>global_state <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">begin</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>yes <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">begin</span>
                    global_state <span class="token operator">&lt;=</span> <span class="token number">1</span><span class="token punctuation">;</span>
                <span class="token keyword">end</span>

            <span class="token comment" spellcheck="true">//global_state = 2, show the game over picture, if you want to start a new game, just press the "reset" button</span>
            <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token function">if</span><span class="token punctuation">(</span>global_state <span class="token operator">==</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token keyword">begin</span>
                global_state <span class="token operator">&lt;=</span> <span class="token number">2</span><span class="token punctuation">;</span>

            <span class="token comment" spellcheck="true">//global_state = 1 which represents the game-going state, you can enjoy the game</span>
            <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token keyword">begin</span>
                    <span class="token function">case</span><span class="token punctuation">(</span>state<span class="token punctuation">)</span>

                    <span class="token comment" spellcheck="true">//state = 0, the stand-by state</span>
                    <span class="token number">3'b000</span><span class="token punctuation">:</span><span class="token keyword">begin</span>
                            <span class="token comment" spellcheck="true">//we control all the data in the legal range</span>
                            <span class="token keyword">if</span> <span class="token punctuation">(</span>p1_gpa <span class="token operator">></span> <span class="token number">8'd50</span><span class="token punctuation">)</span> <span class="token keyword">begin</span>
                                    p1_gpa <span class="token operator">&lt;=</span> <span class="token number">8'd50</span><span class="token punctuation">;</span>
                            <span class="token keyword">end</span> 
                            <span class="token keyword">if</span> <span class="token punctuation">(</span>p2_gpa <span class="token operator">></span> <span class="token number">8'd50</span><span class="token punctuation">)</span> <span class="token keyword">begin</span>
                                    p2_gpa <span class="token operator">&lt;=</span> <span class="token number">8'd50</span><span class="token punctuation">;</span>
                            <span class="token keyword">end</span> 
                            <span class="token keyword">if</span> <span class="token punctuation">(</span>p1_money <span class="token operator">></span> <span class="token number">20'd88888</span><span class="token punctuation">)</span> <span class="token keyword">begin</span>
                                    p1_money <span class="token operator">&lt;=</span> <span class="token number">20'd88888</span><span class="token punctuation">;</span>
                            <span class="token keyword">end</span>
                            <span class="token keyword">if</span> <span class="token punctuation">(</span>p2_money <span class="token operator">></span> <span class="token number">20'd88888</span><span class="token punctuation">)</span> <span class="token keyword">begin</span>
                                    p2_money <span class="token operator">&lt;=</span> <span class="token number">20'd88888</span><span class="token punctuation">;</span>
                            <span class="token keyword">end</span>     

                            <span class="token comment" spellcheck="true">//if one's gpa is lower than 1.5 or money lower than 0, then game over, and change the state to 7</span>
                            <span class="token keyword">if</span> <span class="token punctuation">(</span>p1_gpa <span class="token operator">&lt;</span> <span class="token number">8'd15</span> <span class="token operator">||</span> p2_gpa <span class="token operator">&lt;</span> <span class="token number">8'd15</span> <span class="token operator">||</span> p1_money <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token operator">||</span> p2_money <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token operator">||</span>p1_money <span class="token operator">==</span> <span class="token number">0</span> <span class="token operator">||</span> p2_money <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">begin</span>
                                    state <span class="token operator">&lt;=</span> <span class="token number">3'b111</span><span class="token punctuation">;</span>
                            <span class="token keyword">end</span>

                            <span class="token comment" spellcheck="true">//the current player roll the dice to change the state</span>
                            <span class="token function">if</span><span class="token punctuation">(</span>dice <span class="token operator">==</span> <span class="token number">1'b1</span><span class="token punctuation">)</span><span class="token keyword">begin</span>
                                    state <span class="token operator">&lt;=</span> <span class="token punctuation">(</span>turn <span class="token operator">==</span> <span class="token number">1'b0</span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token number">3'b001</span> <span class="token punctuation">:</span> <span class="token number">3'b010</span><span class="token punctuation">;</span>
                            <span class="token keyword">end</span>
                        <span class="token keyword">end</span>

                    <span class="token comment" spellcheck="true">//state = 1, player1 moves</span>
                    <span class="token number">3'b001</span><span class="token punctuation">:</span><span class="token keyword">begin</span>

                            <span class="token comment" spellcheck="true">//calculate the time inteval</span>
                            <span class="token function">if</span><span class="token punctuation">(</span>step <span class="token operator">==</span> <span class="token number">4'b1111</span><span class="token punctuation">)</span><span class="token keyword">begin</span>
                                    step <span class="token operator">&lt;=</span> rand_num<span class="token punctuation">;</span>
                                    rand_delay <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">;</span>
                                    randing <span class="token operator">&lt;=</span> <span class="token number">4'b1111</span><span class="token punctuation">;</span>
                            <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token function">if</span><span class="token punctuation">(</span> randing <span class="token operator">!=</span> <span class="token number">0</span> <span class="token punctuation">)</span><span class="token keyword">begin</span>
                                    <span class="token function">if</span><span class="token punctuation">(</span>rand_delay <span class="token operator">!=</span> <span class="token number">24'hffffff</span><span class="token punctuation">)</span><span class="token keyword">begin</span>
                                        rand_delay <span class="token operator">&lt;=</span> rand_delay <span class="token operator">+</span> <span class="token number">24'h000001</span><span class="token punctuation">;</span>
                                    <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token keyword">begin</span>
                                        randing <span class="token operator">&lt;=</span> randing <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>
                                        rand_delay <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">;</span>
                                        numberInArduino <span class="token operator">&lt;=</span> <span class="token operator">{</span><span class="token number">12'b1100_0001_0000</span><span class="token punctuation">,</span> rand_num <span class="token operator">}</span><span class="token punctuation">;</span>
                                        <span class="token function">if</span><span class="token punctuation">(</span>randing <span class="token operator">==</span> <span class="token number">4'b0001</span><span class="token punctuation">)</span><span class="token keyword">begin</span>
                                            numberInArduino <span class="token operator">&lt;=</span> <span class="token operator">{</span><span class="token number">12'b1100_0001_0000</span><span class="token punctuation">,</span> step <span class="token operator">}</span><span class="token punctuation">;</span>
                                        <span class="token keyword">end</span>
                                    <span class="token keyword">end</span>

                            <span class="token comment" spellcheck="true">//player1 moves</span>
                            <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token function">if</span><span class="token punctuation">(</span>move_delay <span class="token operator">!=</span> <span class="token number">24'hffffff</span><span class="token punctuation">)</span>  <span class="token keyword">begin</span>
                                    move_delay <span class="token operator">&lt;=</span> move_delay <span class="token operator">+</span> <span class="token number">24'h000001</span><span class="token punctuation">;</span>
                            <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token keyword">begin</span> <span class="token comment" spellcheck="true">//step and p1_location don't refresh in time, so when it comes to judgement, the data should +1.</span>
                                    move_delay <span class="token operator">&lt;=</span> <span class="token number">24'h0</span><span class="token punctuation">;</span>
                                    p1_location <span class="token operator">&lt;=</span> <span class="token punctuation">(</span>p1_location <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">%</span> <span class="token number">20</span><span class="token punctuation">;</span>
                                    step <span class="token operator">&lt;=</span> step <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>
                                    <span class="token comment" spellcheck="true">//if player1 come by the origin square, he gets the monthly living expenses</span>
                                    <span class="token function">if</span><span class="token punctuation">(</span>p1_location <span class="token operator">==</span> <span class="token number">5'd19</span> <span class="token punctuation">)</span><span class="token keyword">begin</span>
                                        p1_money <span class="token operator">&lt;=</span> p1_money <span class="token operator">+</span> p1_salary<span class="token punctuation">;</span>
                                    <span class="token keyword">end</span> 
                                    <span class="token comment" spellcheck="true">//when step = 1, the player1 stops and then change game state according to his current position</span>
                                    <span class="token function">if</span><span class="token punctuation">(</span> step <span class="token operator">==</span> <span class="token number">4'b0001</span><span class="token punctuation">)</span><span class="token keyword">begin</span>
                                        step <span class="token operator">&lt;=</span><span class="token number">4'b1111</span><span class="token punctuation">;</span>
                                        <span class="token comment" spellcheck="true">//player1 stays on a red squre</span>
                                        <span class="token function">if</span><span class="token punctuation">(</span>p1_location <span class="token operator">%</span> <span class="token number">5</span> <span class="token operator">==</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token keyword">begin</span>
                                            state <span class="token operator">&lt;=</span> <span class="token number">3'b011</span><span class="token punctuation">;</span> 
                                        <span class="token comment" spellcheck="true">//player1 stays on an event square     </span>
                                        <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token function">if</span><span class="token punctuation">(</span>p1_location <span class="token operator">==</span> <span class="token number">3</span> <span class="token operator">||</span>p1_location <span class="token operator">==</span> <span class="token number">5</span> <span class="token operator">||</span> p1_location <span class="token operator">==</span> <span class="token number">8</span> <span class="token operator">||</span> p1_location <span class="token operator">==</span> <span class="token number">10</span> <span class="token operator">||</span> p1_location <span class="token operator">==</span> <span class="token number">13</span> <span class="token operator">||</span>p1_location <span class="token operator">==</span> <span class="token number">15</span><span class="token punctuation">)</span> <span class="token keyword">begin</span>
                                            state <span class="token operator">&lt;=</span> <span class="token number">3'b100</span><span class="token punctuation">;</span>     
                                        <span class="token comment" spellcheck="true">//player1 stays on a land square</span>
                                        <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token function">if</span><span class="token punctuation">(</span>land_owner<span class="token punctuation">[</span><span class="token number">2</span> <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>p1_location <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">%</span> <span class="token number">20</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token keyword">begin</span>
                                            <span class="token keyword">if</span> <span class="token punctuation">(</span>has_house<span class="token punctuation">[</span><span class="token punctuation">(</span>p1_location <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">%</span> <span class="token number">20</span><span class="token punctuation">]</span> <span class="token operator">!=</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">begin</span>
                                                state <span class="token operator">&lt;=</span> <span class="token number">3'b101</span><span class="token punctuation">;</span>    
                                            <span class="token comment" spellcheck="true">//decide the next turn by checking the sleep state of both players</span>
                                            <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token keyword">begin</span>
                                                turn <span class="token operator">&lt;=</span> <span class="token operator">~</span>turn<span class="token punctuation">;</span>
                                                <span class="token function">if</span><span class="token punctuation">(</span>p1_sleep <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token keyword">begin</span>
                                                    turn <span class="token operator">&lt;=</span> <span class="token number">1</span><span class="token punctuation">;</span>
                                                    p1_sleep <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">;</span>
                                                <span class="token keyword">end</span>
                                                <span class="token function">if</span><span class="token punctuation">(</span>p2_sleep <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token keyword">begin</span>
                                                    turn <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">;</span>
                                                    p2_sleep <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">;</span>
                                                <span class="token keyword">end</span>
                                                state <span class="token operator">&lt;=</span> <span class="token number">3'b000</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//judge if the game ends or not</span>
                                            <span class="token keyword">end</span>
                                        <span class="token comment" spellcheck="true">//player1 stays on player2's land</span>
                                        <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token keyword">begin</span>
                                            state <span class="token operator">&lt;=</span> <span class="token number">3'b110</span><span class="token punctuation">;</span>
                                        <span class="token keyword">end</span>
                                    <span class="token keyword">end</span>
                            <span class="token keyword">end</span>
                        <span class="token keyword">end</span>

                    <span class="token comment" spellcheck="true">//state = 2, player2 moves</span>
                    <span class="token number">3'b010</span><span class="token punctuation">:</span><span class="token keyword">begin</span>

                            <span class="token comment" spellcheck="true">//calculate the time inteval</span>
                            <span class="token function">if</span><span class="token punctuation">(</span>step <span class="token operator">==</span> <span class="token number">4'b1111</span><span class="token punctuation">)</span><span class="token keyword">begin</span>
                                    step <span class="token operator">&lt;=</span> rand_num<span class="token punctuation">;</span>
                                    rand_delay <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">;</span>
                                    randing <span class="token operator">&lt;=</span> <span class="token number">4'b1111</span><span class="token punctuation">;</span>
                            <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token function">if</span><span class="token punctuation">(</span> randing <span class="token operator">!=</span> <span class="token number">0</span> <span class="token punctuation">)</span><span class="token keyword">begin</span>
                                    <span class="token function">if</span><span class="token punctuation">(</span>rand_delay <span class="token operator">!=</span> <span class="token number">24'hffffff</span><span class="token punctuation">)</span><span class="token keyword">begin</span>
                                        rand_delay <span class="token operator">&lt;=</span> rand_delay <span class="token operator">+</span> <span class="token number">24'h000001</span><span class="token punctuation">;</span>
                                    <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token keyword">begin</span>
                                        randing <span class="token operator">&lt;=</span> randing <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>
                                        rand_delay <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">;</span>
                                        numberInArduino <span class="token operator">&lt;=</span> <span class="token operator">{</span><span class="token number">12'b1100_0010_0000</span><span class="token punctuation">,</span>rand_num <span class="token operator">}</span><span class="token punctuation">;</span>
                                        <span class="token function">if</span><span class="token punctuation">(</span>randing <span class="token operator">==</span> <span class="token number">4'b0001</span><span class="token punctuation">)</span><span class="token keyword">begin</span>
                                            numberInArduino <span class="token operator">&lt;=</span> <span class="token operator">{</span><span class="token number">12'b1100_0010_0000</span><span class="token punctuation">,</span> step <span class="token operator">}</span><span class="token punctuation">;</span>
                                        <span class="token keyword">end</span>
                                    <span class="token keyword">end</span>

                            <span class="token comment" spellcheck="true">//player2 moves</span>
                            <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token function">if</span><span class="token punctuation">(</span>move_delay <span class="token operator">!=</span> <span class="token number">24'hffffff</span><span class="token punctuation">)</span>  <span class="token keyword">begin</span><span class="token comment" spellcheck="true">// p2 move</span>
                                    move_delay <span class="token operator">&lt;=</span> move_delay <span class="token operator">+</span> <span class="token number">24'h000001</span><span class="token punctuation">;</span>
                            <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token keyword">begin</span> <span class="token comment" spellcheck="true">//step and p2_location don't refresh in time, so when it comes to judgement, the data should +1.</span>
                                    move_delay <span class="token operator">&lt;=</span> <span class="token number">24'h0</span><span class="token punctuation">;</span>
                                    p2_location <span class="token operator">&lt;=</span> <span class="token punctuation">(</span>p2_location <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">%</span> <span class="token number">20</span><span class="token punctuation">;</span>
                                    step <span class="token operator">&lt;=</span> step <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>
                                    <span class="token comment" spellcheck="true">//if player2 come by the origin square, he gets the monthly living expenses</span>
                                    <span class="token function">if</span><span class="token punctuation">(</span>p2_location <span class="token operator">==</span> <span class="token number">5'd19</span> <span class="token punctuation">)</span><span class="token keyword">begin</span>
                                        p2_money <span class="token operator">&lt;=</span> p2_money <span class="token operator">+</span> p2_salary<span class="token punctuation">;</span>
                                    <span class="token keyword">end</span>
                                    <span class="token comment" spellcheck="true">//when step = 1, the player2 stops and then change game state according to his current position</span>
                                    <span class="token function">if</span><span class="token punctuation">(</span> step <span class="token operator">==</span> <span class="token number">4'b0001</span><span class="token punctuation">)</span><span class="token keyword">begin</span>
                                        step <span class="token operator">&lt;=</span> <span class="token number">4'b1111</span><span class="token punctuation">;</span>
                                        <span class="token comment" spellcheck="true">//player2 stays on a red squre</span>
                                        <span class="token function">if</span><span class="token punctuation">(</span>p2_location <span class="token operator">%</span> <span class="token number">5</span> <span class="token operator">==</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token keyword">begin</span>
                                            state <span class="token operator">&lt;=</span> <span class="token number">3'b011</span><span class="token punctuation">;</span>
                                        <span class="token comment" spellcheck="true">//player2 stays on an event square  </span>
                                        <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token function">if</span><span class="token punctuation">(</span>p2_location <span class="token operator">==</span> <span class="token number">3</span> <span class="token operator">||</span> p2_location <span class="token operator">==</span> <span class="token number">5</span> <span class="token operator">||</span> p2_location <span class="token operator">==</span> <span class="token number">8</span> <span class="token operator">||</span> p2_location <span class="token operator">==</span> <span class="token number">10</span> <span class="token operator">||</span> p2_location <span class="token operator">==</span> <span class="token number">13</span> <span class="token operator">||</span>p2_location <span class="token operator">==</span> <span class="token number">15</span><span class="token punctuation">)</span> <span class="token keyword">begin</span>
                                            state <span class="token operator">&lt;=</span> <span class="token number">3'b100</span><span class="token punctuation">;</span> 
                                        <span class="token comment" spellcheck="true">//player2 stays on a land square</span>
                                        <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token function">if</span><span class="token punctuation">(</span>land_owner<span class="token punctuation">[</span><span class="token number">2</span> <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>p2_location <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">%</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token keyword">begin</span>
                                            <span class="token keyword">if</span> <span class="token punctuation">(</span>has_house<span class="token punctuation">[</span><span class="token punctuation">(</span>p2_location <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">%</span> <span class="token number">20</span><span class="token punctuation">]</span> <span class="token operator">!=</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">begin</span>
                                                state <span class="token operator">&lt;=</span> <span class="token number">3'b101</span><span class="token punctuation">;</span> 
                                            <span class="token comment" spellcheck="true">//decide the next turn by checking the sleep state of both players</span>
                                            <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token keyword">begin</span>
                                                turn <span class="token operator">&lt;=</span> <span class="token operator">~</span>turn<span class="token punctuation">;</span>
                                                <span class="token function">if</span><span class="token punctuation">(</span>p1_sleep <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token keyword">begin</span>
                                                    turn <span class="token operator">&lt;=</span> <span class="token number">1</span><span class="token punctuation">;</span>
                                                    p1_sleep <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">;</span>
                                                <span class="token keyword">end</span>
                                                <span class="token function">if</span><span class="token punctuation">(</span>p2_sleep <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token keyword">begin</span>
                                                    turn <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">;</span>
                                                    p2_sleep <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">;</span>
                                                <span class="token keyword">end</span>
                                                state <span class="token operator">&lt;=</span> <span class="token number">3'b000</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//judge if the game ends or not</span>
                                            <span class="token keyword">end</span>
                                        <span class="token comment" spellcheck="true">//player2 stays on player1's land</span>
                                        <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token keyword">begin</span>
                                            state <span class="token operator">&lt;=</span> <span class="token number">3'b110</span><span class="token punctuation">;</span> 
                                        <span class="token keyword">end</span>
                                    <span class="token keyword">end</span>
                            <span class="token keyword">end</span>
                        <span class="token keyword">end</span>

                    <span class="token comment" spellcheck="true">//state = 3, executing the event of the red square</span>
                    <span class="token number">3'b011</span><span class="token punctuation">:</span><span class="token keyword">begin</span>
                            <span class="token comment" spellcheck="true">//checking the turn</span>
                            <span class="token comment" spellcheck="true">//it's player1's turn</span>
                            <span class="token function">if</span><span class="token punctuation">(</span>turn<span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token keyword">begin</span>
                                    <span class="token function">case</span><span class="token punctuation">(</span>p1_location<span class="token punctuation">)</span>
                                        <span class="token comment" spellcheck="true">//if position = 0, the palyer gets twice his living expenses (because the pass-by state didn't count)</span>
                                        <span class="token number">5'd0</span><span class="token punctuation">:</span>  p1_money <span class="token operator">&lt;=</span> p1_money <span class="token operator">+</span> <span class="token number">2</span> <span class="token operator">*</span> p1_salary<span class="token punctuation">;</span>
                                        <span class="token comment" spellcheck="true">//if position = 5, change the player's sleep state to 1</span>
                                        <span class="token number">5'd5</span><span class="token punctuation">:</span>  p1_sleep <span class="token operator">&lt;=</span> <span class="token number">1'b1</span><span class="token punctuation">;</span>
                                        <span class="token comment" spellcheck="true">//if position = 10, the player gets scholarship according to his current gpa</span>
                                        <span class="token number">5'd10</span><span class="token punctuation">:</span> <span class="token keyword">begin</span> 
                                                <span class="token function">if</span><span class="token punctuation">(</span>p1_gpa <span class="token operator">>=</span> <span class="token number">8'd36</span> <span class="token operator">&amp;&amp;</span> p1_gpa <span class="token operator">&lt;</span> <span class="token number">8'd42</span><span class="token punctuation">)</span> <span class="token keyword">begin</span>
                                                    p1_money <span class="token operator">&lt;=</span> p1_money <span class="token operator">+</span> <span class="token number">2000</span><span class="token punctuation">;</span>
                                                <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>p1_gpa <span class="token operator">>=</span> <span class="token number">8'd42</span> <span class="token operator">&amp;&amp;</span> p1_gpa <span class="token operator">&lt;</span> <span class="token number">8'd44</span><span class="token punctuation">)</span> <span class="token keyword">begin</span>
                                                    p1_money <span class="token operator">&lt;=</span> p1_money <span class="token operator">+</span> <span class="token number">4000</span><span class="token punctuation">;</span>
                                                <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>p1_gpa <span class="token operator">>=</span> <span class="token number">8'd44</span> <span class="token operator">&amp;&amp;</span> p1_gpa <span class="token operator">&lt;</span> <span class="token number">8'd50</span><span class="token punctuation">)</span> <span class="token keyword">begin</span>
                                                    p1_money <span class="token operator">&lt;=</span> p1_money <span class="token operator">+</span> <span class="token number">6000</span><span class="token punctuation">;</span>
                                                <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>p1_gpa <span class="token operator">>=</span> <span class="token number">8'd46</span> <span class="token operator">&amp;&amp;</span> p1_gpa <span class="token operator">&lt;</span> <span class="token number">8'd50</span> <span class="token operator">&amp;&amp;</span> p1_gpa <span class="token operator">></span> p2_gpa<span class="token punctuation">)</span> <span class="token keyword">begin</span>
                                                    p1_money <span class="token operator">&lt;=</span> p1_money <span class="token operator">+</span> <span class="token number">8000</span><span class="token punctuation">;</span>
                                                <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>p1_gpa <span class="token operator">==</span> <span class="token number">8'd50</span> <span class="token punctuation">)</span> <span class="token keyword">begin</span>
                                                    <span class="token keyword">if</span> <span class="token punctuation">(</span>p1_money <span class="token operator">&lt;</span> <span class="token number">70000</span><span class="token punctuation">)</span> <span class="token keyword">begin</span>
                                                        p1_money <span class="token operator">&lt;=</span> p1_money <span class="token operator">+</span> <span class="token number">20000</span><span class="token punctuation">;</span>
                                                    <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token keyword">begin</span>
                                                        p1_money <span class="token operator">&lt;=</span> <span class="token number">88888</span><span class="token punctuation">;</span>
                                                    <span class="token keyword">end</span>
                                                <span class="token keyword">end</span>
                                        <span class="token keyword">end</span>
                                        <span class="token comment" spellcheck="true">//if position = 15, the player begins his final exam, roll the dice to get his random grade</span>
                                        <span class="token number">5'd15</span><span class="token punctuation">:</span> 
                                            <span class="token comment" spellcheck="true">//to show the rolling numbers</span>
                                            <span class="token function">if</span><span class="token punctuation">(</span>gpa_rand <span class="token operator">==</span> <span class="token number">4'b1111</span><span class="token punctuation">)</span><span class="token keyword">begin</span>
                                                gpa_rand <span class="token operator">&lt;=</span> rand_num<span class="token punctuation">;</span>
                                                gpa_delay <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">;</span> 
                                                randing <span class="token operator">&lt;=</span> <span class="token number">4'b1111</span><span class="token punctuation">;</span>
                                            <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token function">if</span><span class="token punctuation">(</span> randing <span class="token operator">!=</span> <span class="token number">0</span> <span class="token punctuation">)</span><span class="token keyword">begin</span>
                                                <span class="token function">if</span><span class="token punctuation">(</span>gpa_delay <span class="token operator">!=</span> <span class="token number">24'hffffff</span><span class="token punctuation">)</span><span class="token keyword">begin</span>
                                                    gpa_delay <span class="token operator">&lt;=</span> gpa_delay <span class="token operator">+</span> <span class="token number">24'h000001</span><span class="token punctuation">;</span>
                                                <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token keyword">begin</span>
                                                    randing <span class="token operator">&lt;=</span> randing <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>
                                                    gpa_delay <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">;</span>
                                                    numberInArduino <span class="token operator">&lt;={</span><span class="token number">12'b1100_0001_0000</span><span class="token punctuation">,</span>rand_num<span class="token operator">}</span><span class="token punctuation">;</span>
                                                <span class="token keyword">end</span>
                                            <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token function">if</span><span class="token punctuation">(</span>gpa_rand <span class="token operator">!=</span> <span class="token number">4'b1110</span><span class="token punctuation">)</span> <span class="token keyword">begin</span>
                                                numberInArduino <span class="token operator">&lt;={</span><span class="token number">12'b1100_0001_0000</span><span class="token punctuation">,</span> gpa_rand<span class="token operator">}</span><span class="token punctuation">;</span>
                                                p1_gpa <span class="token operator">&lt;=</span> p1_gpa <span class="token operator">-</span> <span class="token number">3</span> <span class="token operator">+</span> gpa_rand<span class="token punctuation">;</span>
                                                gpa_rand <span class="token operator">&lt;=</span> <span class="token number">4'b1110</span><span class="token punctuation">;</span>
                                                gpa_delay <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">;</span>
                                            <span class="token keyword">end</span>
                                    <span class="token keyword">default</span><span class="token punctuation">:</span> state <span class="token operator">&lt;=</span> <span class="token number">3'b000</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//change to stand-by state</span>
                                    <span class="token keyword">endcase</span>                   
                            <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token keyword">begin</span>
                                    <span class="token comment" spellcheck="true">//it's player2's turn</span>
                                    <span class="token function">case</span><span class="token punctuation">(</span>p2_location<span class="token punctuation">)</span>
                                        <span class="token comment" spellcheck="true">//if position = 0, the palyer gets twice his living expenses (because the pass-by state didn't count)</span>
                                        <span class="token number">5'b0</span><span class="token punctuation">:</span>  p2_money <span class="token operator">&lt;=</span> p2_money <span class="token operator">+</span> <span class="token number">2</span> <span class="token operator">*</span> p2_salary<span class="token punctuation">;</span>
                                        <span class="token comment" spellcheck="true">//if position = 5, change the player's sleep state to 1</span>
                                        <span class="token number">5'd5</span><span class="token punctuation">:</span>  p2_sleep <span class="token operator">&lt;=</span> <span class="token number">1'b1</span><span class="token punctuation">;</span>
                                        <span class="token comment" spellcheck="true">//if position = 10, the player gets scholarship according to his current gpa</span>
                                        <span class="token number">5'd10</span><span class="token punctuation">:</span> <span class="token function">if</span><span class="token punctuation">(</span>p2_gpa <span class="token operator">>=</span> <span class="token number">8'd36</span> <span class="token operator">&amp;&amp;</span> p2_gpa <span class="token operator">&lt;</span> <span class="token number">8'd42</span><span class="token punctuation">)</span><span class="token keyword">begin</span>
                                                    p2_money <span class="token operator">&lt;=</span> p2_money <span class="token operator">+</span> <span class="token number">2000</span><span class="token punctuation">;</span>
                                                <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>p2_gpa <span class="token operator">>=</span> <span class="token number">8'd42</span> <span class="token operator">&amp;&amp;</span> p2_gpa <span class="token operator">&lt;</span> <span class="token number">8'd44</span><span class="token punctuation">)</span> <span class="token keyword">begin</span>
                                                    p2_money <span class="token operator">&lt;=</span> p2_money <span class="token operator">+</span> <span class="token number">4000</span><span class="token punctuation">;</span>
                                                <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>p2_gpa <span class="token operator">>=</span> <span class="token number">8'd44</span> <span class="token operator">&amp;&amp;</span> p2_gpa <span class="token operator">&lt;</span> <span class="token number">8'd50</span><span class="token punctuation">)</span> <span class="token keyword">begin</span>
                                                    p2_money <span class="token operator">&lt;=</span> p2_money <span class="token operator">+</span> <span class="token number">6000</span><span class="token punctuation">;</span>
                                                <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>p2_gpa <span class="token operator">>=</span> <span class="token number">8'd46</span> <span class="token operator">&amp;&amp;</span> p2_gpa <span class="token operator">&lt;</span> <span class="token number">8'd50</span> <span class="token operator">&amp;&amp;</span> p2_gpa <span class="token operator">></span> p1_gpa<span class="token punctuation">)</span> <span class="token keyword">begin</span>
                                                    p2_money <span class="token operator">&lt;=</span> p2_money <span class="token operator">+</span> <span class="token number">8000</span><span class="token punctuation">;</span>
                                                <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>p2_gpa <span class="token operator">==</span> <span class="token number">8'd50</span> <span class="token punctuation">)</span> <span class="token keyword">begin</span>
                                                    <span class="token keyword">if</span> <span class="token punctuation">(</span>p2_money <span class="token operator">&lt;</span> <span class="token number">70000</span><span class="token punctuation">)</span> <span class="token keyword">begin</span>
                                                        p2_money <span class="token operator">&lt;=</span> p2_money <span class="token operator">+</span> <span class="token number">20000</span><span class="token punctuation">;</span>
                                                    <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token keyword">begin</span>
                                                        p2_money <span class="token operator">&lt;=</span> <span class="token number">88888</span><span class="token punctuation">;</span>
                                                    <span class="token keyword">end</span>
                                                <span class="token keyword">end</span>
                                        <span class="token comment" spellcheck="true">//if position = 15, the player begins his final exam, roll the dice to get his random grade</span>
                                        <span class="token number">5'd15</span><span class="token punctuation">:</span>
                                                <span class="token comment" spellcheck="true">//to show the rolling numbers</span>
                                                <span class="token function">if</span><span class="token punctuation">(</span>gpa_rand <span class="token operator">==</span> <span class="token number">4'b1111</span><span class="token punctuation">)</span><span class="token keyword">begin</span>
                                                    gpa_rand <span class="token operator">&lt;=</span> rand_num<span class="token punctuation">;</span>
                                                    gpa_delay <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">;</span>
                                                    randing <span class="token operator">&lt;=</span> <span class="token number">4'b1111</span><span class="token punctuation">;</span>
                                                <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token function">if</span><span class="token punctuation">(</span> randing <span class="token operator">!=</span> <span class="token number">0</span> <span class="token punctuation">)</span><span class="token keyword">begin</span>
                                                    <span class="token function">if</span><span class="token punctuation">(</span>gpa_delay <span class="token operator">!=</span> <span class="token number">24'hffffff</span><span class="token punctuation">)</span><span class="token keyword">begin</span>
                                                        gpa_delay <span class="token operator">&lt;=</span> gpa_delay <span class="token operator">+</span> <span class="token number">24'h000001</span><span class="token punctuation">;</span>
                                                    <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token keyword">begin</span>
                                                        randing <span class="token operator">&lt;=</span> randing <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>
                                                        gpa_delay <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">;</span>
                                                        numberInArduino <span class="token operator">&lt;={</span><span class="token number">12'b1100_0010_0000</span><span class="token punctuation">,</span>rand_num<span class="token operator">}</span><span class="token punctuation">;</span>
                                                    <span class="token keyword">end</span>    
                                                <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token function">if</span><span class="token punctuation">(</span>gpa_rand <span class="token operator">!=</span> <span class="token number">4'b1110</span><span class="token punctuation">)</span> <span class="token keyword">begin</span>
                                                    numberInArduino <span class="token operator">&lt;={</span><span class="token number">12'b1100_0010_0000</span><span class="token punctuation">,</span> gpa_rand<span class="token operator">}</span><span class="token punctuation">;</span>
                                                    p2_gpa <span class="token operator">&lt;=</span> p2_gpa <span class="token operator">-</span> <span class="token number">3</span> <span class="token operator">+</span> gpa_rand<span class="token punctuation">;</span>
                                                    gpa_rand <span class="token operator">&lt;=</span> <span class="token number">4'b1110</span><span class="token punctuation">;</span>
                                                    gpa_delay <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">;</span>
                                                <span class="token keyword">end</span>
                                        <span class="token keyword">default</span><span class="token punctuation">:</span> state <span class="token operator">&lt;=</span> <span class="token number">3'b000</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//change to stand-by state</span>
                                    <span class="token keyword">endcase</span>
                            <span class="token keyword">end</span>

                            <span class="token comment" spellcheck="true">//set gpa_rand to its default and decide the next turn by checking the sleep state of both players</span>
                            <span class="token function">if</span><span class="token punctuation">(</span><span class="token punctuation">(</span>gpa_rand <span class="token operator">==</span> <span class="token number">4'b1110</span>  <span class="token operator">||</span> gpa_rand <span class="token operator">==</span> <span class="token number">4'b1111</span> <span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> yes <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token keyword">begin</span>
                                    gpa_rand <span class="token operator">&lt;=</span> <span class="token number">4'b1111</span><span class="token punctuation">;</span>
                                    turn <span class="token operator">&lt;=</span> <span class="token operator">~</span>turn<span class="token punctuation">;</span>
                                    <span class="token function">if</span><span class="token punctuation">(</span>p1_sleep <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token keyword">begin</span>
                                        turn <span class="token operator">&lt;=</span> <span class="token number">1</span><span class="token punctuation">;</span>
                                        p1_sleep <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">;</span>
                                    <span class="token keyword">end</span>
                                    <span class="token function">if</span><span class="token punctuation">(</span>p2_sleep <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token keyword">begin</span>
                                        turn <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">;</span>
                                        p2_sleep <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">;</span>
                                    <span class="token keyword">end</span>
                                    state <span class="token operator">&lt;=</span> <span class="token number">3'b000</span><span class="token punctuation">;</span>
                            <span class="token keyword">end</span>

                        <span class="token keyword">end</span>

                    <span class="token comment" spellcheck="true">//state = 4, executing the random event</span>
                    <span class="token number">3'b100</span><span class="token punctuation">:</span><span class="token keyword">begin</span>
                            <span class="token comment" spellcheck="true">//get the random event</span>
                            <span class="token function">if</span><span class="token punctuation">(</span>show_event <span class="token operator">==</span> <span class="token number">4'b1111</span><span class="token punctuation">)</span><span class="token keyword">begin</span>
                                show_event <span class="token operator">&lt;=</span> rand_num<span class="token punctuation">;</span>
                                <span class="token function">if</span><span class="token punctuation">(</span>turn <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token keyword">begin</span>
                                    <span class="token function">case</span><span class="token punctuation">(</span>rand_num<span class="token punctuation">)</span>
                                        <span class="token number">4'b0001</span><span class="token punctuation">:</span>p1_gpa <span class="token operator">&lt;=</span> p1_gpa <span class="token operator">+</span> <span class="token number">3</span><span class="token punctuation">;</span>
                                        <span class="token number">4'b0010</span><span class="token punctuation">:</span>p1_gpa <span class="token operator">&lt;=</span> p1_gpa <span class="token operator">-</span> <span class="token number">3</span><span class="token punctuation">;</span>
                                        <span class="token number">4'b0011</span><span class="token punctuation">:</span><span class="token function">if</span><span class="token punctuation">(</span>p1_money <span class="token operator">></span> <span class="token number">3000</span> <span class="token punctuation">)</span><span class="token keyword">begin</span>
                                                    p1_money <span class="token operator">&lt;=</span> p1_money <span class="token operator">-</span> <span class="token number">3000</span><span class="token punctuation">;</span>
                                                <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token keyword">begin</span>
                                                    p1_money <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">;</span>
                                                <span class="token keyword">end</span> 
                                        <span class="token number">4'b0100</span><span class="token punctuation">:</span>p1_money <span class="token operator">&lt;=</span> p1_money <span class="token operator">+</span> <span class="token number">2000</span><span class="token punctuation">;</span>
                                        <span class="token number">4'b0101</span><span class="token punctuation">:</span>p1_salary <span class="token operator">&lt;=</span> p1_salary <span class="token operator">+</span> <span class="token number">1000</span><span class="token punctuation">;</span>
                                        <span class="token number">4'b0110</span><span class="token punctuation">:</span><span class="token function">if</span><span class="token punctuation">(</span>p1_salary <span class="token operator">></span> <span class="token number">1200</span> <span class="token punctuation">)</span><span class="token keyword">begin</span>
                                                    p1_salary <span class="token operator">&lt;=</span> p1_salary <span class="token operator">-</span> <span class="token number">1200</span><span class="token punctuation">;</span>
                                                <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token keyword">begin</span>
                                                    p1_salary <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">;</span> 
                                                <span class="token keyword">end</span> 
                                    <span class="token keyword">default</span><span class="token punctuation">:</span> show_event <span class="token operator">&lt;=</span> <span class="token number">4'b1111</span><span class="token punctuation">;</span>  
                                    <span class="token keyword">endcase</span>
                                <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token keyword">begin</span> 
                                    <span class="token function">case</span><span class="token punctuation">(</span>rand_num<span class="token punctuation">)</span>
                                        <span class="token number">4'b0001</span><span class="token punctuation">:</span>p2_gpa <span class="token operator">&lt;=</span> p2_gpa <span class="token operator">+</span> <span class="token number">3</span><span class="token punctuation">;</span>
                                        <span class="token number">4'b0010</span><span class="token punctuation">:</span>p2_gpa <span class="token operator">&lt;=</span> p2_gpa <span class="token operator">-</span> <span class="token number">3</span><span class="token punctuation">;</span>
                                        <span class="token number">4'b0011</span><span class="token punctuation">:</span><span class="token function">if</span><span class="token punctuation">(</span>p2_money <span class="token operator">></span> <span class="token number">3000</span> <span class="token punctuation">)</span><span class="token keyword">begin</span>
                                                    p2_money <span class="token operator">&lt;=</span> p2_money <span class="token operator">-</span> <span class="token number">3000</span><span class="token punctuation">;</span>
                                                <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token keyword">begin</span>
                                                    p2_money <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">;</span>
                                                <span class="token keyword">end</span> 
                                        <span class="token number">4'b0100</span><span class="token punctuation">:</span>p2_money <span class="token operator">&lt;=</span> p2_money <span class="token operator">+</span> <span class="token number">2000</span><span class="token punctuation">;</span>
                                        <span class="token number">4'b0101</span><span class="token punctuation">:</span>p2_salary <span class="token operator">&lt;=</span> p2_salary <span class="token operator">+</span> <span class="token number">1000</span><span class="token punctuation">;</span>
                                        <span class="token number">4'b0110</span><span class="token punctuation">:</span><span class="token function">if</span><span class="token punctuation">(</span>p2_salary <span class="token operator">></span> <span class="token number">1200</span> <span class="token punctuation">)</span><span class="token keyword">begin</span>
                                                    p2_salary <span class="token operator">&lt;=</span> p2_salary <span class="token operator">-</span> <span class="token number">1200</span><span class="token punctuation">;</span>
                                                <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token keyword">begin</span>
                                                    p2_salary <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">;</span> 
                                                <span class="token keyword">end</span>  
                                    <span class="token keyword">default</span><span class="token punctuation">:</span> show_event <span class="token operator">&lt;=</span> <span class="token number">4'b1111</span><span class="token punctuation">;</span>  
                                    <span class="token keyword">endcase</span>
                                <span class="token keyword">end</span>
                            <span class="token keyword">end</span> 

                            <span class="token comment" spellcheck="true">//press "yes" and decide the next turn by checking the sleep state of both players</span>
                            <span class="token keyword">if</span> <span class="token punctuation">(</span>yes <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token keyword">begin</span> 
                                show_event <span class="token operator">&lt;=</span> <span class="token number">4'b1111</span><span class="token punctuation">;</span>
                                turn <span class="token operator">&lt;=</span> <span class="token operator">~</span>turn<span class="token punctuation">;</span>
                                <span class="token function">if</span><span class="token punctuation">(</span>p1_sleep <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token keyword">begin</span>
                                    turn <span class="token operator">&lt;=</span> <span class="token number">1</span><span class="token punctuation">;</span>
                                    p1_sleep <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">;</span>
                                <span class="token keyword">end</span>
                                <span class="token function">if</span><span class="token punctuation">(</span>p2_sleep <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token keyword">begin</span>
                                        turn <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">;</span>
                                        p2_sleep <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">;</span>
                                <span class="token keyword">end</span>
                                state <span class="token operator">&lt;=</span> <span class="token number">3'b000</span><span class="token punctuation">;</span>
                            <span class="token keyword">end</span>    
                        <span class="token keyword">end</span> 

                    <span class="token comment" spellcheck="true">//state = 5, the player can buy an empty land or build houses on his land to charge higher toll</span>
                    <span class="token number">3'b101</span><span class="token punctuation">:</span><span class="token keyword">begin</span>
                            <span class="token function">if</span><span class="token punctuation">(</span>turn <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token keyword">begin</span>
                                        <span class="token comment" spellcheck="true">//if the land doesn't belong to anyone yet, the player can choose to buy the land or not</span>
                                        <span class="token keyword">if</span> <span class="token punctuation">(</span>land_owner<span class="token punctuation">[</span><span class="token number">2</span> <span class="token operator">*</span> p1_location<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">begin</span>
                                            <span class="token keyword">if</span> <span class="token punctuation">(</span>p1_money <span class="token operator">&lt;</span> <span class="token number">1600</span><span class="token punctuation">)</span> <span class="token keyword">begin</span> <span class="token comment" spellcheck="true">//if the player's money is less than 1600, then he cannot afford the land</span>
                                                turn <span class="token operator">&lt;=</span> <span class="token operator">~</span>turn<span class="token punctuation">;</span>
                                                <span class="token function">if</span><span class="token punctuation">(</span>p1_sleep <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token keyword">begin</span>
                                                    turn <span class="token operator">&lt;=</span> <span class="token number">1</span><span class="token punctuation">;</span>
                                                    p1_sleep <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">;</span>
                                                <span class="token keyword">end</span>
                                                <span class="token function">if</span><span class="token punctuation">(</span>p2_sleep <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token keyword">begin</span>
                                                        turn <span class="token operator">&lt;=</span><span class="token number">0</span><span class="token punctuation">;</span>
                                                        p2_sleep <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">;</span>
                                                <span class="token keyword">end</span>
                                                state <span class="token operator">&lt;=</span> <span class="token number">3'b000</span><span class="token punctuation">;</span>
                                            <span class="token comment" spellcheck="true">//press "yes" to buy the land and change the land state</span>
                                            <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>yes <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">begin</span>
                                                land_owner<span class="token punctuation">[</span><span class="token number">2</span> <span class="token operator">*</span> p1_location<span class="token punctuation">]</span> <span class="token operator">&lt;=</span> <span class="token number">1</span><span class="token punctuation">;</span>
                                                land_owner<span class="token punctuation">[</span><span class="token number">2</span> <span class="token operator">*</span> p1_location <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">;</span>

                                                p1_money <span class="token operator">&lt;=</span> p1_money <span class="token operator">-</span> <span class="token number">1600</span><span class="token punctuation">;</span>
                                                turn <span class="token operator">&lt;=</span> <span class="token operator">~</span>turn<span class="token punctuation">;</span>
                                                <span class="token function">if</span><span class="token punctuation">(</span>p1_sleep <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token keyword">begin</span>
                                                    turn <span class="token operator">&lt;=</span> <span class="token number">1</span><span class="token punctuation">;</span>
                                                    p1_sleep <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">;</span>
                                                <span class="token keyword">end</span>
                                                <span class="token function">if</span><span class="token punctuation">(</span>p2_sleep <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token keyword">begin</span>
                                                        turn <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">;</span>
                                                        p2_sleep <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">;</span>
                                                <span class="token keyword">end</span>
                                                state <span class="token operator">&lt;=</span> <span class="token number">3'b000</span><span class="token punctuation">;</span> 
                                            <span class="token comment" spellcheck="true">//press "no" and decide the next turn by checking the sleep state of both players   </span>
                                            <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>no <span class="token operator">==</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">begin</span>
                                                turn <span class="token operator">&lt;=</span> <span class="token operator">~</span>turn<span class="token punctuation">;</span>
                                                <span class="token function">if</span><span class="token punctuation">(</span>p1_sleep <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token keyword">begin</span>
                                                    turn <span class="token operator">&lt;=</span> <span class="token number">1</span><span class="token punctuation">;</span>
                                                    p1_sleep <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">;</span>
                                                <span class="token keyword">end</span>
                                                <span class="token function">if</span><span class="token punctuation">(</span>p2_sleep <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token keyword">begin</span>
                                                    turn <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">;</span>
                                                    p2_sleep <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">;</span>
                                                <span class="token keyword">end</span>
                                                state <span class="token operator">&lt;=</span> <span class="token number">3'b000</span><span class="token punctuation">;</span>                                 
                                            <span class="token keyword">end</span>

                                        <span class="token comment" spellcheck="true">//if the land belongs to the player, the player can choose to build the house or not</span>
                                        <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token keyword">begin</span>
                                            <span class="token keyword">if</span> <span class="token punctuation">(</span>p1_money <span class="token operator">&lt;</span> <span class="token number">1200</span><span class="token punctuation">)</span> <span class="token keyword">begin</span> <span class="token comment" spellcheck="true">//if the player's money is less than 1200, then he cannot afford the house</span>
                                                turn <span class="token operator">&lt;=</span> <span class="token operator">~</span>turn<span class="token punctuation">;</span>
                                                <span class="token function">if</span><span class="token punctuation">(</span>p1_sleep <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token keyword">begin</span>
                                                    turn <span class="token operator">&lt;=</span> <span class="token number">1</span><span class="token punctuation">;</span>
                                                    p1_sleep <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">;</span>
                                                <span class="token keyword">end</span>
                                                <span class="token function">if</span><span class="token punctuation">(</span>p2_sleep <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token keyword">begin</span>
                                                    turn <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">;</span>
                                                    p2_sleep <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">;</span>
                                                <span class="token keyword">end</span>
                                                state <span class="token operator">&lt;=</span> <span class="token number">3'b000</span><span class="token punctuation">;</span> 
                                            <span class="token comment" spellcheck="true">//press "yes" to build the house and change the house state</span>
                                            <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>yes <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">begin</span>
                                                has_house<span class="token punctuation">[</span>p1_location<span class="token punctuation">]</span> <span class="token operator">&lt;=</span> <span class="token number">1</span><span class="token punctuation">;</span>
                                                p1_money <span class="token operator">&lt;=</span> p1_money <span class="token operator">-</span> <span class="token number">1200</span><span class="token punctuation">;</span>

                                                turn <span class="token operator">&lt;=</span> <span class="token operator">~</span>turn<span class="token punctuation">;</span>
                                                <span class="token function">if</span><span class="token punctuation">(</span>p1_sleep <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token keyword">begin</span>
                                                    turn <span class="token operator">&lt;=</span> <span class="token number">1</span><span class="token punctuation">;</span>
                                                    p1_sleep <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">;</span>
                                                <span class="token keyword">end</span>
                                                <span class="token function">if</span><span class="token punctuation">(</span>p2_sleep <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token keyword">begin</span>
                                                    turn <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">;</span>
                                                    p2_sleep <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">;</span>
                                                <span class="token keyword">end</span>
                                                state <span class="token operator">&lt;=</span> <span class="token number">3'b000</span><span class="token punctuation">;</span> 
                                            <span class="token comment" spellcheck="true">//press "no" and decide the next turn by checking the sleep state of both players      </span>
                                            <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>no <span class="token operator">==</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">begin</span>
                                                turn <span class="token operator">&lt;=</span> <span class="token operator">~</span>turn<span class="token punctuation">;</span>
                                                <span class="token function">if</span><span class="token punctuation">(</span>p1_sleep <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token keyword">begin</span>
                                                    turn <span class="token operator">&lt;=</span> <span class="token number">1</span><span class="token punctuation">;</span>
                                                    p1_sleep <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">;</span>
                                                <span class="token keyword">end</span>
                                                <span class="token function">if</span><span class="token punctuation">(</span>p2_sleep <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token keyword">begin</span>
                                                        turn <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">;</span>
                                                        p2_sleep <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">;</span>
                                                <span class="token keyword">end</span>
                                                state <span class="token operator">&lt;=</span> <span class="token number">3'b000</span><span class="token punctuation">;</span>                                 
                                            <span class="token keyword">end</span>                        
                                        <span class="token keyword">end</span>

                            <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token keyword">begin</span>
                                        <span class="token comment" spellcheck="true">//if the land doesn't belong to anyone yet, the player can choose to buy the land or not</span>
                                        <span class="token keyword">if</span> <span class="token punctuation">(</span>land_owner<span class="token punctuation">[</span><span class="token number">2</span> <span class="token operator">*</span> p2_location <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">begin</span>
                                                <span class="token keyword">if</span> <span class="token punctuation">(</span>p2_money <span class="token operator">&lt;</span> <span class="token number">1600</span><span class="token punctuation">)</span> <span class="token keyword">begin</span><span class="token comment" spellcheck="true">//if the player's money is less than 1600, then he cannot afford the land</span>
                                                    turn <span class="token operator">&lt;=</span> <span class="token operator">~</span>turn<span class="token punctuation">;</span>
                                                    <span class="token function">if</span><span class="token punctuation">(</span>p1_sleep <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token keyword">begin</span>
                                                        turn <span class="token operator">&lt;=</span> <span class="token number">1</span><span class="token punctuation">;</span>
                                                        p1_sleep <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">;</span>
                                                    <span class="token keyword">end</span>
                                                    <span class="token function">if</span><span class="token punctuation">(</span>p2_sleep <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token keyword">begin</span>
                                                            turn <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">;</span>
                                                            p2_sleep <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">;</span>
                                                    <span class="token keyword">end</span>
                                                    state <span class="token operator">&lt;=</span> <span class="token number">3'b000</span><span class="token punctuation">;</span> 
                                                <span class="token comment" spellcheck="true">//press "yes" to buy the land and change the land state</span>
                                                <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>yes <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">begin</span>
                                                    land_owner<span class="token punctuation">[</span><span class="token number">2</span> <span class="token operator">*</span> p2_location<span class="token punctuation">]</span> <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">;</span>
                                                    land_owner<span class="token punctuation">[</span><span class="token number">2</span> <span class="token operator">*</span> p2_location <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">&lt;=</span> <span class="token number">1</span><span class="token punctuation">;</span>
                                                    p2_money <span class="token operator">&lt;=</span> p2_money <span class="token operator">-</span> <span class="token number">1600</span><span class="token punctuation">;</span>
                                                    turn <span class="token operator">&lt;=</span> <span class="token operator">~</span>turn<span class="token punctuation">;</span>
                                                    <span class="token function">if</span><span class="token punctuation">(</span>p1_sleep <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token keyword">begin</span>
                                                        turn <span class="token operator">&lt;=</span> <span class="token number">1</span><span class="token punctuation">;</span>
                                                        p1_sleep <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">;</span>
                                                    <span class="token keyword">end</span>
                                                    <span class="token function">if</span><span class="token punctuation">(</span>p2_sleep <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token keyword">begin</span>
                                                            turn <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">;</span>
                                                            p2_sleep <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">;</span>
                                                    <span class="token keyword">end</span>
                                                    state <span class="token operator">&lt;=</span> <span class="token number">3'b000</span><span class="token punctuation">;</span>  
                                                <span class="token comment" spellcheck="true">//press "no" and decide the next turn by checking the sleep state of both players     </span>
                                                <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>no <span class="token operator">==</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">begin</span>
                                                    turn <span class="token operator">&lt;=</span> <span class="token operator">~</span>turn<span class="token punctuation">;</span>
                                                    <span class="token function">if</span><span class="token punctuation">(</span>p1_sleep <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token keyword">begin</span>
                                                        turn <span class="token operator">&lt;=</span> <span class="token number">1</span><span class="token punctuation">;</span>
                                                        p1_sleep <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">;</span>
                                                    <span class="token keyword">end</span>
                                                    <span class="token function">if</span><span class="token punctuation">(</span>p2_sleep <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token keyword">begin</span>
                                                            turn <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">;</span>
                                                            p2_sleep <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">;</span>
                                                    <span class="token keyword">end</span>
                                                    state <span class="token operator">&lt;=</span> <span class="token number">3'b000</span><span class="token punctuation">;</span>
                                                <span class="token keyword">end</span>   

                                        <span class="token comment" spellcheck="true">//if the land belongs to the player, the player can choose to build the house or not                             </span>
                                        <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token keyword">begin</span>
                                                <span class="token keyword">if</span> <span class="token punctuation">(</span>p2_money <span class="token operator">&lt;</span> <span class="token number">1200</span><span class="token punctuation">)</span> <span class="token keyword">begin</span> <span class="token comment" spellcheck="true">//if the player's money is less than 1200, then he cannot afford the house</span>
                                                    turn <span class="token operator">&lt;=</span> <span class="token operator">~</span>turn<span class="token punctuation">;</span>
                                                    <span class="token function">if</span><span class="token punctuation">(</span>p1_sleep <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token keyword">begin</span>
                                                        turn <span class="token operator">&lt;=</span> <span class="token number">1</span><span class="token punctuation">;</span>
                                                        p1_sleep <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">;</span>
                                                    <span class="token keyword">end</span>
                                                    <span class="token function">if</span><span class="token punctuation">(</span>p2_sleep <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token keyword">begin</span>
                                                            turn <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">;</span>
                                                            p2_sleep <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">;</span>
                                                    <span class="token keyword">end</span>
                                                    state <span class="token operator">&lt;=</span> <span class="token number">3'b000</span><span class="token punctuation">;</span> 
                                                <span class="token comment" spellcheck="true">//press "yes" to build the house and change the house state</span>
                                                <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>yes <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">begin</span>
                                                    has_house<span class="token punctuation">[</span>p2_location<span class="token punctuation">]</span> <span class="token operator">&lt;=</span> <span class="token number">1</span><span class="token punctuation">;</span>
                                                    p2_money <span class="token operator">&lt;=</span> p2_money <span class="token operator">-</span> <span class="token number">1200</span><span class="token punctuation">;</span>

                                                    turn <span class="token operator">&lt;=</span> <span class="token operator">~</span>turn<span class="token punctuation">;</span>
                                                    <span class="token function">if</span><span class="token punctuation">(</span>p1_sleep <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token keyword">begin</span>
                                                        turn <span class="token operator">&lt;=</span> <span class="token number">1</span><span class="token punctuation">;</span>
                                                        p1_sleep <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">;</span>
                                                    <span class="token keyword">end</span>
                                                    <span class="token function">if</span><span class="token punctuation">(</span>p2_sleep <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token keyword">begin</span>
                                                            turn <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">;</span>
                                                            p2_sleep <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">;</span>
                                                    <span class="token keyword">end</span>
                                                    state <span class="token operator">&lt;=</span> <span class="token number">3'b000</span><span class="token punctuation">;</span> 
                                                <span class="token comment" spellcheck="true">//press "no" and decide the next turn by checking the sleep state of both players     </span>
                                                <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>no <span class="token operator">==</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">begin</span>
                                                    turn <span class="token operator">&lt;=</span> <span class="token operator">~</span>turn<span class="token punctuation">;</span>
                                                    <span class="token function">if</span><span class="token punctuation">(</span>p1_sleep <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token keyword">begin</span>
                                                        turn <span class="token operator">&lt;=</span> <span class="token number">1</span><span class="token punctuation">;</span>
                                                        p1_sleep <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">;</span>
                                                    <span class="token keyword">end</span>
                                                    <span class="token function">if</span><span class="token punctuation">(</span>p2_sleep <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token keyword">begin</span>
                                                            turn <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">;</span>
                                                            p2_sleep <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">;</span>
                                                    <span class="token keyword">end</span>
                                                    state <span class="token operator">&lt;=</span> <span class="token number">3'b000</span><span class="token punctuation">;</span>                                 
                                                <span class="token keyword">end</span>                        
                                        <span class="token keyword">end</span>
                            <span class="token keyword">end</span>                   
                        <span class="token keyword">end</span>

                    <span class="token comment" spellcheck="true">//state = 6, the palyer stays on another player's land and needs to pay the toll</span>
                    <span class="token number">3'b110</span><span class="token punctuation">:</span><span class="token keyword">begin</span>
                            <span class="token comment" spellcheck="true">//check the turn to decide which player pays to another</span>
                            <span class="token function">if</span><span class="token punctuation">(</span>turn <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token keyword">begin</span>
                                    <span class="token comment" spellcheck="true">//if there is a house, the price is higher</span>
                                    <span class="token keyword">if</span> <span class="token punctuation">(</span>has_house<span class="token punctuation">[</span>p1_location<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">begin</span>
                                        <span class="token keyword">if</span> <span class="token punctuation">(</span>p1_money <span class="token operator">&lt;</span> <span class="token number">4000</span> <span class="token punctuation">)</span> <span class="token keyword">begin</span>
                                            p1_money <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">;</span>
                                            p2_money <span class="token operator">&lt;=</span> p2_money <span class="token operator">+</span> <span class="token number">4000</span><span class="token punctuation">;</span>
                                        <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token keyword">begin</span>
                                            p1_money <span class="token operator">&lt;=</span> p1_money <span class="token operator">-</span> <span class="token number">4000</span><span class="token punctuation">;</span>
                                            p2_money <span class="token operator">&lt;=</span> p2_money <span class="token operator">+</span> <span class="token number">4000</span><span class="token punctuation">;</span>
                                        <span class="token keyword">end</span>
                                        <span class="token keyword">if</span> <span class="token punctuation">(</span>p1_gpa <span class="token operator">&lt;</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token keyword">begin</span>
                                            p1_gpa <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">;</span>
                                        <span class="token keyword">end</span> <span class="token keyword">else</span>  <span class="token keyword">begin</span>
                                            p1_gpa <span class="token operator">&lt;=</span> p1_gpa <span class="token operator">-</span> <span class="token number">2</span><span class="token punctuation">;</span>
                                        <span class="token keyword">end</span>
                                    <span class="token comment" spellcheck="true">//if there is no house, the price is lower</span>
                                    <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token keyword">begin</span>
                                        <span class="token keyword">if</span> <span class="token punctuation">(</span>p1_money <span class="token operator">&lt;</span> <span class="token number">2000</span> <span class="token punctuation">)</span> <span class="token keyword">begin</span>
                                            p1_money <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">;</span>
                                            p2_money <span class="token operator">&lt;=</span> p2_money <span class="token operator">+</span> <span class="token number">2000</span><span class="token punctuation">;</span> 
                                        <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token keyword">begin</span>
                                            p1_money <span class="token operator">&lt;=</span> p1_money <span class="token operator">-</span> <span class="token number">2000</span><span class="token punctuation">;</span> 
                                            p2_money <span class="token operator">&lt;=</span> p2_money <span class="token operator">+</span> <span class="token number">2000</span><span class="token punctuation">;</span> 
                                        <span class="token keyword">end</span>

                                        <span class="token keyword">if</span> <span class="token punctuation">(</span>p1_gpa <span class="token operator">&lt;</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">begin</span>
                                            p1_gpa <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">;</span>
                                        <span class="token keyword">end</span> <span class="token keyword">else</span>  <span class="token keyword">begin</span>
                                            p1_gpa <span class="token operator">&lt;=</span> p1_gpa <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>
                                        <span class="token keyword">end</span>
                                    <span class="token keyword">end</span>

                            <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token keyword">begin</span>
                                    <span class="token comment" spellcheck="true">//if there is a house, the price is higher</span>
                                    <span class="token keyword">if</span> <span class="token punctuation">(</span>has_house<span class="token punctuation">[</span>p2_location<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">begin</span>
                                        <span class="token keyword">if</span> <span class="token punctuation">(</span>p2_money <span class="token operator">&lt;</span> <span class="token number">4000</span> <span class="token punctuation">)</span> <span class="token keyword">begin</span>
                                            p2_money <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">;</span>
                                            p1_money <span class="token operator">&lt;=</span> p1_money <span class="token operator">+</span> <span class="token number">4000</span><span class="token punctuation">;</span> 
                                        <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token keyword">begin</span>
                                            p2_money <span class="token operator">&lt;=</span> p2_money <span class="token operator">-</span> <span class="token number">4000</span><span class="token punctuation">;</span> 
                                            p1_money <span class="token operator">&lt;=</span> p1_money <span class="token operator">+</span> <span class="token number">4000</span><span class="token punctuation">;</span> 
                                        <span class="token keyword">end</span>

                                        <span class="token keyword">if</span> <span class="token punctuation">(</span>p2_gpa <span class="token operator">&lt;</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token keyword">begin</span>
                                            p2_gpa <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">;</span>
                                        <span class="token keyword">end</span> <span class="token keyword">else</span>  <span class="token keyword">begin</span>
                                            p2_gpa <span class="token operator">&lt;=</span> p2_gpa <span class="token operator">-</span> <span class="token number">2</span><span class="token punctuation">;</span>
                                        <span class="token keyword">end</span>
                                    <span class="token comment" spellcheck="true">//if there is no house, the price is lower</span>
                                    <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token keyword">begin</span>
                                        <span class="token keyword">if</span> <span class="token punctuation">(</span>p2_money <span class="token operator">&lt;</span> <span class="token number">2000</span> <span class="token punctuation">)</span> <span class="token keyword">begin</span>
                                            p2_money <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">;</span>
                                            p1_money <span class="token operator">&lt;=</span> p1_money <span class="token operator">+</span> <span class="token number">2000</span><span class="token punctuation">;</span> 
                                        <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token keyword">begin</span>
                                            p2_money <span class="token operator">&lt;=</span> p2_money <span class="token operator">-</span> <span class="token number">2000</span><span class="token punctuation">;</span> 
                                            p1_money <span class="token operator">&lt;=</span> p1_money <span class="token operator">+</span> <span class="token number">2000</span><span class="token punctuation">;</span> 
                                        <span class="token keyword">end</span>
                                        <span class="token keyword">if</span> <span class="token punctuation">(</span>p2_gpa <span class="token operator">&lt;</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">begin</span>
                                            p2_gpa <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">;</span>
                                        <span class="token keyword">end</span> <span class="token keyword">else</span>  <span class="token keyword">begin</span>
                                            p2_gpa <span class="token operator">&lt;=</span> p2_gpa <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>
                                        <span class="token keyword">end</span>
                                    <span class="token keyword">end</span>
                            <span class="token keyword">end</span>

                            <span class="token comment" spellcheck="true">//decide the next turn by checking the sleep state of both players</span>
                            turn <span class="token operator">&lt;=</span> <span class="token operator">~</span>turn<span class="token punctuation">;</span>
                            <span class="token function">if</span><span class="token punctuation">(</span>p1_sleep <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token keyword">begin</span>
                                turn <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">;</span>
                                p1_sleep <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">;</span>
                            <span class="token keyword">end</span>
                            <span class="token function">if</span><span class="token punctuation">(</span>p2_sleep <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token keyword">begin</span>
                                    turn <span class="token operator">&lt;=</span> <span class="token number">1</span><span class="token punctuation">;</span>
                                    p2_sleep <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">;</span>
                            <span class="token keyword">end</span>
                            state <span class="token operator">&lt;=</span> <span class="token number">3'b000</span><span class="token punctuation">;</span>
                        <span class="token keyword">end</span>

                    <span class="token comment" spellcheck="true">//state = 7, change the global_state to 2 and game over</span>
                    <span class="token number">3'b111</span><span class="token punctuation">:</span><span class="token keyword">begin</span>
                        numberInArduino <span class="token operator">&lt;=</span><span class="token number">16'hffff</span><span class="token punctuation">;</span>
                        global_state <span class="token operator">&lt;=</span> <span class="token number">2</span><span class="token punctuation">;</span>
                    <span class="token keyword">end</span>     
                    <span class="token keyword">default</span><span class="token punctuation">:</span> state <span class="token operator">&lt;=</span> <span class="token number">3'b000</span><span class="token punctuation">;</span>
                    <span class="token keyword">endcase</span> 
            <span class="token keyword">end</span>
        <span class="token keyword">end</span>
<span class="token keyword">end</span>












<span class="token comment" spellcheck="true">//------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="token comment" spellcheck="true">//Disp number in SWORD</span>
BCD_8 <span class="token function">BCD1_gpa</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token function">binary</span><span class="token punctuation">(</span>p1_gpa<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token function">bcd</span><span class="token punctuation">(</span>p1_gpa_bcd<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
BCD_8 <span class="token function">BCD2_gpa</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token function">binary</span><span class="token punctuation">(</span>p2_gpa<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token function">bcd</span><span class="token punctuation">(</span>p2_gpa_bcd<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
BCD_20 <span class="token function">BCD1_money</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token function">binary</span><span class="token punctuation">(</span>p1_money<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token function">bcd</span><span class="token punctuation">(</span>p1_money_bcd<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
BCD_20 <span class="token function">BCD2_money</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token function">binary</span><span class="token punctuation">(</span>p2_money<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token function">bcd</span><span class="token punctuation">(</span>p2_money_bcd<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">assign</span> numberInSWORD <span class="token operator">=</span> <span class="token punctuation">(</span>turn <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token operator">{</span>p1_gpa_bcd<span class="token punctuation">,</span><span class="token number">4'b0</span><span class="token punctuation">,</span>p1_money_bcd<span class="token operator">}</span> <span class="token punctuation">:</span> <span class="token operator">{</span>p2_gpa_bcd<span class="token punctuation">,</span><span class="token number">4'b0</span><span class="token punctuation">,</span>p2_money_bcd<span class="token operator">}</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">//handle ps2 code</span>
<span class="token important">always@</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token keyword">begin</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>sw_input <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">begin</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>ps2_data_cur<span class="token punctuation">[</span><span class="token number">8</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">0</span> <span class="token punctuation">)</span> <span class="token keyword">begin</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>ps2_data_cur<span class="token punctuation">[</span><span class="token number">7</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">8'h69</span><span class="token punctuation">)</span> <span class="token keyword">begin</span>
                dice <span class="token operator">&lt;=</span> <span class="token number">1</span><span class="token punctuation">;</span>
            <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>ps2_data_cur<span class="token punctuation">[</span><span class="token number">7</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">8'h72</span><span class="token punctuation">)</span> <span class="token keyword">begin</span>
                yes <span class="token operator">&lt;=</span> <span class="token number">1</span><span class="token punctuation">;</span>
            <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>ps2_data_cur<span class="token punctuation">[</span><span class="token number">7</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">8'h7a</span><span class="token punctuation">)</span> <span class="token keyword">begin</span>
                no <span class="token operator">&lt;=</span> <span class="token number">1</span><span class="token punctuation">;</span>

            <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>ps2_data_cur<span class="token punctuation">[</span><span class="token number">7</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">8'h1C</span><span class="token punctuation">)</span> <span class="token keyword">begin</span>
                dice <span class="token operator">&lt;=</span> <span class="token number">1</span><span class="token punctuation">;</span>
            <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>ps2_data_cur<span class="token punctuation">[</span><span class="token number">7</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">8'h1B</span><span class="token punctuation">)</span> <span class="token keyword">begin</span>
                yes <span class="token operator">&lt;=</span> <span class="token number">1</span><span class="token punctuation">;</span>
            <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>ps2_data_cur<span class="token punctuation">[</span><span class="token number">7</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">8'h23</span><span class="token punctuation">)</span> <span class="token keyword">begin</span>
                no <span class="token operator">&lt;=</span> <span class="token number">1</span><span class="token punctuation">;</span>
            <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token keyword">begin</span>
                    yes <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">;</span>
                    no <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">;</span>
                    dice <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">;</span>
            <span class="token keyword">end</span>

            <span class="token comment" spellcheck="true">// case(ps2_data_cur[7:0])</span>
            <span class="token comment" spellcheck="true">//     8'h69:dice &lt;= 1;</span>
            <span class="token comment" spellcheck="true">//     8'h72:yes &lt;= 1;</span>
            <span class="token comment" spellcheck="true">//     8'h7a:no &lt;= 1;</span>
            <span class="token comment" spellcheck="true">//     default:begin</span>
            <span class="token comment" spellcheck="true">//         yes &lt;= 0;</span>
            <span class="token comment" spellcheck="true">//         no &lt;= 0;</span>
            <span class="token comment" spellcheck="true">//         dice &lt;= 0;</span>
            <span class="token comment" spellcheck="true">//     end</span>
            <span class="token comment" spellcheck="true">// endcase</span>
        <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token keyword">begin</span>
            yes <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">;</span>
            no <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">;</span>
            dice <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token keyword">end</span>

    <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token keyword">begin</span>
        yes <span class="token operator">&lt;=</span> yes_AJ<span class="token punctuation">;</span>
        no <span class="token operator">&lt;=</span> no_AJ<span class="token punctuation">;</span>
        dice <span class="token operator">&lt;=</span> dice_AJ<span class="token punctuation">;</span>
    <span class="token keyword">end</span>
<span class="token keyword">end</span>

<span class="token comment" spellcheck="true">//ROM address </span>
<span class="token important">always@</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">begin</span> 
    game_over_data_addr <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    house_data_addr <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    player1_data_addr <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    player2_data_addr <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    event1_data_addr <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    event2_data_addr <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    event3_data_addr <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    event4_data_addr <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    event5_data_addr <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    event6_data_addr <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">;</span>

    background_data_addr <span class="token operator">&lt;=</span> <span class="token punctuation">(</span>y_pos <span class="token operator">/</span> <span class="token number">2</span> <span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">10'd320</span> <span class="token operator">+</span> <span class="token punctuation">(</span>x_pos<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    start_data_addr <span class="token operator">&lt;=</span> <span class="token punctuation">(</span>y_pos <span class="token operator">/</span> <span class="token number">2</span> <span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">10'd320</span> <span class="token operator">+</span> <span class="token punctuation">(</span>x_pos<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>global_state <span class="token operator">==</span> <span class="token number">2</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">>=</span> <span class="token number">140</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">&lt;</span> <span class="token number">500</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">>=</span> <span class="token number">210</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">&lt;</span> <span class="token number">270</span><span class="token punctuation">)</span> <span class="token keyword">begin</span>
        game_over_data_addr <span class="token operator">&lt;=</span> <span class="token punctuation">(</span>y_pos <span class="token operator">-</span> <span class="token number">210</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">360</span> <span class="token operator">+</span> <span class="token punctuation">(</span>x_pos <span class="token operator">-</span> <span class="token number">140</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">end</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>show_event<span class="token operator">!=</span><span class="token number">4'b1111</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">>=</span> <span class="token number">200</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">&lt;</span> <span class="token number">440</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">>=</span> <span class="token number">150</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">&lt;</span> <span class="token number">330</span><span class="token punctuation">)</span> <span class="token keyword">begin</span>
        <span class="token keyword">case</span> <span class="token punctuation">(</span>show_event<span class="token punctuation">)</span>
            <span class="token number">4'b0001</span><span class="token punctuation">:</span><span class="token keyword">begin</span>
                event1_data_addr <span class="token operator">&lt;=</span> <span class="token punctuation">(</span>y_pos <span class="token operator">-</span> <span class="token number">150</span><span class="token punctuation">)</span><span class="token operator">/</span><span class="token number">2</span> <span class="token operator">*</span> <span class="token number">120</span> <span class="token operator">+</span> <span class="token punctuation">(</span>x_pos <span class="token operator">-</span> <span class="token number">200</span><span class="token punctuation">)</span><span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">;</span>
            <span class="token keyword">end</span>
            <span class="token number">4'b0010</span><span class="token punctuation">:</span><span class="token keyword">begin</span>
                event2_data_addr <span class="token operator">&lt;=</span> <span class="token punctuation">(</span>y_pos <span class="token operator">-</span> <span class="token number">150</span><span class="token punctuation">)</span><span class="token operator">/</span><span class="token number">2</span> <span class="token operator">*</span> <span class="token number">120</span> <span class="token operator">+</span> <span class="token punctuation">(</span>x_pos <span class="token operator">-</span> <span class="token number">200</span><span class="token punctuation">)</span><span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">;</span>
            <span class="token keyword">end</span>
            <span class="token number">4'b0011</span><span class="token punctuation">:</span><span class="token keyword">begin</span>
                event3_data_addr <span class="token operator">&lt;=</span> <span class="token punctuation">(</span>y_pos <span class="token operator">-</span> <span class="token number">150</span><span class="token punctuation">)</span><span class="token operator">/</span><span class="token number">2</span> <span class="token operator">*</span> <span class="token number">120</span> <span class="token operator">+</span> <span class="token punctuation">(</span>x_pos <span class="token operator">-</span> <span class="token number">200</span><span class="token punctuation">)</span><span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">;</span>
            <span class="token keyword">end</span>
            <span class="token number">4'b0100</span><span class="token punctuation">:</span><span class="token keyword">begin</span>
                event4_data_addr <span class="token operator">&lt;=</span> <span class="token punctuation">(</span>y_pos <span class="token operator">-</span> <span class="token number">150</span><span class="token punctuation">)</span><span class="token operator">/</span><span class="token number">2</span> <span class="token operator">*</span> <span class="token number">120</span> <span class="token operator">+</span> <span class="token punctuation">(</span>x_pos <span class="token operator">-</span> <span class="token number">200</span><span class="token punctuation">)</span><span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">;</span>
            <span class="token keyword">end</span>
            <span class="token number">4'b0101</span><span class="token punctuation">:</span><span class="token keyword">begin</span>
                event5_data_addr <span class="token operator">&lt;=</span> <span class="token punctuation">(</span>y_pos <span class="token operator">-</span> <span class="token number">150</span><span class="token punctuation">)</span><span class="token operator">/</span><span class="token number">2</span> <span class="token operator">*</span> <span class="token number">120</span> <span class="token operator">+</span> <span class="token punctuation">(</span>x_pos <span class="token operator">-</span> <span class="token number">200</span><span class="token punctuation">)</span><span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">;</span>
            <span class="token keyword">end</span>
            <span class="token number">4'b0110</span><span class="token punctuation">:</span><span class="token keyword">begin</span>
                event6_data_addr <span class="token operator">&lt;=</span> <span class="token punctuation">(</span>y_pos <span class="token operator">-</span> <span class="token number">150</span><span class="token punctuation">)</span><span class="token operator">/</span><span class="token number">2</span> <span class="token operator">*</span> <span class="token number">120</span> <span class="token operator">+</span> <span class="token punctuation">(</span>x_pos <span class="token operator">-</span> <span class="token number">200</span><span class="token punctuation">)</span><span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">;</span>
            <span class="token keyword">end</span>
            <span class="token keyword">default</span><span class="token punctuation">:</span> <span class="token keyword">begin</span>
                    event1_data_addr <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">;</span>
                    event2_data_addr <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">;</span>
                    event3_data_addr <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">;</span>
                    event4_data_addr <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">;</span>
                    event5_data_addr <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">;</span>
                    event6_data_addr <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">;</span>
            <span class="token keyword">end</span>
        <span class="token keyword">endcase</span>
    <span class="token keyword">end</span>

    <span class="token function">if</span><span class="token punctuation">(</span>has_house<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">>=</span> <span class="token number">96</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">&lt;</span> <span class="token number">144</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">>=</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">&lt;</span> <span class="token number">48</span><span class="token punctuation">)</span><span class="token keyword">begin</span>
        house_data_addr <span class="token operator">&lt;=</span> y_pos <span class="token operator">*</span> <span class="token number">48</span> <span class="token operator">+</span> <span class="token punctuation">(</span>x_pos <span class="token operator">-</span> <span class="token number">96</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">end</span>

    <span class="token function">if</span><span class="token punctuation">(</span>has_house<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">>=</span> <span class="token number">229</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">&lt;</span> <span class="token number">277</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">>=</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">&lt;</span> <span class="token number">48</span><span class="token punctuation">)</span><span class="token keyword">begin</span>
        house_data_addr <span class="token operator">&lt;=</span> y_pos <span class="token operator">*</span> <span class="token number">48</span> <span class="token operator">+</span> <span class="token punctuation">(</span>x_pos <span class="token operator">-</span> <span class="token number">229</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">end</span>

    <span class="token function">if</span><span class="token punctuation">(</span>has_house<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">>=</span> <span class="token number">362</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">&lt;</span> <span class="token number">410</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">>=</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">&lt;</span> <span class="token number">48</span><span class="token punctuation">)</span><span class="token keyword">begin</span>
        house_data_addr <span class="token operator">&lt;=</span> y_pos <span class="token operator">*</span> <span class="token number">48</span> <span class="token operator">+</span> <span class="token punctuation">(</span>x_pos <span class="token operator">-</span> <span class="token number">362</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">end</span>

    <span class="token function">if</span><span class="token punctuation">(</span>has_house<span class="token punctuation">[</span><span class="token number">7</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">>=</span> <span class="token number">589</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">&lt;</span> <span class="token number">637</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">>=</span> <span class="token number">165</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">&lt;</span> <span class="token number">213</span><span class="token punctuation">)</span><span class="token keyword">begin</span>
        house_data_addr <span class="token operator">&lt;=</span> <span class="token punctuation">(</span>y_pos <span class="token operator">-</span> <span class="token number">165</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">48</span> <span class="token operator">+</span> <span class="token punctuation">(</span>x_pos <span class="token operator">-</span> <span class="token number">589</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">end</span>

    <span class="token function">if</span><span class="token punctuation">(</span>has_house<span class="token punctuation">[</span><span class="token number">8</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">>=</span> <span class="token number">589</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">&lt;</span> <span class="token number">637</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">>=</span> <span class="token number">259</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">&lt;</span> <span class="token number">307</span><span class="token punctuation">)</span><span class="token keyword">begin</span>
        house_data_addr <span class="token operator">&lt;=</span> <span class="token punctuation">(</span>y_pos <span class="token operator">-</span> <span class="token number">259</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">48</span> <span class="token operator">+</span> <span class="token punctuation">(</span>x_pos <span class="token operator">-</span> <span class="token number">589</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">end</span>    

    <span class="token function">if</span><span class="token punctuation">(</span>has_house<span class="token punctuation">[</span><span class="token number">12</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">>=</span> <span class="token number">362</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">&lt;</span> <span class="token number">410</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">>=</span> <span class="token number">428</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">&lt;</span> <span class="token number">476</span><span class="token punctuation">)</span><span class="token keyword">begin</span>
        house_data_addr <span class="token operator">&lt;=</span> <span class="token punctuation">(</span>y_pos <span class="token operator">-</span> <span class="token number">428</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">48</span> <span class="token operator">+</span> <span class="token punctuation">(</span>x_pos <span class="token operator">-</span> <span class="token number">362</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">end</span>

    <span class="token function">if</span><span class="token punctuation">(</span>has_house<span class="token punctuation">[</span><span class="token number">13</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">>=</span> <span class="token number">229</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">&lt;</span> <span class="token number">277</span> <span class="token operator">&amp;&amp;</span>  y_pos <span class="token operator">>=</span> <span class="token number">428</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">&lt;</span> <span class="token number">476</span><span class="token punctuation">)</span><span class="token keyword">begin</span>
        house_data_addr <span class="token operator">&lt;=</span> <span class="token punctuation">(</span>y_pos <span class="token operator">-</span> <span class="token number">428</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">48</span> <span class="token operator">+</span> <span class="token punctuation">(</span>x_pos <span class="token operator">-</span> <span class="token number">229</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">end</span>

    <span class="token function">if</span><span class="token punctuation">(</span>has_house<span class="token punctuation">[</span><span class="token number">17</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">>=</span> <span class="token number">3</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">&lt;</span> <span class="token number">51</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">>=</span> <span class="token number">259</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">&lt;</span> <span class="token number">307</span><span class="token punctuation">)</span><span class="token keyword">begin</span>
        house_data_addr <span class="token operator">&lt;=</span> <span class="token punctuation">(</span>y_pos <span class="token operator">-</span> <span class="token number">259</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">48</span> <span class="token operator">+</span> <span class="token punctuation">(</span>x_pos <span class="token operator">-</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">end</span>

    <span class="token function">if</span><span class="token punctuation">(</span>has_house<span class="token punctuation">[</span><span class="token number">18</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">>=</span> <span class="token number">3</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">&lt;</span> <span class="token number">51</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">>=</span> <span class="token number">165</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">&lt;</span> <span class="token number">213</span><span class="token punctuation">)</span><span class="token keyword">begin</span>
        house_data_addr <span class="token operator">&lt;=</span> <span class="token punctuation">(</span>y_pos <span class="token operator">-</span> <span class="token number">165</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">48</span> <span class="token operator">+</span> <span class="token punctuation">(</span>x_pos <span class="token operator">-</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">end</span>

    <span class="token function">if</span><span class="token punctuation">(</span>has_house<span class="token punctuation">[</span><span class="token number">19</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">>=</span> <span class="token number">3</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">&lt;</span> <span class="token number">51</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">>=</span> <span class="token number">71</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">&lt;</span> <span class="token number">119</span><span class="token punctuation">)</span><span class="token keyword">begin</span>
        house_data_addr <span class="token operator">&lt;=</span> <span class="token punctuation">(</span>y_pos <span class="token operator">-</span> <span class="token number">71</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">48</span> <span class="token operator">+</span> <span class="token punctuation">(</span>x_pos <span class="token operator">-</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">end</span>



    <span class="token function">if</span><span class="token punctuation">(</span>p1_location <span class="token operator">==</span> <span class="token number">5'b00000</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">>=</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">&lt;</span> <span class="token number">48</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">>=</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">&lt;</span> <span class="token number">48</span><span class="token punctuation">)</span> <span class="token keyword">begin</span>
        player1_data_addr <span class="token operator">&lt;=</span> <span class="token punctuation">(</span>y_pos <span class="token operator">-</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">48</span><span class="token operator">+</span><span class="token punctuation">(</span>x_pos <span class="token operator">-</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token function">if</span><span class="token punctuation">(</span>p1_location <span class="token operator">==</span> <span class="token number">5'b00001</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">>=</span> <span class="token number">54</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">&lt;</span> <span class="token number">102</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">>=</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">&lt;</span> <span class="token number">48</span><span class="token punctuation">)</span> <span class="token keyword">begin</span>
        player1_data_addr <span class="token operator">&lt;=</span> <span class="token punctuation">(</span>y_pos <span class="token operator">-</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">48</span><span class="token operator">+</span><span class="token punctuation">(</span>x_pos <span class="token operator">-</span> <span class="token number">54</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token function">if</span><span class="token punctuation">(</span>p1_location <span class="token operator">==</span> <span class="token number">5'b00010</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">>=</span> <span class="token number">187</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">&lt;</span> <span class="token number">235</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">>=</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">&lt;</span> <span class="token number">48</span><span class="token punctuation">)</span> <span class="token keyword">begin</span>
        player1_data_addr <span class="token operator">&lt;=</span> <span class="token punctuation">(</span>y_pos <span class="token operator">-</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">48</span><span class="token operator">+</span><span class="token punctuation">(</span>x_pos <span class="token operator">-</span> <span class="token number">187</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token function">if</span><span class="token punctuation">(</span>p1_location <span class="token operator">==</span> <span class="token number">5'b00011</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">>=</span> <span class="token number">320</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">&lt;</span> <span class="token number">368</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">>=</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">&lt;</span> <span class="token number">48</span><span class="token punctuation">)</span> <span class="token keyword">begin</span>
        player1_data_addr <span class="token operator">&lt;=</span> <span class="token punctuation">(</span>y_pos <span class="token operator">-</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">48</span><span class="token operator">+</span><span class="token punctuation">(</span>x_pos <span class="token operator">-</span> <span class="token number">320</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token function">if</span><span class="token punctuation">(</span>p1_location <span class="token operator">==</span> <span class="token number">5'b00100</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">>=</span> <span class="token number">453</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">&lt;</span> <span class="token number">501</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">>=</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">&lt;</span> <span class="token number">48</span><span class="token punctuation">)</span> <span class="token keyword">begin</span>
        player1_data_addr <span class="token operator">&lt;=</span> <span class="token punctuation">(</span>y_pos <span class="token operator">-</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">48</span><span class="token operator">+</span><span class="token punctuation">(</span>x_pos <span class="token operator">-</span> <span class="token number">453</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token function">if</span><span class="token punctuation">(</span>p1_location <span class="token operator">==</span> <span class="token number">5'b00101</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">>=</span> <span class="token number">586</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">&lt;</span> <span class="token number">634</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">>=</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">&lt;</span> <span class="token number">48</span><span class="token punctuation">)</span> <span class="token keyword">begin</span>
        player1_data_addr <span class="token operator">&lt;=</span> <span class="token punctuation">(</span>y_pos <span class="token operator">-</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">48</span><span class="token operator">+</span><span class="token punctuation">(</span>x_pos <span class="token operator">-</span> <span class="token number">586</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token function">if</span><span class="token punctuation">(</span>p1_location <span class="token operator">==</span> <span class="token number">5'b00110</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">>=</span> <span class="token number">586</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">&lt;</span> <span class="token number">634</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">>=</span> <span class="token number">48</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">&lt;</span> <span class="token number">96</span><span class="token punctuation">)</span> <span class="token keyword">begin</span>
        player1_data_addr <span class="token operator">&lt;=</span> <span class="token punctuation">(</span>y_pos <span class="token operator">-</span> <span class="token number">48</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">48</span><span class="token operator">+</span><span class="token punctuation">(</span>x_pos <span class="token operator">-</span> <span class="token number">586</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token function">if</span><span class="token punctuation">(</span>p1_location <span class="token operator">==</span> <span class="token number">5'b00111</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">>=</span> <span class="token number">586</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">&lt;</span> <span class="token number">634</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">>=</span> <span class="token number">142</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">&lt;</span> <span class="token number">190</span><span class="token punctuation">)</span> <span class="token keyword">begin</span>
        player1_data_addr <span class="token operator">&lt;=</span> <span class="token punctuation">(</span>y_pos <span class="token operator">-</span> <span class="token number">142</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">48</span><span class="token operator">+</span><span class="token punctuation">(</span>x_pos <span class="token operator">-</span> <span class="token number">586</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token function">if</span><span class="token punctuation">(</span>p1_location <span class="token operator">==</span> <span class="token number">5'b01000</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">>=</span> <span class="token number">586</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">&lt;</span> <span class="token number">634</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">>=</span> <span class="token number">236</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">&lt;</span> <span class="token number">284</span><span class="token punctuation">)</span> <span class="token keyword">begin</span>
        player1_data_addr <span class="token operator">&lt;=</span> <span class="token punctuation">(</span>y_pos <span class="token operator">-</span> <span class="token number">236</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">48</span><span class="token operator">+</span><span class="token punctuation">(</span>x_pos <span class="token operator">-</span> <span class="token number">586</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token function">if</span><span class="token punctuation">(</span>p1_location <span class="token operator">==</span> <span class="token number">5'b01001</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">>=</span> <span class="token number">586</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">&lt;</span> <span class="token number">634</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">>=</span> <span class="token number">330</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">&lt;</span> <span class="token number">378</span><span class="token punctuation">)</span> <span class="token keyword">begin</span>
        player1_data_addr <span class="token operator">&lt;=</span> <span class="token punctuation">(</span>y_pos <span class="token operator">-</span> <span class="token number">330</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">48</span><span class="token operator">+</span><span class="token punctuation">(</span>x_pos <span class="token operator">-</span> <span class="token number">586</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token function">if</span><span class="token punctuation">(</span>p1_location <span class="token operator">==</span> <span class="token number">5'b01010</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">>=</span> <span class="token number">586</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">&lt;</span> <span class="token number">634</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">>=</span> <span class="token number">424</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">&lt;</span> <span class="token number">472</span><span class="token punctuation">)</span> <span class="token keyword">begin</span>
        player1_data_addr <span class="token operator">&lt;=</span> <span class="token punctuation">(</span>y_pos <span class="token operator">-</span> <span class="token number">424</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">48</span><span class="token operator">+</span><span class="token punctuation">(</span>x_pos <span class="token operator">-</span> <span class="token number">586</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token function">if</span><span class="token punctuation">(</span>p1_location <span class="token operator">==</span> <span class="token number">5'b01011</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">>=</span> <span class="token number">453</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">&lt;</span> <span class="token number">501</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">>=</span> <span class="token number">424</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">&lt;</span> <span class="token number">472</span><span class="token punctuation">)</span> <span class="token keyword">begin</span>
        player1_data_addr <span class="token operator">&lt;=</span> <span class="token punctuation">(</span>y_pos <span class="token operator">-</span> <span class="token number">424</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">48</span><span class="token operator">+</span><span class="token punctuation">(</span>x_pos <span class="token operator">-</span> <span class="token number">453</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token function">if</span><span class="token punctuation">(</span>p1_location <span class="token operator">==</span> <span class="token number">5'b01100</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">>=</span> <span class="token number">320</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">&lt;</span> <span class="token number">368</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">>=</span> <span class="token number">424</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">&lt;</span> <span class="token number">472</span><span class="token punctuation">)</span> <span class="token keyword">begin</span>
        player1_data_addr <span class="token operator">&lt;=</span> <span class="token punctuation">(</span>y_pos <span class="token operator">-</span> <span class="token number">424</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">48</span><span class="token operator">+</span><span class="token punctuation">(</span>x_pos <span class="token operator">-</span> <span class="token number">320</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token function">if</span><span class="token punctuation">(</span>p1_location <span class="token operator">==</span> <span class="token number">5'b01101</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">>=</span> <span class="token number">187</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">&lt;</span> <span class="token number">235</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">>=</span> <span class="token number">424</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">&lt;</span> <span class="token number">472</span><span class="token punctuation">)</span> <span class="token keyword">begin</span>
        player1_data_addr <span class="token operator">&lt;=</span> <span class="token punctuation">(</span>y_pos <span class="token operator">-</span> <span class="token number">424</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">48</span><span class="token operator">+</span><span class="token punctuation">(</span>x_pos <span class="token operator">-</span> <span class="token number">187</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token function">if</span><span class="token punctuation">(</span>p1_location <span class="token operator">==</span> <span class="token number">5'b01110</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">>=</span> <span class="token number">54</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">&lt;</span> <span class="token number">102</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">>=</span> <span class="token number">424</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">&lt;</span> <span class="token number">472</span><span class="token punctuation">)</span> <span class="token keyword">begin</span>
        player1_data_addr <span class="token operator">&lt;=</span> <span class="token punctuation">(</span>y_pos <span class="token operator">-</span> <span class="token number">424</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">48</span><span class="token operator">+</span><span class="token punctuation">(</span>x_pos <span class="token operator">-</span> <span class="token number">54</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token function">if</span><span class="token punctuation">(</span>p1_location <span class="token operator">==</span> <span class="token number">5'b01111</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">>=</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">&lt;</span> <span class="token number">48</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">>=</span> <span class="token number">424</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">&lt;</span> <span class="token number">472</span><span class="token punctuation">)</span> <span class="token keyword">begin</span>
        player1_data_addr <span class="token operator">&lt;=</span> <span class="token punctuation">(</span>y_pos <span class="token operator">-</span> <span class="token number">424</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">48</span><span class="token operator">+</span><span class="token punctuation">(</span>x_pos <span class="token operator">-</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token function">if</span><span class="token punctuation">(</span>p1_location <span class="token operator">==</span> <span class="token number">5'b10000</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">>=</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">&lt;</span> <span class="token number">48</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">>=</span> <span class="token number">330</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">&lt;</span> <span class="token number">378</span><span class="token punctuation">)</span> <span class="token keyword">begin</span>
        player1_data_addr <span class="token operator">&lt;=</span> <span class="token punctuation">(</span>y_pos <span class="token operator">-</span> <span class="token number">330</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">48</span><span class="token operator">+</span><span class="token punctuation">(</span>x_pos <span class="token operator">-</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token function">if</span><span class="token punctuation">(</span>p1_location <span class="token operator">==</span> <span class="token number">5'b10001</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">>=</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">&lt;</span> <span class="token number">48</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">>=</span> <span class="token number">236</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">&lt;</span> <span class="token number">284</span><span class="token punctuation">)</span> <span class="token keyword">begin</span>
        player1_data_addr <span class="token operator">&lt;=</span> <span class="token punctuation">(</span>y_pos <span class="token operator">-</span> <span class="token number">236</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">48</span><span class="token operator">+</span><span class="token punctuation">(</span>x_pos <span class="token operator">-</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token function">if</span><span class="token punctuation">(</span>p1_location <span class="token operator">==</span> <span class="token number">5'b10010</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">>=</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">&lt;</span> <span class="token number">48</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">>=</span> <span class="token number">142</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">&lt;</span> <span class="token number">190</span><span class="token punctuation">)</span> <span class="token keyword">begin</span>
        player1_data_addr <span class="token operator">&lt;=</span> <span class="token punctuation">(</span>y_pos <span class="token operator">-</span> <span class="token number">142</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">48</span><span class="token operator">+</span><span class="token punctuation">(</span>x_pos <span class="token operator">-</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token function">if</span><span class="token punctuation">(</span>p1_location <span class="token operator">==</span> <span class="token number">5'b10011</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">>=</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">&lt;</span> <span class="token number">48</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">>=</span> <span class="token number">48</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">&lt;</span> <span class="token number">96</span><span class="token punctuation">)</span> <span class="token keyword">begin</span>
        player1_data_addr <span class="token operator">&lt;=</span> <span class="token punctuation">(</span>y_pos <span class="token operator">-</span> <span class="token number">48</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">48</span><span class="token operator">+</span><span class="token punctuation">(</span>x_pos <span class="token operator">-</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">end</span>            

    <span class="token function">if</span><span class="token punctuation">(</span>p2_location <span class="token operator">==</span> <span class="token number">5'b00000</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">>=</span> <span class="token number">6</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">&lt;</span> <span class="token number">54</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">>=</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">&lt;</span> <span class="token number">48</span><span class="token punctuation">)</span> <span class="token keyword">begin</span>
            player2_data_addr <span class="token operator">&lt;=</span> <span class="token punctuation">(</span>y_pos <span class="token operator">-</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">48</span><span class="token operator">+</span><span class="token punctuation">(</span>x_pos <span class="token operator">-</span> <span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    
    <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token function">if</span><span class="token punctuation">(</span>p2_location <span class="token operator">==</span> <span class="token number">5'b00001</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">>=</span> <span class="token number">139</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">&lt;</span> <span class="token number">187</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">>=</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">&lt;</span> <span class="token number">48</span><span class="token punctuation">)</span> <span class="token keyword">begin</span>
            player2_data_addr <span class="token operator">&lt;=</span> <span class="token punctuation">(</span>y_pos <span class="token operator">-</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">48</span><span class="token operator">+</span><span class="token punctuation">(</span>x_pos <span class="token operator">-</span> <span class="token number">139</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token function">if</span><span class="token punctuation">(</span>p2_location <span class="token operator">==</span> <span class="token number">5'b00010</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">>=</span> <span class="token number">272</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">&lt;</span> <span class="token number">320</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">>=</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">&lt;</span> <span class="token number">48</span><span class="token punctuation">)</span> <span class="token keyword">begin</span>
            player2_data_addr <span class="token operator">&lt;=</span> <span class="token punctuation">(</span>y_pos <span class="token operator">-</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">48</span><span class="token operator">+</span><span class="token punctuation">(</span>x_pos <span class="token operator">-</span> <span class="token number">320</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token function">if</span><span class="token punctuation">(</span>p2_location <span class="token operator">==</span> <span class="token number">5'b00011</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">>=</span> <span class="token number">405</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">&lt;</span> <span class="token number">453</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">>=</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">&lt;</span> <span class="token number">48</span><span class="token punctuation">)</span> <span class="token keyword">begin</span>
            player2_data_addr <span class="token operator">&lt;=</span> <span class="token punctuation">(</span>y_pos <span class="token operator">-</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">48</span><span class="token operator">+</span><span class="token punctuation">(</span>x_pos <span class="token operator">-</span> <span class="token number">405</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token function">if</span><span class="token punctuation">(</span>p2_location <span class="token operator">==</span> <span class="token number">5'b00100</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">>=</span> <span class="token number">538</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">&lt;</span> <span class="token number">586</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">>=</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">&lt;</span> <span class="token number">48</span><span class="token punctuation">)</span> <span class="token keyword">begin</span>
            player2_data_addr <span class="token operator">&lt;=</span> <span class="token punctuation">(</span>y_pos <span class="token operator">-</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">48</span><span class="token operator">+</span><span class="token punctuation">(</span>x_pos <span class="token operator">-</span> <span class="token number">538</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token function">if</span><span class="token punctuation">(</span>p2_location <span class="token operator">==</span> <span class="token number">5'b00101</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">>=</span> <span class="token number">586</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">&lt;</span> <span class="token number">634</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">>=</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">&lt;</span> <span class="token number">48</span><span class="token punctuation">)</span> <span class="token keyword">begin</span>
            player2_data_addr <span class="token operator">&lt;=</span> <span class="token punctuation">(</span>y_pos <span class="token operator">-</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">48</span><span class="token operator">+</span><span class="token punctuation">(</span>x_pos <span class="token operator">-</span> <span class="token number">586</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token function">if</span><span class="token punctuation">(</span>p2_location <span class="token operator">==</span> <span class="token number">5'b00110</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">>=</span> <span class="token number">586</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">&lt;</span> <span class="token number">634</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">>=</span> <span class="token number">94</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">&lt;</span> <span class="token number">142</span><span class="token punctuation">)</span> <span class="token keyword">begin</span>
            player2_data_addr <span class="token operator">&lt;=</span> <span class="token punctuation">(</span>y_pos <span class="token operator">-</span> <span class="token number">94</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">48</span><span class="token operator">+</span><span class="token punctuation">(</span>x_pos <span class="token operator">-</span> <span class="token number">586</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token function">if</span><span class="token punctuation">(</span>p2_location <span class="token operator">==</span> <span class="token number">5'b00111</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">>=</span> <span class="token number">586</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">&lt;</span> <span class="token number">634</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">>=</span> <span class="token number">188</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">&lt;</span> <span class="token number">236</span><span class="token punctuation">)</span> <span class="token keyword">begin</span>
            player2_data_addr <span class="token operator">&lt;=</span> <span class="token punctuation">(</span>y_pos <span class="token operator">-</span> <span class="token number">188</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">48</span><span class="token operator">+</span><span class="token punctuation">(</span>x_pos <span class="token operator">-</span> <span class="token number">586</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token function">if</span><span class="token punctuation">(</span>p2_location <span class="token operator">==</span> <span class="token number">5'b01000</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">>=</span> <span class="token number">586</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">&lt;</span> <span class="token number">634</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">>=</span> <span class="token number">282</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">&lt;</span> <span class="token number">330</span><span class="token punctuation">)</span> <span class="token keyword">begin</span>
            player2_data_addr <span class="token operator">&lt;=</span> <span class="token punctuation">(</span>y_pos <span class="token operator">-</span> <span class="token number">282</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">48</span><span class="token operator">+</span><span class="token punctuation">(</span>x_pos <span class="token operator">-</span> <span class="token number">586</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token function">if</span><span class="token punctuation">(</span>p2_location <span class="token operator">==</span> <span class="token number">5'b01001</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">>=</span> <span class="token number">586</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">&lt;</span> <span class="token number">634</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">>=</span> <span class="token number">376</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">&lt;</span> <span class="token number">424</span><span class="token punctuation">)</span> <span class="token keyword">begin</span>
            player2_data_addr <span class="token operator">&lt;=</span> <span class="token punctuation">(</span>y_pos <span class="token operator">-</span> <span class="token number">376</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">48</span><span class="token operator">+</span><span class="token punctuation">(</span>x_pos <span class="token operator">-</span> <span class="token number">586</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token function">if</span><span class="token punctuation">(</span>p2_location <span class="token operator">==</span> <span class="token number">5'b01010</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">>=</span> <span class="token number">586</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">&lt;</span> <span class="token number">634</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">>=</span> <span class="token number">424</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">&lt;</span> <span class="token number">472</span><span class="token punctuation">)</span> <span class="token keyword">begin</span>
            player2_data_addr <span class="token operator">&lt;=</span> <span class="token punctuation">(</span>y_pos <span class="token operator">-</span> <span class="token number">424</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">48</span><span class="token operator">+</span><span class="token punctuation">(</span>x_pos <span class="token operator">-</span> <span class="token number">586</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token function">if</span><span class="token punctuation">(</span>p2_location <span class="token operator">==</span> <span class="token number">5'b01011</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">>=</span> <span class="token number">538</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">&lt;</span> <span class="token number">586</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">>=</span> <span class="token number">424</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">&lt;</span> <span class="token number">472</span><span class="token punctuation">)</span> <span class="token keyword">begin</span>
            player2_data_addr <span class="token operator">&lt;=</span> <span class="token punctuation">(</span>y_pos <span class="token operator">-</span> <span class="token number">424</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">48</span><span class="token operator">+</span><span class="token punctuation">(</span>x_pos <span class="token operator">-</span> <span class="token number">538</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token function">if</span><span class="token punctuation">(</span>p2_location <span class="token operator">==</span> <span class="token number">5'b01100</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">>=</span> <span class="token number">405</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">&lt;</span> <span class="token number">453</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">>=</span> <span class="token number">424</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">&lt;</span> <span class="token number">472</span><span class="token punctuation">)</span> <span class="token keyword">begin</span>
            player2_data_addr <span class="token operator">&lt;=</span> <span class="token punctuation">(</span>y_pos <span class="token operator">-</span> <span class="token number">424</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">48</span><span class="token operator">+</span><span class="token punctuation">(</span>x_pos <span class="token operator">-</span> <span class="token number">405</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token function">if</span><span class="token punctuation">(</span>p2_location <span class="token operator">==</span> <span class="token number">5'b01101</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">>=</span> <span class="token number">272</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">&lt;</span> <span class="token number">320</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">>=</span> <span class="token number">424</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">&lt;</span> <span class="token number">472</span><span class="token punctuation">)</span> <span class="token keyword">begin</span>
            player2_data_addr <span class="token operator">&lt;=</span> <span class="token punctuation">(</span>y_pos <span class="token operator">-</span> <span class="token number">424</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">48</span><span class="token operator">+</span><span class="token punctuation">(</span>x_pos <span class="token operator">-</span> <span class="token number">272</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token function">if</span><span class="token punctuation">(</span>p2_location <span class="token operator">==</span> <span class="token number">5'b01110</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">>=</span> <span class="token number">139</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">&lt;</span> <span class="token number">187</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">>=</span> <span class="token number">424</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">&lt;</span> <span class="token number">472</span><span class="token punctuation">)</span> <span class="token keyword">begin</span>
            player2_data_addr <span class="token operator">&lt;=</span> <span class="token punctuation">(</span>y_pos <span class="token operator">-</span> <span class="token number">424</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">48</span><span class="token operator">+</span><span class="token punctuation">(</span>x_pos <span class="token operator">-</span> <span class="token number">139</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token function">if</span><span class="token punctuation">(</span>p2_location <span class="token operator">==</span> <span class="token number">5'b01111</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">>=</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">&lt;</span> <span class="token number">48</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">>=</span> <span class="token number">424</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">&lt;</span> <span class="token number">472</span><span class="token punctuation">)</span> <span class="token keyword">begin</span>
            player2_data_addr <span class="token operator">&lt;=</span> <span class="token punctuation">(</span>y_pos <span class="token operator">-</span> <span class="token number">424</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">48</span><span class="token operator">+</span><span class="token punctuation">(</span>x_pos <span class="token operator">-</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token function">if</span><span class="token punctuation">(</span>p2_location <span class="token operator">==</span> <span class="token number">5'b10000</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">>=</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">&lt;</span> <span class="token number">48</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">>=</span> <span class="token number">376</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">&lt;</span> <span class="token number">424</span><span class="token punctuation">)</span> <span class="token keyword">begin</span>
            player2_data_addr <span class="token operator">&lt;=</span> <span class="token punctuation">(</span>y_pos <span class="token operator">-</span> <span class="token number">376</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">48</span><span class="token operator">+</span><span class="token punctuation">(</span>x_pos <span class="token operator">-</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token function">if</span><span class="token punctuation">(</span>p2_location <span class="token operator">==</span> <span class="token number">5'b10001</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">>=</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">&lt;</span> <span class="token number">48</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">>=</span> <span class="token number">282</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">&lt;</span> <span class="token number">330</span><span class="token punctuation">)</span> <span class="token keyword">begin</span>
            player2_data_addr <span class="token operator">&lt;=</span> <span class="token punctuation">(</span>y_pos <span class="token operator">-</span> <span class="token number">282</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">48</span><span class="token operator">+</span><span class="token punctuation">(</span>x_pos <span class="token operator">-</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token function">if</span><span class="token punctuation">(</span>p2_location <span class="token operator">==</span> <span class="token number">5'b10010</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">>=</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">&lt;</span> <span class="token number">48</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">>=</span> <span class="token number">188</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">&lt;</span> <span class="token number">236</span><span class="token punctuation">)</span> <span class="token keyword">begin</span>
            player2_data_addr <span class="token operator">&lt;=</span> <span class="token punctuation">(</span>y_pos <span class="token operator">-</span> <span class="token number">188</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">48</span><span class="token operator">+</span><span class="token punctuation">(</span>x_pos <span class="token operator">-</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token function">if</span><span class="token punctuation">(</span>p2_location <span class="token operator">==</span> <span class="token number">5'b10011</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">>=</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">&lt;</span> <span class="token number">48</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">>=</span> <span class="token number">94</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">&lt;</span> <span class="token number">142</span><span class="token punctuation">)</span> <span class="token keyword">begin</span>
            player2_data_addr <span class="token operator">&lt;=</span> <span class="token punctuation">(</span>y_pos <span class="token operator">-</span> <span class="token number">94</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">48</span><span class="token operator">+</span><span class="token punctuation">(</span>x_pos <span class="token operator">-</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">end</span>   

<span class="token keyword">end</span>


<span class="token comment" spellcheck="true">//choose display data</span>
<span class="token important">always@</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">begin</span>
    <span class="token function">if</span><span class="token punctuation">(</span><span class="token operator">!</span>VGA_rdn <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>x_pos <span class="token operator">>=</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">&lt;</span> <span class="token number">640</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">>=</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">&lt;</span> <span class="token number">480</span><span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token keyword">begin</span>

        <span class="token function">case</span><span class="token punctuation">(</span>global_state<span class="token punctuation">)</span>
            <span class="token number">3'b000</span><span class="token punctuation">:</span><span class="token keyword">begin</span>    
                display_data <span class="token operator">&lt;=</span> start_data<span class="token punctuation">;</span>
            <span class="token keyword">end</span>
            <span class="token number">3'b001</span><span class="token punctuation">:</span><span class="token keyword">begin</span>
                    <span class="token function">if</span><span class="token punctuation">(</span>p1_location <span class="token operator">==</span> <span class="token number">5'b00000</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">>=</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">&lt;</span> <span class="token number">48</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">>=</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">&lt;</span> <span class="token number">48</span><span class="token punctuation">)</span> <span class="token keyword">begin</span>
                                <span class="token function">if</span><span class="token punctuation">(</span>player1_data <span class="token operator">!=</span> <span class="token number">12'hfff</span><span class="token punctuation">)</span><span class="token keyword">begin</span>
                                    display_data <span class="token operator">&lt;=</span> player1_data<span class="token punctuation">;</span>
                                <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token keyword">begin</span> 
                                    display_data <span class="token operator">&lt;=</span> background_data<span class="token punctuation">;</span>
                                <span class="token keyword">end</span> 
                    <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token function">if</span><span class="token punctuation">(</span>p1_location <span class="token operator">==</span> <span class="token number">5'b00001</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">>=</span> <span class="token number">54</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">&lt;</span> <span class="token number">102</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">>=</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">&lt;</span> <span class="token number">48</span><span class="token punctuation">)</span> <span class="token keyword">begin</span>
                                <span class="token function">if</span><span class="token punctuation">(</span>player1_data <span class="token operator">!=</span> <span class="token number">12'hfff</span><span class="token punctuation">)</span><span class="token keyword">begin</span>
                                    display_data <span class="token operator">&lt;=</span> player1_data<span class="token punctuation">;</span>
                                <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token keyword">begin</span> 
                                    display_data <span class="token operator">&lt;=</span> background_data<span class="token punctuation">;</span>
                                <span class="token keyword">end</span> 
                    <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token function">if</span><span class="token punctuation">(</span>p1_location <span class="token operator">==</span> <span class="token number">5'b00010</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">>=</span> <span class="token number">187</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">&lt;</span> <span class="token number">235</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">>=</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">&lt;</span> <span class="token number">48</span><span class="token punctuation">)</span> <span class="token keyword">begin</span>
                                <span class="token function">if</span><span class="token punctuation">(</span>player1_data <span class="token operator">!=</span> <span class="token number">12'hfff</span><span class="token punctuation">)</span><span class="token keyword">begin</span>
                                    display_data <span class="token operator">&lt;=</span> player1_data<span class="token punctuation">;</span>
                                <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token keyword">begin</span> 
                                    display_data <span class="token operator">&lt;=</span> background_data<span class="token punctuation">;</span>
                                <span class="token keyword">end</span> 
                    <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token function">if</span><span class="token punctuation">(</span>p1_location <span class="token operator">==</span> <span class="token number">5'b00011</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">>=</span> <span class="token number">320</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">&lt;</span> <span class="token number">368</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">>=</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">&lt;</span> <span class="token number">48</span><span class="token punctuation">)</span> <span class="token keyword">begin</span>
                                <span class="token function">if</span><span class="token punctuation">(</span>player1_data <span class="token operator">!=</span> <span class="token number">12'hfff</span><span class="token punctuation">)</span><span class="token keyword">begin</span>
                                    display_data <span class="token operator">&lt;=</span> player1_data<span class="token punctuation">;</span>
                                <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token keyword">begin</span> 
                                    display_data <span class="token operator">&lt;=</span> background_data<span class="token punctuation">;</span>
                                <span class="token keyword">end</span> 
                    <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token function">if</span><span class="token punctuation">(</span>p1_location <span class="token operator">==</span> <span class="token number">5'b00100</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">>=</span> <span class="token number">453</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">&lt;</span> <span class="token number">501</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">>=</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">&lt;</span> <span class="token number">48</span><span class="token punctuation">)</span> <span class="token keyword">begin</span>
                                <span class="token function">if</span><span class="token punctuation">(</span>player1_data <span class="token operator">!=</span> <span class="token number">12'hfff</span><span class="token punctuation">)</span><span class="token keyword">begin</span>
                                    display_data <span class="token operator">&lt;=</span> player1_data<span class="token punctuation">;</span>
                                <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token keyword">begin</span> 
                                    display_data <span class="token operator">&lt;=</span> background_data<span class="token punctuation">;</span>
                                <span class="token keyword">end</span> 
                    <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token function">if</span><span class="token punctuation">(</span>p1_location <span class="token operator">==</span> <span class="token number">5'b00101</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">>=</span> <span class="token number">586</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">&lt;</span> <span class="token number">634</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">>=</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">&lt;</span> <span class="token number">48</span><span class="token punctuation">)</span> <span class="token keyword">begin</span>
                                <span class="token function">if</span><span class="token punctuation">(</span>player1_data <span class="token operator">!=</span> <span class="token number">12'hfff</span><span class="token punctuation">)</span><span class="token keyword">begin</span>
                                    display_data <span class="token operator">&lt;=</span> player1_data<span class="token punctuation">;</span>
                                <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token keyword">begin</span> 
                                    display_data <span class="token operator">&lt;=</span> background_data<span class="token punctuation">;</span>
                                <span class="token keyword">end</span>                         
                    <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token function">if</span><span class="token punctuation">(</span>p1_location <span class="token operator">==</span> <span class="token number">5'b00110</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">>=</span> <span class="token number">586</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">&lt;</span> <span class="token number">634</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">>=</span> <span class="token number">48</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">&lt;</span> <span class="token number">96</span><span class="token punctuation">)</span> <span class="token keyword">begin</span>
                                <span class="token function">if</span><span class="token punctuation">(</span>player1_data <span class="token operator">!=</span> <span class="token number">12'hfff</span><span class="token punctuation">)</span><span class="token keyword">begin</span>
                                    display_data <span class="token operator">&lt;=</span> player1_data<span class="token punctuation">;</span>
                                <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token keyword">begin</span> 
                                    display_data <span class="token operator">&lt;=</span> background_data<span class="token punctuation">;</span>
                                <span class="token keyword">end</span> 
                    <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token function">if</span><span class="token punctuation">(</span>p1_location <span class="token operator">==</span> <span class="token number">5'b00111</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">>=</span> <span class="token number">586</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">&lt;</span> <span class="token number">634</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">>=</span> <span class="token number">142</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">&lt;</span> <span class="token number">190</span><span class="token punctuation">)</span> <span class="token keyword">begin</span>
                                <span class="token function">if</span><span class="token punctuation">(</span>player1_data <span class="token operator">!=</span> <span class="token number">12'hfff</span><span class="token punctuation">)</span><span class="token keyword">begin</span>
                                    display_data <span class="token operator">&lt;=</span> player1_data<span class="token punctuation">;</span>
                                <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token keyword">begin</span> 
                                    display_data <span class="token operator">&lt;=</span> background_data<span class="token punctuation">;</span>
                                <span class="token keyword">end</span> 
                    <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token function">if</span><span class="token punctuation">(</span>p1_location <span class="token operator">==</span> <span class="token number">5'b01000</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">>=</span> <span class="token number">586</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">&lt;</span> <span class="token number">634</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">>=</span> <span class="token number">236</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">&lt;</span> <span class="token number">284</span><span class="token punctuation">)</span> <span class="token keyword">begin</span>
                                <span class="token function">if</span><span class="token punctuation">(</span>player1_data <span class="token operator">!=</span> <span class="token number">12'hfff</span><span class="token punctuation">)</span><span class="token keyword">begin</span>
                                    display_data <span class="token operator">&lt;=</span> player1_data<span class="token punctuation">;</span>
                                <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token keyword">begin</span> 
                                    display_data <span class="token operator">&lt;=</span> background_data<span class="token punctuation">;</span>
                                <span class="token keyword">end</span> 
                    <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token function">if</span><span class="token punctuation">(</span>p1_location <span class="token operator">==</span> <span class="token number">5'b01001</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">>=</span> <span class="token number">586</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">&lt;</span> <span class="token number">634</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">>=</span> <span class="token number">330</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">&lt;</span> <span class="token number">378</span><span class="token punctuation">)</span> <span class="token keyword">begin</span>
                                <span class="token function">if</span><span class="token punctuation">(</span>player1_data <span class="token operator">!=</span> <span class="token number">12'hfff</span><span class="token punctuation">)</span><span class="token keyword">begin</span>
                                    display_data <span class="token operator">&lt;=</span> player1_data<span class="token punctuation">;</span>
                                <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token keyword">begin</span> 
                                    display_data <span class="token operator">&lt;=</span> background_data<span class="token punctuation">;</span>
                                <span class="token keyword">end</span> 
                    <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token function">if</span><span class="token punctuation">(</span>p1_location <span class="token operator">==</span> <span class="token number">5'b01010</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">>=</span> <span class="token number">586</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">&lt;</span> <span class="token number">634</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">>=</span> <span class="token number">424</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">&lt;</span> <span class="token number">472</span><span class="token punctuation">)</span> <span class="token keyword">begin</span>
                                <span class="token function">if</span><span class="token punctuation">(</span>player1_data <span class="token operator">!=</span> <span class="token number">12'hfff</span><span class="token punctuation">)</span><span class="token keyword">begin</span>
                                    display_data <span class="token operator">&lt;=</span> player1_data<span class="token punctuation">;</span>
                                <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token keyword">begin</span> 
                                    display_data <span class="token operator">&lt;=</span> background_data<span class="token punctuation">;</span>
                                <span class="token keyword">end</span> 
                    <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token function">if</span><span class="token punctuation">(</span>p1_location <span class="token operator">==</span> <span class="token number">5'b01011</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">>=</span> <span class="token number">453</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">&lt;</span> <span class="token number">501</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">>=</span> <span class="token number">424</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">&lt;</span> <span class="token number">472</span><span class="token punctuation">)</span> <span class="token keyword">begin</span>
                                <span class="token function">if</span><span class="token punctuation">(</span>player1_data <span class="token operator">!=</span> <span class="token number">12'hfff</span><span class="token punctuation">)</span><span class="token keyword">begin</span>
                                    display_data <span class="token operator">&lt;=</span> player1_data<span class="token punctuation">;</span>
                                <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token keyword">begin</span> 
                                    display_data <span class="token operator">&lt;=</span> background_data<span class="token punctuation">;</span>
                                <span class="token keyword">end</span> 
                    <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token function">if</span><span class="token punctuation">(</span>p1_location <span class="token operator">==</span> <span class="token number">5'b01100</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">>=</span> <span class="token number">320</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">&lt;</span> <span class="token number">368</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">>=</span> <span class="token number">424</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">&lt;</span> <span class="token number">472</span><span class="token punctuation">)</span> <span class="token keyword">begin</span>
                                <span class="token function">if</span><span class="token punctuation">(</span>player1_data <span class="token operator">!=</span> <span class="token number">12'hfff</span><span class="token punctuation">)</span><span class="token keyword">begin</span>
                                    display_data <span class="token operator">&lt;=</span> player1_data<span class="token punctuation">;</span>
                                <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token keyword">begin</span> 
                                    display_data <span class="token operator">&lt;=</span> background_data<span class="token punctuation">;</span>
                                <span class="token keyword">end</span> 
                    <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token function">if</span><span class="token punctuation">(</span>p1_location <span class="token operator">==</span> <span class="token number">5'b01101</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">>=</span> <span class="token number">187</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">&lt;</span> <span class="token number">235</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">>=</span> <span class="token number">424</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">&lt;</span> <span class="token number">472</span><span class="token punctuation">)</span> <span class="token keyword">begin</span>
                                <span class="token function">if</span><span class="token punctuation">(</span>player1_data <span class="token operator">!=</span> <span class="token number">12'hfff</span><span class="token punctuation">)</span><span class="token keyword">begin</span>
                                    display_data <span class="token operator">&lt;=</span> player1_data<span class="token punctuation">;</span>
                                <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token keyword">begin</span> 
                                    display_data <span class="token operator">&lt;=</span> background_data<span class="token punctuation">;</span>
                                <span class="token keyword">end</span> 
                    <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token function">if</span><span class="token punctuation">(</span>p1_location <span class="token operator">==</span> <span class="token number">5'b01110</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">>=</span> <span class="token number">54</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">&lt;</span> <span class="token number">102</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">>=</span> <span class="token number">424</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">&lt;</span> <span class="token number">472</span><span class="token punctuation">)</span> <span class="token keyword">begin</span>
                                <span class="token function">if</span><span class="token punctuation">(</span>player1_data <span class="token operator">!=</span> <span class="token number">12'hfff</span><span class="token punctuation">)</span><span class="token keyword">begin</span>
                                    display_data <span class="token operator">&lt;=</span> player1_data<span class="token punctuation">;</span>
                                <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token keyword">begin</span> 
                                    display_data <span class="token operator">&lt;=</span> background_data<span class="token punctuation">;</span>
                                <span class="token keyword">end</span>                                                                                                                                                                                          
                    <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token function">if</span><span class="token punctuation">(</span>p1_location <span class="token operator">==</span> <span class="token number">5'b01111</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">>=</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">&lt;</span> <span class="token number">48</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">>=</span> <span class="token number">424</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">&lt;</span> <span class="token number">472</span><span class="token punctuation">)</span> <span class="token keyword">begin</span>
                                <span class="token function">if</span><span class="token punctuation">(</span>player1_data <span class="token operator">!=</span> <span class="token number">12'hfff</span><span class="token punctuation">)</span><span class="token keyword">begin</span>
                                    display_data <span class="token operator">&lt;=</span> player1_data<span class="token punctuation">;</span>
                                <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token keyword">begin</span> 
                                    display_data <span class="token operator">&lt;=</span> background_data<span class="token punctuation">;</span>
                                <span class="token keyword">end</span> 
                    <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token function">if</span><span class="token punctuation">(</span>p1_location <span class="token operator">==</span> <span class="token number">5'b10000</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">>=</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">&lt;</span> <span class="token number">48</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">>=</span> <span class="token number">330</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">&lt;</span> <span class="token number">378</span><span class="token punctuation">)</span> <span class="token keyword">begin</span>
                                <span class="token function">if</span><span class="token punctuation">(</span>player1_data <span class="token operator">!=</span> <span class="token number">12'hfff</span><span class="token punctuation">)</span><span class="token keyword">begin</span>
                                    display_data <span class="token operator">&lt;=</span> player1_data<span class="token punctuation">;</span>
                                <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token keyword">begin</span> 
                                    display_data <span class="token operator">&lt;=</span> background_data<span class="token punctuation">;</span>
                                <span class="token keyword">end</span> 
                    <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token function">if</span><span class="token punctuation">(</span>p1_location <span class="token operator">==</span> <span class="token number">5'b10001</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">>=</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">&lt;</span> <span class="token number">48</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">>=</span> <span class="token number">236</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">&lt;</span> <span class="token number">284</span><span class="token punctuation">)</span> <span class="token keyword">begin</span>
                                <span class="token function">if</span><span class="token punctuation">(</span>player1_data <span class="token operator">!=</span> <span class="token number">12'hfff</span><span class="token punctuation">)</span><span class="token keyword">begin</span>
                                display_data <span class="token operator">&lt;=</span> player1_data<span class="token punctuation">;</span>
                                <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token keyword">begin</span> 
                                    display_data <span class="token operator">&lt;=</span> background_data<span class="token punctuation">;</span>
                                <span class="token keyword">end</span> 
                    <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token function">if</span><span class="token punctuation">(</span>p1_location <span class="token operator">==</span> <span class="token number">5'b10010</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">>=</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">&lt;</span> <span class="token number">48</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">>=</span> <span class="token number">142</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">&lt;</span> <span class="token number">190</span><span class="token punctuation">)</span> <span class="token keyword">begin</span>
                                <span class="token function">if</span><span class="token punctuation">(</span>player1_data <span class="token operator">!=</span> <span class="token number">12'hfff</span><span class="token punctuation">)</span><span class="token keyword">begin</span>
                                    display_data <span class="token operator">&lt;=</span> player1_data<span class="token punctuation">;</span>
                                <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token keyword">begin</span> 
                                    display_data <span class="token operator">&lt;=</span> background_data<span class="token punctuation">;</span>
                                <span class="token keyword">end</span> 
                    <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token function">if</span><span class="token punctuation">(</span>p1_location <span class="token operator">==</span> <span class="token number">5'b10011</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">>=</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">&lt;</span> <span class="token number">48</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">>=</span> <span class="token number">48</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">&lt;</span> <span class="token number">96</span><span class="token punctuation">)</span> <span class="token keyword">begin</span>
                                <span class="token function">if</span><span class="token punctuation">(</span>player1_data <span class="token operator">!=</span> <span class="token number">12'hfff</span><span class="token punctuation">)</span><span class="token keyword">begin</span>
                                    display_data <span class="token operator">&lt;=</span> player1_data<span class="token punctuation">;</span>
                                <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token keyword">begin</span> 
                                    display_data <span class="token operator">&lt;=</span> background_data<span class="token punctuation">;</span>
                                <span class="token keyword">end</span> 

                    <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token function">if</span><span class="token punctuation">(</span>p2_location <span class="token operator">==</span> <span class="token number">5'b00000</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">>=</span> <span class="token number">6</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">&lt;</span> <span class="token number">54</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">>=</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">&lt;</span> <span class="token number">48</span><span class="token punctuation">)</span> <span class="token keyword">begin</span>
                                <span class="token function">if</span><span class="token punctuation">(</span>player2_data <span class="token operator">!=</span> <span class="token number">12'hfff</span><span class="token punctuation">)</span><span class="token keyword">begin</span>
                                    display_data <span class="token operator">&lt;=</span> player2_data<span class="token punctuation">;</span>
                                <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token keyword">begin</span> 
                                    display_data <span class="token operator">&lt;=</span> background_data<span class="token punctuation">;</span>
                                <span class="token keyword">end</span> 
                    <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token function">if</span><span class="token punctuation">(</span>p2_location <span class="token operator">==</span> <span class="token number">5'b00001</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">>=</span> <span class="token number">139</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">&lt;</span> <span class="token number">187</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">>=</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">&lt;</span> <span class="token number">48</span><span class="token punctuation">)</span> <span class="token keyword">begin</span>
                                <span class="token function">if</span><span class="token punctuation">(</span>player2_data <span class="token operator">!=</span> <span class="token number">12'hfff</span><span class="token punctuation">)</span><span class="token keyword">begin</span>
                                    display_data <span class="token operator">&lt;=</span> player2_data<span class="token punctuation">;</span>
                                <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token keyword">begin</span> 
                                    display_data <span class="token operator">&lt;=</span> background_data<span class="token punctuation">;</span>
                                <span class="token keyword">end</span> 
                    <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token function">if</span><span class="token punctuation">(</span>p2_location <span class="token operator">==</span> <span class="token number">5'b00010</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">>=</span> <span class="token number">272</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">&lt;</span> <span class="token number">320</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">>=</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">&lt;</span> <span class="token number">48</span><span class="token punctuation">)</span> <span class="token keyword">begin</span>
                                <span class="token function">if</span><span class="token punctuation">(</span>player2_data <span class="token operator">!=</span> <span class="token number">12'hfff</span><span class="token punctuation">)</span><span class="token keyword">begin</span>
                                    display_data <span class="token operator">&lt;=</span> player2_data<span class="token punctuation">;</span>
                                <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token keyword">begin</span> 
                                    display_data <span class="token operator">&lt;=</span> background_data<span class="token punctuation">;</span>
                                <span class="token keyword">end</span> 
                    <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token function">if</span><span class="token punctuation">(</span>p2_location <span class="token operator">==</span> <span class="token number">5'b00011</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">>=</span> <span class="token number">405</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">&lt;</span> <span class="token number">453</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">>=</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">&lt;</span> <span class="token number">48</span><span class="token punctuation">)</span> <span class="token keyword">begin</span>
                                <span class="token function">if</span><span class="token punctuation">(</span>player2_data <span class="token operator">!=</span> <span class="token number">12'hfff</span><span class="token punctuation">)</span><span class="token keyword">begin</span>
                                    display_data <span class="token operator">&lt;=</span> player2_data<span class="token punctuation">;</span>
                                <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token keyword">begin</span> 
                                    display_data <span class="token operator">&lt;=</span> background_data<span class="token punctuation">;</span>
                                <span class="token keyword">end</span> 
                    <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token function">if</span><span class="token punctuation">(</span>p2_location <span class="token operator">==</span> <span class="token number">5'b00100</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">>=</span> <span class="token number">538</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">&lt;</span> <span class="token number">586</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">>=</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">&lt;</span> <span class="token number">48</span><span class="token punctuation">)</span> <span class="token keyword">begin</span>
                                <span class="token function">if</span><span class="token punctuation">(</span>player2_data <span class="token operator">!=</span> <span class="token number">12'hfff</span><span class="token punctuation">)</span><span class="token keyword">begin</span>
                                    display_data <span class="token operator">&lt;=</span> player2_data<span class="token punctuation">;</span>
                                <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token keyword">begin</span> 
                                    display_data <span class="token operator">&lt;=</span> background_data<span class="token punctuation">;</span>
                                <span class="token keyword">end</span> 
                    <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token function">if</span><span class="token punctuation">(</span>p2_location <span class="token operator">==</span> <span class="token number">5'b00101</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">>=</span> <span class="token number">586</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">&lt;</span> <span class="token number">634</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">>=</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">&lt;</span> <span class="token number">48</span><span class="token punctuation">)</span> <span class="token keyword">begin</span>
                                <span class="token function">if</span><span class="token punctuation">(</span>player2_data <span class="token operator">!=</span> <span class="token number">12'hfff</span><span class="token punctuation">)</span><span class="token keyword">begin</span>
                                    display_data <span class="token operator">&lt;=</span> player2_data<span class="token punctuation">;</span>
                                <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token keyword">begin</span> 
                                    display_data <span class="token operator">&lt;=</span> background_data<span class="token punctuation">;</span>
                                <span class="token keyword">end</span>                       
                    <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token function">if</span><span class="token punctuation">(</span>p2_location <span class="token operator">==</span> <span class="token number">5'b00110</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">>=</span> <span class="token number">586</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">&lt;</span> <span class="token number">634</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">>=</span> <span class="token number">94</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">&lt;</span> <span class="token number">142</span><span class="token punctuation">)</span> <span class="token keyword">begin</span>
                                <span class="token function">if</span><span class="token punctuation">(</span>player2_data <span class="token operator">!=</span> <span class="token number">12'hfff</span><span class="token punctuation">)</span><span class="token keyword">begin</span>
                                    display_data <span class="token operator">&lt;=</span> player2_data<span class="token punctuation">;</span>
                                <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token keyword">begin</span> 
                                    display_data <span class="token operator">&lt;=</span> background_data<span class="token punctuation">;</span>
                                <span class="token keyword">end</span> 
                    <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token function">if</span><span class="token punctuation">(</span>p2_location <span class="token operator">==</span> <span class="token number">5'b00111</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">>=</span> <span class="token number">586</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">&lt;</span> <span class="token number">634</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">>=</span> <span class="token number">188</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">&lt;</span> <span class="token number">236</span><span class="token punctuation">)</span> <span class="token keyword">begin</span>
                                <span class="token function">if</span><span class="token punctuation">(</span>player2_data <span class="token operator">!=</span> <span class="token number">12'hfff</span><span class="token punctuation">)</span><span class="token keyword">begin</span>
                                    display_data <span class="token operator">&lt;=</span> player2_data<span class="token punctuation">;</span>
                                <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token keyword">begin</span> 
                                    display_data <span class="token operator">&lt;=</span> background_data<span class="token punctuation">;</span>
                                <span class="token keyword">end</span> 
                    <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token function">if</span><span class="token punctuation">(</span>p2_location <span class="token operator">==</span> <span class="token number">5'b01000</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">>=</span> <span class="token number">586</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">&lt;</span> <span class="token number">634</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">>=</span> <span class="token number">282</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">&lt;</span> <span class="token number">330</span><span class="token punctuation">)</span> <span class="token keyword">begin</span>
                                <span class="token function">if</span><span class="token punctuation">(</span>player2_data <span class="token operator">!=</span> <span class="token number">12'hfff</span><span class="token punctuation">)</span><span class="token keyword">begin</span>
                                    display_data <span class="token operator">&lt;=</span> player2_data<span class="token punctuation">;</span>
                                <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token keyword">begin</span> 
                                    display_data <span class="token operator">&lt;=</span> background_data<span class="token punctuation">;</span>
                                <span class="token keyword">end</span> 
                    <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token function">if</span><span class="token punctuation">(</span>p2_location <span class="token operator">==</span> <span class="token number">5'b01001</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">>=</span> <span class="token number">586</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">&lt;</span> <span class="token number">634</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">>=</span> <span class="token number">376</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">&lt;</span> <span class="token number">424</span><span class="token punctuation">)</span> <span class="token keyword">begin</span>
                                <span class="token function">if</span><span class="token punctuation">(</span>player2_data <span class="token operator">!=</span> <span class="token number">12'hfff</span><span class="token punctuation">)</span><span class="token keyword">begin</span>
                                    display_data <span class="token operator">&lt;=</span> player2_data<span class="token punctuation">;</span>
                                <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token keyword">begin</span> 
                                    display_data <span class="token operator">&lt;=</span> background_data<span class="token punctuation">;</span>
                                <span class="token keyword">end</span> 
                    <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token function">if</span><span class="token punctuation">(</span>p2_location <span class="token operator">==</span> <span class="token number">5'b01010</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">>=</span> <span class="token number">586</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">&lt;</span> <span class="token number">634</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">>=</span> <span class="token number">424</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">&lt;</span> <span class="token number">472</span><span class="token punctuation">)</span> <span class="token keyword">begin</span>
                                <span class="token function">if</span><span class="token punctuation">(</span>player2_data <span class="token operator">!=</span> <span class="token number">12'hfff</span><span class="token punctuation">)</span><span class="token keyword">begin</span>
                                    display_data <span class="token operator">&lt;=</span> player2_data<span class="token punctuation">;</span>
                                <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token keyword">begin</span> 
                                    display_data <span class="token operator">&lt;=</span> background_data<span class="token punctuation">;</span>
                                <span class="token keyword">end</span> 
                    <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token function">if</span><span class="token punctuation">(</span>p2_location <span class="token operator">==</span> <span class="token number">5'b01011</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">>=</span> <span class="token number">538</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">&lt;</span> <span class="token number">586</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">>=</span> <span class="token number">424</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">&lt;</span> <span class="token number">472</span><span class="token punctuation">)</span> <span class="token keyword">begin</span>
                                <span class="token function">if</span><span class="token punctuation">(</span>player2_data <span class="token operator">!=</span> <span class="token number">12'hfff</span><span class="token punctuation">)</span><span class="token keyword">begin</span>
                                    display_data <span class="token operator">&lt;=</span> player2_data<span class="token punctuation">;</span>
                                <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token keyword">begin</span> 
                                    display_data <span class="token operator">&lt;=</span> background_data<span class="token punctuation">;</span>
                                <span class="token keyword">end</span> 
                    <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token function">if</span><span class="token punctuation">(</span>p2_location <span class="token operator">==</span> <span class="token number">5'b01100</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">>=</span> <span class="token number">405</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">&lt;</span> <span class="token number">453</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">>=</span> <span class="token number">424</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">&lt;</span> <span class="token number">472</span><span class="token punctuation">)</span> <span class="token keyword">begin</span>
                                <span class="token function">if</span><span class="token punctuation">(</span>player2_data <span class="token operator">!=</span> <span class="token number">12'hfff</span><span class="token punctuation">)</span><span class="token keyword">begin</span>
                                    display_data <span class="token operator">&lt;=</span> player2_data<span class="token punctuation">;</span>
                                <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token keyword">begin</span> 
                                    display_data <span class="token operator">&lt;=</span> background_data<span class="token punctuation">;</span>
                                <span class="token keyword">end</span> 
                    <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token function">if</span><span class="token punctuation">(</span>p2_location <span class="token operator">==</span> <span class="token number">5'b01101</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">>=</span> <span class="token number">272</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">&lt;</span> <span class="token number">320</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">>=</span> <span class="token number">424</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">&lt;</span> <span class="token number">472</span><span class="token punctuation">)</span> <span class="token keyword">begin</span>
                                <span class="token function">if</span><span class="token punctuation">(</span>player2_data <span class="token operator">!=</span> <span class="token number">12'hfff</span><span class="token punctuation">)</span><span class="token keyword">begin</span>
                                    display_data <span class="token operator">&lt;=</span> player2_data<span class="token punctuation">;</span>
                                <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token keyword">begin</span> 
                                    display_data <span class="token operator">&lt;=</span> background_data<span class="token punctuation">;</span>
                                <span class="token keyword">end</span> 
                    <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token function">if</span><span class="token punctuation">(</span>p2_location <span class="token operator">==</span> <span class="token number">5'b01110</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">>=</span> <span class="token number">139</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">&lt;</span> <span class="token number">187</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">>=</span> <span class="token number">424</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">&lt;</span> <span class="token number">472</span><span class="token punctuation">)</span> <span class="token keyword">begin</span>
                                <span class="token function">if</span><span class="token punctuation">(</span>player2_data <span class="token operator">!=</span> <span class="token number">12'hfff</span><span class="token punctuation">)</span><span class="token keyword">begin</span>
                                    display_data <span class="token operator">&lt;=</span> player2_data<span class="token punctuation">;</span>
                                <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token keyword">begin</span> 
                                    display_data <span class="token operator">&lt;=</span> background_data<span class="token punctuation">;</span>
                                <span class="token keyword">end</span>                                                                                                                                                                                        
                    <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token function">if</span><span class="token punctuation">(</span>p2_location <span class="token operator">==</span> <span class="token number">5'b01111</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">>=</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">&lt;</span> <span class="token number">48</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">>=</span> <span class="token number">424</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">&lt;</span> <span class="token number">472</span><span class="token punctuation">)</span> <span class="token keyword">begin</span>
                                <span class="token function">if</span><span class="token punctuation">(</span>player2_data <span class="token operator">!=</span> <span class="token number">12'hfff</span><span class="token punctuation">)</span><span class="token keyword">begin</span>
                                    display_data <span class="token operator">&lt;=</span> player2_data<span class="token punctuation">;</span>
                                <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token keyword">begin</span> 
                                    display_data <span class="token operator">&lt;=</span> background_data<span class="token punctuation">;</span>
                                <span class="token keyword">end</span> 
                    <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token function">if</span><span class="token punctuation">(</span>p2_location <span class="token operator">==</span> <span class="token number">5'b10000</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">>=</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">&lt;</span> <span class="token number">48</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">>=</span> <span class="token number">376</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">&lt;</span> <span class="token number">424</span><span class="token punctuation">)</span> <span class="token keyword">begin</span>
                                <span class="token function">if</span><span class="token punctuation">(</span>player2_data <span class="token operator">!=</span> <span class="token number">12'hfff</span><span class="token punctuation">)</span><span class="token keyword">begin</span>
                                    display_data <span class="token operator">&lt;=</span> player2_data<span class="token punctuation">;</span>
                                <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token keyword">begin</span> 
                                    display_data <span class="token operator">&lt;=</span> background_data<span class="token punctuation">;</span>
                                <span class="token keyword">end</span> 
                    <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token function">if</span><span class="token punctuation">(</span>p2_location <span class="token operator">==</span> <span class="token number">5'b10001</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">>=</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">&lt;</span> <span class="token number">48</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">>=</span> <span class="token number">282</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">&lt;</span> <span class="token number">330</span><span class="token punctuation">)</span> <span class="token keyword">begin</span>
                                <span class="token function">if</span><span class="token punctuation">(</span>player2_data <span class="token operator">!=</span> <span class="token number">12'hfff</span><span class="token punctuation">)</span><span class="token keyword">begin</span>
                                    display_data <span class="token operator">&lt;=</span> player2_data<span class="token punctuation">;</span>
                                <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token keyword">begin</span> 
                                    display_data <span class="token operator">&lt;=</span> background_data<span class="token punctuation">;</span>
                                <span class="token keyword">end</span> 
                    <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token function">if</span><span class="token punctuation">(</span>p2_location <span class="token operator">==</span> <span class="token number">5'b10010</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">>=</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">&lt;</span> <span class="token number">48</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">>=</span> <span class="token number">188</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">&lt;</span> <span class="token number">236</span><span class="token punctuation">)</span> <span class="token keyword">begin</span>
                                <span class="token function">if</span><span class="token punctuation">(</span>player2_data <span class="token operator">!=</span> <span class="token number">12'hfff</span><span class="token punctuation">)</span><span class="token keyword">begin</span>
                                    display_data <span class="token operator">&lt;=</span> player2_data<span class="token punctuation">;</span>
                                <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token keyword">begin</span> 
                                    display_data <span class="token operator">&lt;=</span> background_data<span class="token punctuation">;</span>
                                <span class="token keyword">end</span> 
                    <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token function">if</span><span class="token punctuation">(</span>p2_location <span class="token operator">==</span> <span class="token number">5'b10011</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">>=</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">&lt;</span> <span class="token number">48</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">>=</span> <span class="token number">94</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">&lt;</span> <span class="token number">142</span><span class="token punctuation">)</span> <span class="token keyword">begin</span>
                                <span class="token function">if</span><span class="token punctuation">(</span>player2_data <span class="token operator">!=</span> <span class="token number">12'hfff</span><span class="token punctuation">)</span><span class="token keyword">begin</span>
                                    display_data <span class="token operator">&lt;=</span> player2_data<span class="token punctuation">;</span>
                                <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token keyword">begin</span> 
                                    display_data <span class="token operator">&lt;=</span> background_data<span class="token punctuation">;</span>
                                <span class="token keyword">end</span>  
                    <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token function">if</span><span class="token punctuation">(</span>has_house<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">>=</span> <span class="token number">96</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">&lt;</span> <span class="token number">144</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">>=</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">&lt;</span> <span class="token number">48</span><span class="token punctuation">)</span>                <span class="token keyword">begin</span>
                                <span class="token function">if</span><span class="token punctuation">(</span>house_data <span class="token operator">!=</span> <span class="token number">12'hfff</span><span class="token punctuation">)</span><span class="token keyword">begin</span>
                                    display_data <span class="token operator">&lt;=</span> house_data<span class="token punctuation">;</span>
                                <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token keyword">begin</span> 
                                    display_data <span class="token operator">&lt;=</span> background_data<span class="token punctuation">;</span>
                                <span class="token keyword">end</span>                        
                    <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token function">if</span><span class="token punctuation">(</span>has_house<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">>=</span> <span class="token number">229</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">&lt;</span> <span class="token number">277</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">>=</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">&lt;</span> <span class="token number">48</span><span class="token punctuation">)</span>      <span class="token keyword">begin</span>
                                <span class="token function">if</span><span class="token punctuation">(</span>house_data <span class="token operator">!=</span> <span class="token number">12'hfff</span><span class="token punctuation">)</span><span class="token keyword">begin</span>
                                    display_data <span class="token operator">&lt;=</span> house_data<span class="token punctuation">;</span>
                                <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token keyword">begin</span> 
                                    display_data <span class="token operator">&lt;=</span> background_data<span class="token punctuation">;</span>
                                <span class="token keyword">end</span> 
                    <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token function">if</span><span class="token punctuation">(</span>has_house<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">>=</span> <span class="token number">362</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">&lt;</span> <span class="token number">410</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">>=</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">&lt;</span> <span class="token number">48</span><span class="token punctuation">)</span>      <span class="token keyword">begin</span>
                                <span class="token function">if</span><span class="token punctuation">(</span>house_data <span class="token operator">!=</span> <span class="token number">12'hfff</span><span class="token punctuation">)</span><span class="token keyword">begin</span>
                                    display_data <span class="token operator">&lt;=</span> house_data<span class="token punctuation">;</span>
                                <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token keyword">begin</span> 
                                    display_data <span class="token operator">&lt;=</span> background_data<span class="token punctuation">;</span>
                                <span class="token keyword">end</span> 
                    <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token function">if</span><span class="token punctuation">(</span>has_house<span class="token punctuation">[</span><span class="token number">7</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">>=</span> <span class="token number">589</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">&lt;</span> <span class="token number">637</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">>=</span> <span class="token number">165</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">&lt;</span> <span class="token number">213</span><span class="token punctuation">)</span>   <span class="token keyword">begin</span>
                                <span class="token function">if</span><span class="token punctuation">(</span>house_data <span class="token operator">!=</span> <span class="token number">12'hfff</span><span class="token punctuation">)</span><span class="token keyword">begin</span>
                                    display_data <span class="token operator">&lt;=</span> house_data<span class="token punctuation">;</span>
                                <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token keyword">begin</span> 
                                    display_data <span class="token operator">&lt;=</span> background_data<span class="token punctuation">;</span>
                                <span class="token keyword">end</span> 
                    <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token function">if</span><span class="token punctuation">(</span>has_house<span class="token punctuation">[</span><span class="token number">8</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">>=</span> <span class="token number">589</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">&lt;</span> <span class="token number">637</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">>=</span> <span class="token number">259</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">&lt;</span> <span class="token number">307</span><span class="token punctuation">)</span>   <span class="token keyword">begin</span>
                                <span class="token function">if</span><span class="token punctuation">(</span>house_data <span class="token operator">!=</span> <span class="token number">12'hfff</span><span class="token punctuation">)</span><span class="token keyword">begin</span>
                                    display_data <span class="token operator">&lt;=</span> house_data<span class="token punctuation">;</span>
                                <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token keyword">begin</span> 
                                    display_data <span class="token operator">&lt;=</span> background_data<span class="token punctuation">;</span>
                                <span class="token keyword">end</span> 
                    <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token function">if</span><span class="token punctuation">(</span>has_house<span class="token punctuation">[</span><span class="token number">12</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">>=</span> <span class="token number">362</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">&lt;</span> <span class="token number">410</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">>=</span> <span class="token number">428</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">&lt;</span> <span class="token number">476</span><span class="token punctuation">)</span>   <span class="token keyword">begin</span>
                                <span class="token function">if</span><span class="token punctuation">(</span>house_data <span class="token operator">!=</span> <span class="token number">12'hfff</span><span class="token punctuation">)</span><span class="token keyword">begin</span>
                                    display_data <span class="token operator">&lt;=</span> house_data<span class="token punctuation">;</span>
                                <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token keyword">begin</span> 
                                    display_data <span class="token operator">&lt;=</span> background_data<span class="token punctuation">;</span>
                                <span class="token keyword">end</span> 
                    <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token function">if</span><span class="token punctuation">(</span>has_house<span class="token punctuation">[</span><span class="token number">13</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">>=</span> <span class="token number">229</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">&lt;</span> <span class="token number">277</span> <span class="token operator">&amp;&amp;</span>  y_pos <span class="token operator">>=</span> <span class="token number">428</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">&lt;</span> <span class="token number">476</span><span class="token punctuation">)</span>  <span class="token keyword">begin</span>
                                <span class="token function">if</span><span class="token punctuation">(</span>house_data <span class="token operator">!=</span> <span class="token number">12'hfff</span><span class="token punctuation">)</span><span class="token keyword">begin</span>
                                    display_data <span class="token operator">&lt;=</span> house_data<span class="token punctuation">;</span>
                                <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token keyword">begin</span> 
                                    display_data <span class="token operator">&lt;=</span> background_data<span class="token punctuation">;</span>
                                <span class="token keyword">end</span> 
                    <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token function">if</span><span class="token punctuation">(</span>has_house<span class="token punctuation">[</span><span class="token number">17</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">>=</span> <span class="token number">3</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">&lt;</span> <span class="token number">51</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">>=</span> <span class="token number">259</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">&lt;</span> <span class="token number">307</span><span class="token punctuation">)</span>      <span class="token keyword">begin</span>
                                <span class="token function">if</span><span class="token punctuation">(</span>house_data <span class="token operator">!=</span> <span class="token number">12'hfff</span><span class="token punctuation">)</span><span class="token keyword">begin</span>
                                    display_data <span class="token operator">&lt;=</span> house_data<span class="token punctuation">;</span>
                                <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token keyword">begin</span> 
                                    display_data <span class="token operator">&lt;=</span> background_data<span class="token punctuation">;</span>
                                <span class="token keyword">end</span> 
                    <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token function">if</span><span class="token punctuation">(</span>has_house<span class="token punctuation">[</span><span class="token number">18</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">>=</span> <span class="token number">3</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">&lt;</span> <span class="token number">51</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">>=</span> <span class="token number">165</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">&lt;</span> <span class="token number">213</span><span class="token punctuation">)</span>      <span class="token keyword">begin</span>
                                <span class="token function">if</span><span class="token punctuation">(</span>house_data <span class="token operator">!=</span> <span class="token number">12'hfff</span><span class="token punctuation">)</span><span class="token keyword">begin</span>
                                    display_data <span class="token operator">&lt;=</span> house_data<span class="token punctuation">;</span>
                                <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token keyword">begin</span> 
                                    display_data <span class="token operator">&lt;=</span> background_data<span class="token punctuation">;</span>
                                <span class="token keyword">end</span> 
                    <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token function">if</span><span class="token punctuation">(</span>has_house<span class="token punctuation">[</span><span class="token number">19</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">>=</span> <span class="token number">3</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">&lt;</span> <span class="token number">51</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">>=</span> <span class="token number">71</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">&lt;</span> <span class="token number">119</span><span class="token punctuation">)</span>       <span class="token keyword">begin</span>
                                <span class="token function">if</span><span class="token punctuation">(</span>house_data <span class="token operator">!=</span> <span class="token number">12'hfff</span><span class="token punctuation">)</span><span class="token keyword">begin</span>
                                    display_data <span class="token operator">&lt;=</span> house_data<span class="token punctuation">;</span>
                                <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token keyword">begin</span> 
                                    display_data <span class="token operator">&lt;=</span> background_data<span class="token punctuation">;</span>
                                <span class="token keyword">end</span> 
                    <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>land_owner<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token operator">||</span>land_owner<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span> <span class="token punctuation">(</span>x_pos <span class="token operator">-</span> <span class="token number">120</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token punctuation">(</span>x_pos <span class="token operator">-</span> <span class="token number">120</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token punctuation">(</span>y_pos <span class="token operator">-</span> <span class="token number">58</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token punctuation">(</span>y_pos <span class="token operator">-</span> <span class="token number">58</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">begin</span>
                                    display_data <span class="token operator">&lt;=</span> land_owner<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token operator">==</span><span class="token number">1</span> <span class="token operator">?</span> <span class="token number">12'hf0f</span> <span class="token punctuation">:</span> <span class="token number">12'hfff</span><span class="token punctuation">;</span>
                    <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>land_owner<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token operator">||</span>land_owner<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span> <span class="token punctuation">(</span>x_pos <span class="token operator">-</span> <span class="token number">253</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token punctuation">(</span>x_pos <span class="token operator">-</span> <span class="token number">253</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token punctuation">(</span>y_pos <span class="token operator">-</span> <span class="token number">58</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token punctuation">(</span>y_pos <span class="token operator">-</span> <span class="token number">58</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">begin</span>
                                    display_data <span class="token operator">&lt;=</span> land_owner<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token operator">==</span><span class="token number">1</span> <span class="token operator">?</span> <span class="token number">12'hf0f</span> <span class="token punctuation">:</span> <span class="token number">12'hfff</span><span class="token punctuation">;</span>                                
                    <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>land_owner<span class="token punctuation">[</span><span class="token number">6</span><span class="token punctuation">]</span><span class="token operator">||</span>land_owner<span class="token punctuation">[</span><span class="token number">7</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span> <span class="token punctuation">(</span>x_pos <span class="token operator">-</span> <span class="token number">373</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token punctuation">(</span>x_pos <span class="token operator">-</span> <span class="token number">373</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token punctuation">(</span>y_pos <span class="token operator">-</span> <span class="token number">58</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token punctuation">(</span>y_pos <span class="token operator">-</span> <span class="token number">58</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">begin</span>
                                    display_data <span class="token operator">&lt;=</span> land_owner<span class="token punctuation">[</span><span class="token number">6</span><span class="token punctuation">]</span><span class="token operator">==</span><span class="token number">1</span> <span class="token operator">?</span> <span class="token number">12'hf0f</span> <span class="token punctuation">:</span> <span class="token number">12'hfff</span><span class="token punctuation">;</span>
                    <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>land_owner<span class="token punctuation">[</span><span class="token number">14</span><span class="token punctuation">]</span><span class="token operator">||</span>land_owner<span class="token punctuation">[</span><span class="token number">15</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span> <span class="token punctuation">(</span>x_pos <span class="token operator">-</span> <span class="token number">576</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token punctuation">(</span>x_pos <span class="token operator">-</span> <span class="token number">576</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token punctuation">(</span>y_pos <span class="token operator">-</span> <span class="token number">189</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token punctuation">(</span>y_pos <span class="token operator">-</span> <span class="token number">189</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">begin</span>
                                    display_data <span class="token operator">&lt;=</span> land_owner<span class="token punctuation">[</span><span class="token number">14</span><span class="token punctuation">]</span><span class="token operator">==</span><span class="token number">1</span> <span class="token operator">?</span> <span class="token number">12'hf0f</span> <span class="token punctuation">:</span> <span class="token number">12'hfff</span><span class="token punctuation">;</span>
                    <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>land_owner<span class="token punctuation">[</span><span class="token number">16</span><span class="token punctuation">]</span><span class="token operator">||</span>land_owner<span class="token punctuation">[</span><span class="token number">17</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span> <span class="token punctuation">(</span>x_pos <span class="token operator">-</span> <span class="token number">576</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token punctuation">(</span>x_pos <span class="token operator">-</span> <span class="token number">576</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token punctuation">(</span>y_pos <span class="token operator">-</span> <span class="token number">283</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token punctuation">(</span>y_pos <span class="token operator">-</span> <span class="token number">283</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">begin</span>
                                    display_data <span class="token operator">&lt;=</span> land_owner<span class="token punctuation">[</span><span class="token number">16</span><span class="token punctuation">]</span><span class="token operator">==</span><span class="token number">1</span> <span class="token operator">?</span> <span class="token number">12'hf0f</span> <span class="token punctuation">:</span> <span class="token number">12'hfff</span><span class="token punctuation">;</span>                        
                    <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>land_owner<span class="token punctuation">[</span><span class="token number">24</span><span class="token punctuation">]</span><span class="token operator">||</span>land_owner<span class="token punctuation">[</span><span class="token number">25</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span> <span class="token punctuation">(</span>x_pos <span class="token operator">-</span> <span class="token number">373</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token punctuation">(</span>x_pos <span class="token operator">-</span> <span class="token number">373</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token punctuation">(</span>y_pos <span class="token operator">-</span> <span class="token number">414</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token punctuation">(</span>y_pos <span class="token operator">-</span> <span class="token number">414</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">begin</span>
                                    display_data <span class="token operator">&lt;=</span> land_owner<span class="token punctuation">[</span><span class="token number">24</span><span class="token punctuation">]</span><span class="token operator">==</span><span class="token number">1</span> <span class="token operator">?</span> <span class="token number">12'hf0f</span> <span class="token punctuation">:</span> <span class="token number">12'hfff</span><span class="token punctuation">;</span>                        
                    <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>land_owner<span class="token punctuation">[</span><span class="token number">26</span><span class="token punctuation">]</span><span class="token operator">||</span>land_owner<span class="token punctuation">[</span><span class="token number">27</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span> <span class="token punctuation">(</span>x_pos <span class="token operator">-</span> <span class="token number">253</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token punctuation">(</span>x_pos <span class="token operator">-</span> <span class="token number">253</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token punctuation">(</span>y_pos <span class="token operator">-</span> <span class="token number">414</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token punctuation">(</span>y_pos <span class="token operator">-</span> <span class="token number">414</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">begin</span>
                                    display_data <span class="token operator">&lt;=</span> land_owner<span class="token punctuation">[</span><span class="token number">26</span><span class="token punctuation">]</span><span class="token operator">==</span><span class="token number">1</span> <span class="token operator">?</span> <span class="token number">12'hf0f</span> <span class="token punctuation">:</span> <span class="token number">12'hfff</span><span class="token punctuation">;</span>                               
                    <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>land_owner<span class="token punctuation">[</span><span class="token number">34</span><span class="token punctuation">]</span><span class="token operator">||</span>land_owner<span class="token punctuation">[</span><span class="token number">35</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span> <span class="token punctuation">(</span>x_pos <span class="token operator">-</span> <span class="token number">64</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token punctuation">(</span>x_pos <span class="token operator">-</span> <span class="token number">64</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token punctuation">(</span>y_pos <span class="token operator">-</span> <span class="token number">283</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token punctuation">(</span>y_pos <span class="token operator">-</span> <span class="token number">283</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">begin</span>
                                    display_data <span class="token operator">&lt;=</span> land_owner<span class="token punctuation">[</span><span class="token number">34</span><span class="token punctuation">]</span><span class="token operator">==</span><span class="token number">1</span> <span class="token operator">?</span> <span class="token number">12'hf0f</span> <span class="token punctuation">:</span> <span class="token number">12'hfff</span><span class="token punctuation">;</span>
                    <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>land_owner<span class="token punctuation">[</span><span class="token number">36</span><span class="token punctuation">]</span><span class="token operator">||</span>land_owner<span class="token punctuation">[</span><span class="token number">37</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span> <span class="token punctuation">(</span>x_pos <span class="token operator">-</span> <span class="token number">64</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token punctuation">(</span>x_pos <span class="token operator">-</span> <span class="token number">64</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token punctuation">(</span>y_pos <span class="token operator">-</span> <span class="token number">189</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token punctuation">(</span>y_pos <span class="token operator">-</span> <span class="token number">189</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">begin</span>
                                    display_data <span class="token operator">&lt;=</span> land_owner<span class="token punctuation">[</span><span class="token number">36</span><span class="token punctuation">]</span><span class="token operator">==</span><span class="token number">1</span> <span class="token operator">?</span> <span class="token number">12'hf0f</span> <span class="token punctuation">:</span> <span class="token number">12'hfff</span><span class="token punctuation">;</span>          
                    <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>land_owner<span class="token punctuation">[</span><span class="token number">38</span><span class="token punctuation">]</span><span class="token operator">||</span>land_owner<span class="token punctuation">[</span><span class="token number">39</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span> <span class="token punctuation">(</span>x_pos <span class="token operator">-</span> <span class="token number">64</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token punctuation">(</span>x_pos <span class="token operator">-</span> <span class="token number">64</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token punctuation">(</span>y_pos <span class="token operator">-</span> <span class="token number">95</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token punctuation">(</span>y_pos <span class="token operator">-</span> <span class="token number">95</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">begin</span>
                                    display_data <span class="token operator">&lt;=</span> land_owner<span class="token punctuation">[</span><span class="token number">38</span><span class="token punctuation">]</span><span class="token operator">==</span><span class="token number">1</span> <span class="token operator">?</span> <span class="token number">12'hf0f</span> <span class="token punctuation">:</span> <span class="token number">12'hfff</span><span class="token punctuation">;</span>   
                    <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>show_event<span class="token operator">!=</span><span class="token number">4'b1111</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">>=</span> <span class="token number">200</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">&lt;</span> <span class="token number">440</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">>=</span> <span class="token number">150</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">&lt;</span> <span class="token number">330</span><span class="token punctuation">)</span> <span class="token keyword">begin</span>
                                <span class="token keyword">case</span> <span class="token punctuation">(</span>show_event<span class="token punctuation">)</span>
                                    <span class="token number">4'b0001</span><span class="token punctuation">:</span><span class="token keyword">begin</span>
                                            display_data <span class="token operator">&lt;=</span> event1_data<span class="token punctuation">;</span>
                                    <span class="token keyword">end</span>
                                    <span class="token number">4'b0010</span><span class="token punctuation">:</span><span class="token keyword">begin</span>
                                            display_data <span class="token operator">&lt;=</span> event2_data<span class="token punctuation">;</span>
                                    <span class="token keyword">end</span>
                                    <span class="token number">4'b0011</span><span class="token punctuation">:</span><span class="token keyword">begin</span>
                                            display_data <span class="token operator">&lt;=</span> event3_data<span class="token punctuation">;</span>
                                    <span class="token keyword">end</span>
                                    <span class="token number">4'b0100</span><span class="token punctuation">:</span><span class="token keyword">begin</span>
                                            display_data <span class="token operator">&lt;=</span> event4_data<span class="token punctuation">;</span>
                                    <span class="token keyword">end</span>
                                    <span class="token number">4'b0101</span><span class="token punctuation">:</span><span class="token keyword">begin</span>
                                            display_data <span class="token operator">&lt;=</span> event5_data<span class="token punctuation">;</span>
                                    <span class="token keyword">end</span>
                                    <span class="token number">4'b0110</span><span class="token punctuation">:</span><span class="token keyword">begin</span>
                                            display_data <span class="token operator">&lt;=</span> event6_data<span class="token punctuation">;</span>
                                    <span class="token keyword">end</span>
                                    <span class="token keyword">default</span><span class="token punctuation">:</span> <span class="token keyword">begin</span>
                                            display_data <span class="token operator">&lt;=</span> background_data<span class="token punctuation">;</span>
                                    <span class="token keyword">end</span>
                                <span class="token keyword">endcase</span>
                    <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token keyword">begin</span>
                                display_data <span class="token operator">&lt;=</span> background_data<span class="token punctuation">;</span>
                    <span class="token keyword">end</span> 


            <span class="token keyword">end</span>    
            <span class="token number">3'b010</span><span class="token punctuation">:</span><span class="token keyword">begin</span>    
                <span class="token keyword">if</span> <span class="token punctuation">(</span>x_pos <span class="token operator">>=</span> <span class="token number">140</span> <span class="token operator">&amp;&amp;</span> x_pos <span class="token operator">&lt;</span> <span class="token number">500</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">>=</span> <span class="token number">210</span> <span class="token operator">&amp;&amp;</span> y_pos <span class="token operator">&lt;</span> <span class="token number">270</span><span class="token punctuation">)</span> <span class="token keyword">begin</span>
                    display_data <span class="token operator">&lt;=</span> game_over_data<span class="token punctuation">;</span>
                <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token keyword">begin</span>
                    display_data <span class="token operator">&lt;=</span> <span class="token number">12'b0</span><span class="token punctuation">;</span>
                <span class="token keyword">end</span>
            <span class="token keyword">end</span>
            <span class="token keyword">default</span><span class="token punctuation">:</span>display_data <span class="token operator">&lt;=</span> <span class="token number">12'b0</span><span class="token punctuation">;</span>
        <span class="token keyword">endcase</span>




    <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token keyword">begin</span>
        display_data <span class="token operator">&lt;=</span> <span class="token number">12'b0</span><span class="token punctuation">;</span>
    <span class="token keyword">end</span>
<span class="token keyword">end</span>

<span class="token comment" spellcheck="true">//------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="token keyword">endmodule</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>###二、VGA模块</p>
<pre class="line-numbers language-verilog"><code class="language-verilog"><span class="token keyword">module</span> vgac <span class="token punctuation">(</span>vga_clk<span class="token punctuation">,</span>clrn<span class="token punctuation">,</span>d_in<span class="token punctuation">,</span>row_addr<span class="token punctuation">,</span>col_addr<span class="token punctuation">,</span>rdn<span class="token punctuation">,</span>r<span class="token punctuation">,</span>g<span class="token punctuation">,</span>b<span class="token punctuation">,</span>hs<span class="token punctuation">,</span>vs<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// vgac</span>
   <span class="token keyword">input</span>     <span class="token punctuation">[</span><span class="token number">11</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span> d_in<span class="token punctuation">;</span>     <span class="token comment" spellcheck="true">// bbbb_gggg_rrrr, pixel</span>
   <span class="token keyword">input</span>            vga_clk<span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">// 25MHz</span>
   <span class="token keyword">input</span>            clrn<span class="token punctuation">;</span>
   <span class="token keyword">output</span> <span class="token keyword">reg</span> <span class="token punctuation">[</span><span class="token number">8</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span> row_addr<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// pixel ram row address, 480 (512) lines</span>
   <span class="token keyword">output</span> <span class="token keyword">reg</span> <span class="token punctuation">[</span><span class="token number">9</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span> col_addr<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// pixel ram col address, 640 (1024) pixels</span>
   <span class="token keyword">output</span> <span class="token keyword">reg</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span> r<span class="token punctuation">,</span>g<span class="token punctuation">,</span>b<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// red, green, blue colors</span>
   <span class="token keyword">output</span> <span class="token keyword">reg</span>       rdn<span class="token punctuation">;</span>      <span class="token comment" spellcheck="true">// read pixel RAM (active_low)</span>
   <span class="token keyword">output</span> <span class="token keyword">reg</span>       hs<span class="token punctuation">,</span>vs<span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// horizontal and vertical synchronization</span>
   <span class="token comment" spellcheck="true">// h_count: VGA horizontal counter (0-799)</span>
   <span class="token keyword">reg</span> <span class="token punctuation">[</span><span class="token number">9</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span> h_count<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// VGA horizontal counter (0-799): pixels</span>
   <span class="token important">always @</span> <span class="token punctuation">(</span><span class="token keyword">posedge</span> vga_clk<span class="token punctuation">)</span> <span class="token keyword">begin</span>
       <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>clrn<span class="token punctuation">)</span> <span class="token keyword">begin</span>
           h_count <span class="token operator">&lt;=</span> <span class="token number">10'h0</span><span class="token punctuation">;</span>
       <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>h_count <span class="token operator">==</span> <span class="token number">10'd799</span><span class="token punctuation">)</span> <span class="token keyword">begin</span>
           h_count <span class="token operator">&lt;=</span> <span class="token number">10'h0</span><span class="token punctuation">;</span>
       <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token keyword">begin</span> 
           h_count <span class="token operator">&lt;=</span> h_count <span class="token operator">+</span> <span class="token number">10'h1</span><span class="token punctuation">;</span>
       <span class="token keyword">end</span>
   <span class="token keyword">end</span>
   <span class="token comment" spellcheck="true">// v_count: VGA vertical counter (0-524)</span>
   <span class="token keyword">reg</span> <span class="token punctuation">[</span><span class="token number">9</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span> v_count<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// VGA vertical   counter (0-524): lines</span>
   <span class="token important">always @</span> <span class="token punctuation">(</span><span class="token keyword">posedge</span> vga_clk <span class="token keyword">or</span> <span class="token keyword">negedge</span> clrn<span class="token punctuation">)</span> <span class="token keyword">begin</span>
       <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>clrn<span class="token punctuation">)</span> <span class="token keyword">begin</span>
           v_count <span class="token operator">&lt;=</span> <span class="token number">10'h0</span><span class="token punctuation">;</span>
       <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>h_count <span class="token operator">==</span> <span class="token number">10'd799</span><span class="token punctuation">)</span> <span class="token keyword">begin</span>
           <span class="token keyword">if</span> <span class="token punctuation">(</span>v_count <span class="token operator">==</span> <span class="token number">10'd524</span><span class="token punctuation">)</span> <span class="token keyword">begin</span>
               v_count <span class="token operator">&lt;=</span> <span class="token number">10'h0</span><span class="token punctuation">;</span>
           <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token keyword">begin</span>
               v_count <span class="token operator">&lt;=</span> v_count <span class="token operator">+</span> <span class="token number">10'h1</span><span class="token punctuation">;</span>
           <span class="token keyword">end</span>
       <span class="token keyword">end</span>
   <span class="token keyword">end</span>
    <span class="token comment" spellcheck="true">// signals, will be latched for outputs</span>
    <span class="token keyword">wire</span>  <span class="token punctuation">[</span><span class="token number">9</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span> row    <span class="token operator">=</span>  v_count <span class="token operator">-</span> <span class="token number">10'd35</span><span class="token punctuation">;</span>     <span class="token comment" spellcheck="true">// pixel ram row addr </span>
    <span class="token keyword">wire</span>  <span class="token punctuation">[</span><span class="token number">9</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span> col    <span class="token operator">=</span>  h_count <span class="token operator">-</span> <span class="token number">10'd143</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// pixel ram col addr </span>
    <span class="token keyword">wire</span>        h_sync <span class="token operator">=</span> <span class="token punctuation">(</span>h_count <span class="token operator">></span> <span class="token number">10'd95</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">//  96 -> 799</span>
    <span class="token keyword">wire</span>        v_sync <span class="token operator">=</span> <span class="token punctuation">(</span>v_count <span class="token operator">></span> <span class="token number">10'd1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment" spellcheck="true">//   2 -> 524</span>
    <span class="token keyword">wire</span>        read   <span class="token operator">=</span> <span class="token punctuation">(</span>h_count <span class="token operator">></span> <span class="token number">10'd142</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token comment" spellcheck="true">// 143 -> 782</span>
                         <span class="token punctuation">(</span>h_count <span class="token operator">&lt;</span> <span class="token number">10'd783</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token comment" spellcheck="true">//        640 pixels</span>
                         <span class="token punctuation">(</span>v_count <span class="token operator">></span> <span class="token number">10'd34</span><span class="token punctuation">)</span>  <span class="token operator">&amp;&amp;</span> <span class="token comment" spellcheck="true">//  35 -> 514</span>
                         <span class="token punctuation">(</span>v_count <span class="token operator">&lt;</span> <span class="token number">10'd515</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment" spellcheck="true">//        480 lines</span>
    <span class="token comment" spellcheck="true">// vga signals</span>
    <span class="token important">always @</span> <span class="token punctuation">(</span><span class="token keyword">posedge</span> vga_clk<span class="token punctuation">)</span> <span class="token keyword">begin</span>
        row_addr <span class="token operator">&lt;=</span>  row<span class="token punctuation">[</span><span class="token number">8</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// pixel ram row address</span>
        col_addr <span class="token operator">&lt;=</span>  col<span class="token punctuation">;</span>      <span class="token comment" spellcheck="true">// pixel ram col address</span>
        rdn      <span class="token operator">&lt;=</span> <span class="token operator">~</span>read<span class="token punctuation">;</span>     <span class="token comment" spellcheck="true">// read pixel (active low)</span>
        hs       <span class="token operator">&lt;=</span>  h_sync<span class="token punctuation">;</span>   <span class="token comment" spellcheck="true">// horizontal synchronization</span>
        vs       <span class="token operator">&lt;=</span>  v_sync<span class="token punctuation">;</span>   <span class="token comment" spellcheck="true">// vertical   synchronization</span>
        r        <span class="token operator">&lt;=</span>  rdn <span class="token operator">?</span> <span class="token number">4'h0</span> <span class="token punctuation">:</span> d_in<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// 3-bit red</span>
        g        <span class="token operator">&lt;=</span>  rdn <span class="token operator">?</span> <span class="token number">4'h0</span> <span class="token punctuation">:</span> d_in<span class="token punctuation">[</span><span class="token number">7</span><span class="token punctuation">:</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// 3-bit green</span>
        b        <span class="token operator">&lt;=</span>  rdn <span class="token operator">?</span> <span class="token number">4'h0</span> <span class="token punctuation">:</span> d_in<span class="token punctuation">[</span><span class="token number">11</span><span class="token punctuation">:</span><span class="token number">8</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// 2-bit blue</span>
    <span class="token keyword">end</span>
<span class="token keyword">endmodule</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="三、PS-2模块"><a href="#三、PS-2模块" class="headerlink" title="三、PS/2模块"></a>三、PS/2模块</h3><pre class="line-numbers language-verilog"><code class="language-verilog"><span class="token keyword">module</span> <span class="token function">ps2_keyboard</span><span class="token punctuation">(</span><span class="token keyword">input</span> clk<span class="token punctuation">,</span>
                <span class="token keyword">input</span> rst<span class="token punctuation">,</span>
                <span class="token keyword">input</span> ps2_clk<span class="token punctuation">,</span>
                <span class="token keyword">input</span> ps2_data<span class="token punctuation">,</span>
                <span class="token keyword">output</span> <span class="token punctuation">[</span><span class="token number">9</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span> data_out<span class="token punctuation">,</span>
                <span class="token keyword">output</span> ready<span class="token punctuation">)</span><span class="token punctuation">;</span>


     <span class="token keyword">reg</span> ps2_clk_flag0<span class="token punctuation">,</span> ps2_clk_flag1<span class="token punctuation">,</span> ps2_clk_flag2<span class="token punctuation">;</span>
    <span class="token keyword">wire</span> negedge_ps2_clk<span class="token punctuation">;</span>

    <span class="token important">always @</span><span class="token punctuation">(</span><span class="token keyword">posedge</span> clk <span class="token keyword">or</span> <span class="token keyword">posedge</span> rst<span class="token punctuation">)</span><span class="token keyword">begin</span>
        <span class="token function">if</span><span class="token punctuation">(</span>rst<span class="token punctuation">)</span><span class="token keyword">begin</span>
            ps2_clk_flag0 <span class="token operator">&lt;=</span> <span class="token number">1'b0</span><span class="token punctuation">;</span>
            ps2_clk_flag1 <span class="token operator">&lt;=</span> <span class="token number">1'b0</span><span class="token punctuation">;</span>
            ps2_clk_flag2 <span class="token operator">&lt;=</span> <span class="token number">1'b0</span><span class="token punctuation">;</span>
        <span class="token keyword">end</span>
        <span class="token keyword">else</span> <span class="token keyword">begin</span>
            ps2_clk_flag0 <span class="token operator">&lt;=</span> ps2_clk<span class="token punctuation">;</span>
            ps2_clk_flag1 <span class="token operator">&lt;=</span> ps2_clk_flag0<span class="token punctuation">;</span>
            ps2_clk_flag2 <span class="token operator">&lt;=</span> ps2_clk_flag1<span class="token punctuation">;</span>
        <span class="token keyword">end</span>
    <span class="token keyword">end</span>

    <span class="token keyword">assign</span> negedge_ps2_clk <span class="token operator">=</span> <span class="token operator">!</span>ps2_clk_flag1 <span class="token operator">&amp;</span> ps2_clk_flag2<span class="token punctuation">;</span>
    <span class="token keyword">reg</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span> num<span class="token punctuation">;</span>
    <span class="token important">always @</span><span class="token punctuation">(</span><span class="token keyword">posedge</span> clk <span class="token keyword">or</span> <span class="token keyword">posedge</span> rst<span class="token punctuation">)</span><span class="token keyword">begin</span>
        <span class="token function">if</span><span class="token punctuation">(</span>rst<span class="token punctuation">)</span>
            num <span class="token operator">&lt;=</span> <span class="token number">4'd0</span><span class="token punctuation">;</span>
        <span class="token keyword">else</span> <span class="token function">if</span><span class="token punctuation">(</span>num<span class="token operator">==</span><span class="token number">4'd11</span><span class="token punctuation">)</span>
            num <span class="token operator">&lt;=</span> <span class="token number">4'd0</span><span class="token punctuation">;</span>
        <span class="token keyword">else</span> <span class="token function">if</span><span class="token punctuation">(</span>negedge_ps2_clk<span class="token punctuation">)</span>
            num <span class="token operator">&lt;=</span> num <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token keyword">end</span>

    <span class="token keyword">reg</span> negedge_ps2_clk_shift<span class="token punctuation">;</span>
    <span class="token important">always @</span><span class="token punctuation">(</span><span class="token keyword">posedge</span> clk<span class="token punctuation">)</span> <span class="token keyword">begin</span>
        negedge_ps2_clk_shift <span class="token operator">&lt;=</span> negedge_ps2_clk<span class="token punctuation">;</span>
    <span class="token keyword">end</span>

    <span class="token keyword">reg</span> <span class="token punctuation">[</span><span class="token number">7</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span> temp_data<span class="token punctuation">;</span>
    <span class="token important">always @</span><span class="token punctuation">(</span><span class="token keyword">posedge</span> clk <span class="token keyword">or</span> <span class="token keyword">posedge</span> rst<span class="token punctuation">)</span> <span class="token keyword">begin</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>rst<span class="token punctuation">)</span> <span class="token keyword">begin</span>
            temp_data <span class="token operator">&lt;=</span> <span class="token number">8'd0</span><span class="token punctuation">;</span>
        <span class="token keyword">end</span>
        <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>negedge_ps2_clk_shift<span class="token punctuation">)</span> <span class="token keyword">begin</span>    <span class="token comment" spellcheck="true">// receive data</span>
            <span class="token function">case</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span>
                <span class="token number">4'd2</span><span class="token punctuation">:</span> temp_data<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">&lt;=</span> ps2_data<span class="token punctuation">;</span>
                <span class="token number">4'd3</span><span class="token punctuation">:</span> temp_data<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">&lt;=</span> ps2_data<span class="token punctuation">;</span>
                <span class="token number">4'd4</span><span class="token punctuation">:</span> temp_data<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">&lt;=</span> ps2_data<span class="token punctuation">;</span>
                <span class="token number">4'd5</span><span class="token punctuation">:</span> temp_data<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">&lt;=</span> ps2_data<span class="token punctuation">;</span>
                <span class="token number">4'd6</span><span class="token punctuation">:</span> temp_data<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span> <span class="token operator">&lt;=</span> ps2_data<span class="token punctuation">;</span>
                <span class="token number">4'd7</span><span class="token punctuation">:</span> temp_data<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span> <span class="token operator">&lt;=</span> ps2_data<span class="token punctuation">;</span>
                <span class="token number">4'd8</span><span class="token punctuation">:</span> temp_data<span class="token punctuation">[</span><span class="token number">6</span><span class="token punctuation">]</span> <span class="token operator">&lt;=</span> ps2_data<span class="token punctuation">;</span>
                <span class="token number">4'd9</span><span class="token punctuation">:</span> temp_data<span class="token punctuation">[</span><span class="token number">7</span><span class="token punctuation">]</span> <span class="token operator">&lt;=</span> ps2_data<span class="token punctuation">;</span>
                <span class="token keyword">default</span><span class="token punctuation">:</span> temp_data <span class="token operator">&lt;=</span> temp_data<span class="token punctuation">;</span>
            <span class="token keyword">endcase</span>
        <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token keyword">begin</span>
            temp_data <span class="token operator">&lt;=</span> temp_data<span class="token punctuation">;</span>
        <span class="token keyword">end</span>
        <span class="token keyword">end</span>
    <span class="token keyword">reg</span> data_break<span class="token punctuation">,</span> data_done<span class="token punctuation">,</span> data_expand<span class="token punctuation">;</span>
    <span class="token keyword">reg</span> <span class="token punctuation">[</span><span class="token number">9</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span> data<span class="token punctuation">;</span>
    <span class="token important">always @</span><span class="token punctuation">(</span><span class="token keyword">posedge</span> clk <span class="token keyword">or</span> <span class="token keyword">posedge</span> rst<span class="token punctuation">)</span> <span class="token keyword">begin</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>rst<span class="token punctuation">)</span> <span class="token keyword">begin</span>
                data_break <span class="token operator">&lt;=</span> <span class="token number">1'b0</span><span class="token punctuation">;</span>
                data <span class="token operator">&lt;=</span> <span class="token number">10'b0</span><span class="token punctuation">;</span>
                data_done <span class="token operator">&lt;=</span> <span class="token number">1'b0</span><span class="token punctuation">;</span>
                data_expand <span class="token operator">&lt;=</span> <span class="token number">1'b0</span><span class="token punctuation">;</span>
        <span class="token keyword">end</span>
        <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>num <span class="token operator">==</span> <span class="token number">4'd11</span><span class="token punctuation">)</span> <span class="token keyword">begin</span>
            <span class="token function">if</span><span class="token punctuation">(</span>temp_data <span class="token operator">==</span> <span class="token number">8'hE0</span><span class="token punctuation">)</span>
            data_expand <span class="token operator">&lt;=</span> <span class="token number">1'b1</span><span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">// keyboard expand</span>
        <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>temp_data <span class="token operator">==</span> <span class="token number">8'hF0</span><span class="token punctuation">)</span>
            data_break <span class="token operator">&lt;=</span> <span class="token number">1'b1</span><span class="token punctuation">;</span>
        <span class="token keyword">else</span> <span class="token keyword">begin</span> 
            data <span class="token operator">&lt;=</span> <span class="token operator">{</span>data_expand<span class="token punctuation">,</span> data_break<span class="token punctuation">,</span> temp_data<span class="token operator">}</span><span class="token punctuation">;</span>
            data_done <span class="token operator">&lt;=</span> <span class="token number">1'b1</span><span class="token punctuation">;</span>
            data_expand <span class="token operator">&lt;=</span> <span class="token number">1'b0</span><span class="token punctuation">;</span>
            data_break <span class="token operator">&lt;=</span> <span class="token number">1'b0</span><span class="token punctuation">;</span>
        <span class="token keyword">end</span>        
    <span class="token keyword">end</span> 
    <span class="token keyword">else</span> <span class="token keyword">begin</span>
        data <span class="token operator">&lt;=</span> data<span class="token punctuation">;</span>
        data_done <span class="token operator">&lt;=</span> <span class="token number">1'b0</span><span class="token punctuation">;</span>
        data_expand <span class="token operator">&lt;=</span> data_expand<span class="token punctuation">;</span>
        data_break <span class="token operator">&lt;=</span> data_break<span class="token punctuation">;</span>
    <span class="token keyword">end</span>
    <span class="token keyword">end</span>

    <span class="token keyword">assign</span> data_out <span class="token operator">=</span> data<span class="token punctuation">;</span>
    <span class="token keyword">assign</span> ready <span class="token operator">=</span> data_done<span class="token punctuation">;</span>
<span class="token keyword">endmodule</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="四、DispNumber模块"><a href="#四、DispNumber模块" class="headerlink" title="四、DispNumber模块"></a>四、DispNumber模块</h3><pre class="line-numbers language-Verilog"><code class="language-Verilog">//MyMC14495 begin
`timescale 1ns / 1ps
module MyMC14495(D0,
                 D1,
                 D2,
                 D3,
                 LE,
                 point,
                 a,
                 b,
                 c,
                 d,
                 e,
                 f,
                 g,
                 p);

    input D0;
    input D1;
    input D2;
    input D3;
    input LE;
    input point;
    output a;
    output b;
    output c;
    output d;
    output e;
    output f;
    output g;
    output p;

    wire XLXN_16;
    wire XLXN_17;
    wire XLXN_18;
    wire XLXN_19;
    wire XLXN_20;
    wire XLXN_21;
    wire XLXN_22;
    wire XLXN_31;
    wire XLXN_32;
    wire XLXN_34;
    wire XLXN_35;
    wire XLXN_36;
    wire XLXN_38;
    wire XLXN_41;
    wire XLXN_42;
    wire XLXN_45;
    wire XLXN_48;
    wire XLXN_49;
    wire XLXN_51;
    wire XLXN_53;
    wire XLXN_64;
    wire XLXN_193;
    wire XLXN_241;
    wire XLXN_245;
    wire XLXN_254;
    wire XLXN_261;
    wire XLXN_262;
    wire XLXN_267;
    wire XLXN_274;
    wire XLXN_277;
    wire XLXN_278;
    wire XLXN_279;

    AND4  AD0 (.I0(XLXN_279),
    .I1(XLXN_278),
    .I2(D2),
    .I3(D3),
    .O(XLXN_31));
    AND4  AD1 (.I0(D0),
    .I1(D1),
    .I2(D2),
    .I3(XLXN_274),
    .O(XLXN_32));
    AND3  AD2 (.I0(XLXN_278),
    .I1(XLXN_277),
    .I2(XLXN_274),
    .O(XLXN_64));
    AND3  AD3 (.I0(D0),
    .I1(D1),
    .I2(XLXN_274),
    .O(XLXN_34));
    AND3  AD4 (.I0(D1),
    .I1(XLXN_277),
    .I2(XLXN_274),
    .O(XLXN_35));
    AND3  AD5 (.I0(D0),
    .I1(XLXN_277),
    .I2(XLXN_274),
    .O(XLXN_36));
    AND3  AD6 (.I0(D0),
    .I1(XLXN_278),
    .I2(XLXN_277),
    .O(XLXN_38));
    AND3  AD7 (.I0(XLXN_278),
    .I1(D2),
    .I2(XLXN_274),
    .O(XLXN_193));
    AND2  AD8 (.I0(D0),
    .I1(XLXN_274),
    .O(XLXN_245));
    AND4  AD9 (.I0(XLXN_279),
    .I1(D1),
    .I2(XLXN_277),
    .I3(D3),
    .O(XLXN_41));
    AND3  AD10 (.I0(D0),
    .I1(D1),
    .I2(D2),
    .O(XLXN_42));
    AND3  AD11 (.I0(D1),
    .I1(D2),
    .I2(D3),
    .O(XLXN_45));
    AND4  AD12 (.I0(XLXN_279),
    .I1(D1),
    .I2(XLXN_277),
    .I3(XLXN_274),
    .O(XLXN_241));
    AND3  AD13 (.I0(D0),
    .I1(D1),
    .I2(D3),
    .O(XLXN_48));
    AND3  AD14 (.I0(XLXN_279),
    .I1(D2),
    .I2(D3),
    .O(XLXN_49));
    AND3  AD15 (.I0(XLXN_279),
    .I1(D1),
    .I2(D2),
    .O(XLXN_254));
    AND4  AD16 (.I0(D0),
    .I1(XLXN_278),
    .I2(D2),
    .I3(XLXN_274),
    .O(XLXN_51));
    AND4  AD17 (.I0(D0),
    .I1(D1),
    .I2(XLXN_277),
    .I3(D3),
    .O(XLXN_53));
    AND4  AD18 (.I0(D0),
    .I1(XLXN_278),
    .I2(D2),
    .I3(D3),
    .O(XLXN_262));
    AND4  AD19 (.I0(XLXN_279),
    .I1(XLXN_278),
    .I2(D2),
    .I3(XLXN_274),
    .O(XLXN_267));
    AND4  AD20 (.I0(D0),
    .I1(XLXN_277),
    .I2(XLXN_278),
    .I3(XLXN_274),
    .O(XLXN_261));
    OR2  XLXI_1 (.I0(LE),
    .I1(XLXN_16),
    .O(g));
    OR2  XLXI_2 (.I0(LE),
    .I1(XLXN_17),
    .O(f));
    OR2  XLXI_3 (.I0(LE),
    .I1(XLXN_18),
    .O(e));
    OR2  XLXI_4 (.I0(LE),
    .I1(XLXN_19),
    .O(d));
    OR2  XLXI_5 (.I0(LE),
    .I1(XLXN_20),
    .O(c));
    OR2  XLXI_6 (.I0(LE),
    .I1(XLXN_21),
    .O(b));
    OR2  XLXI_8 (.I0(LE),
    .I1(XLXN_22),
    .O(a));
    OR3  XLXI_15 (.I0(XLXN_31),
    .I1(XLXN_32),
    .I2(XLXN_64),
    .O(XLXN_16));
    OR3  XLXI_16 (.I0(XLXN_38),
    .I1(XLXN_193),
    .I2(XLXN_245),
    .O(XLXN_18));
    OR3  XLXI_17 (.I0(XLXN_45),
    .I1(XLXN_241),
    .I2(XLXN_49),
    .O(XLXN_20));
    OR4  XLXI_18 (.I0(XLXN_34),
    .I1(XLXN_35),
    .I2(XLXN_36),
    .I3(XLXN_262),
    .O(XLXN_17));
    OR4  XLXI_19 (.I0(XLXN_41),
    .I1(XLXN_42),
    .I2(XLXN_267),
    .I3(XLXN_261),
    .O(XLXN_19));
    OR4  XLXI_20 (.I0(XLXN_48),
    .I1(XLXN_49),
    .I2(XLXN_254),
    .I3(XLXN_51),
    .O(XLXN_21));
    OR4  XLXI_21 (.I0(XLXN_53),
    .I1(XLXN_262),
    .I2(XLXN_267),
    .I3(XLXN_261),
    .O(XLXN_22));
    INV  XLXI_23 (.I(point),
    .O(p));
    INV  XLXI_91 (.I(D3),
    .O(XLXN_274));
    INV  XLXI_92 (.I(D2),
    .O(XLXN_277));
    INV  XLXI_102 (.I(D1),
    .O(XLXN_278));
    INV  XLXI_103 (.I(D0),
    .O(XLXN_279));
endmodule
    //MyMC14495 end

//MUX 4 TO 1 4bit begin
`timescale 1ns / 1ps
module Mux4to1b4_DispNumber(I0,
   I1,
   I2,
   I3,
   S,
   O);

   input [3:0] I0;
   input [3:0] I1;
   input [3:0] I2;
   input [3:0] I3;
   input [1:0] S;
   output reg[3:0] O;

   always @(*)begin
      case({S[1],S[0]})
            2'b00 : O = I0;
            2'b01 : O = I1; 
            2'b10 : O = I2;
            2'b11 : O = I3;
           default: O = I0;
      endcase
   end

endmodule
//MUX 4 TO 1 4bit end

//MUX 4 TO 1 begin
`timescale 1ns / 1ps
module Mux4to1(I0,
   I1,
   I2,
   I3,
   S,
   O);

   input I0;
   input I1;
   input I2;
   input I3;
   input [1:0] S;
   output reg O;
   always @(*)begin
         case({S[1],S[0]})
            2'b00 : O <= I0;
            2'b01 : O <= I1;
            2'b10 : O <= I2;
            2'b11 : O <= I3;
            default:O <= I0;
         endcase
   end
endmodule
//MUX 4 TO 1 end

`timescale 1ns / 1ps
module clkdiv_DispNumber(input wire clk,
      input wire rst,
      output reg[31:0] clkdiv
      );
      //clock divider
      always @ (posedge clk or posedge rst) begin
         if (rst) clkdiv <= 0;
         else clkdiv     <= clkdiv + 1'b1;
      end
endmodule

`timescale  100 ps / 10 ps
module INV4(O0, O1, O2, O3, I0, I1, I2, I3);


output O0;
output O1;
output O2;
output O3;

input  I0;
input  I1;
input  I2;
input  I3;

assign O0 = !I0;
assign O1 = !I1;
assign O2 = !I2;
assign O3 = !I3;

endmodule

`timescale  100 ps / 10 ps
module D2_4E (D0, D1, D2, D3, A0, A1);


output D0;
output D1;
output D2;
output D3;

input  A0;
input  A1;

reg D0;
reg D1;
reg D2;
reg D3;

always @(*)begin
case({A1,A0})
   2'b00 : {D3,D2,D1,D0}  <= 4'b0001;
   2'b01 : {D3,D2,D1,D0}  <= 4'b0010;
   2'b10 : {D3,D2,D1,D0}  <= 4'b0100;
   2'b11 : {D3,D2,D1,D0}  <= 4'b1000;
   default: {D3,D2,D1,D0} <= 4'b0000;
endcase
end
endmodule

`timescale 1ns / 1ps
module DisplaySync(Hexs,
LES,
point,
Scan,
AN,
Hex,
LE,
p);

input [15:0] Hexs;
input [3:0] LES;
input [3:0] point;
input [1:0] Scan;
output [3:0] AN;
output [3:0] Hex;
output LE;
output p;

wire D0,D1,D2,D3;

Mux4to1b4_DispNumber  Mux4to1b4_1 (.I0(Hexs[3:0]),
.I1(Hexs[7:4]),
.I2(Hexs[11:8]),
.I3(Hexs[15:12]),
.S(Scan[1:0]),
.O(Hex[3:0]));

Mux4to1  Mux4to1_1 (.I0(point[0]),
.I1(point[1]),
.I2(point[2]),
.I3(point[3]),
.S(Scan[1:0]),
.O(p));

Mux4to1  Mux4to1_2 (.I0(LES[0]),
.I1(LES[1]),
.I2(LES[2]),
.I3(LES[3]),
.S(Scan[1:0]),
.O(LE));

D2_4E D2_4E_1 (.A0(Scan[0]),
.A1(Scan[1]),
.D0(D0),
.D1(D1),
.D2(D2),
.D3(D3));

INV4  INV4_1 (.I0(D0),
.I1(D1),
.I2(D2),
.I3(D3),
.O0(AN[0]),
.O1(AN[1]),
.O2(AN[2]),
.O3(AN[3]));
endmodule


`timescale 1ns / 1ps
module DispNumber(clk,
   HEXS,
   LES,
   points,
   RST,
   AN,
   Segment
   );

   input clk;
   input [15:0] HEXS;
   input [3:0] LES;
   input [3:0] points;
   input RST;
   output [3:0] AN;
   output [7:0] Segment;

   wire [31:0] clkdiv;
   wire [3:0] Hex;
   wire LE;
   wire p;

   DisplaySync DSync_1 (.Hexs(HEXS[15:0]),
   .LES(~LES[3:0]),
   .point(points[3:0]),
   .Scan(clkdiv[18:17]),
   .AN(AN[3:0]),
   .Hex(Hex[3:0]),
   .LE(LE),
   .p(p));

   MyMC14495  MyMC14495_1 (.D0(Hex[0]),
   .D1(Hex[1]),
   .D2(Hex[2]),
   .D3(Hex[3]),
   .LE(LE),
   .point(p),
   .a(Segment[0]),
   .b(Segment[1]),
   .c(Segment[2]),
   .d(Segment[3]),
   .e(Segment[4]),
   .f(Segment[5]),
   .g(Segment[6]),
   .p(Segment[7]));

   clkdiv_DispNumber  clkdiv_1 (.clk(clk),
   .rst(RST),
   .clkdiv(clkdiv[31:0]));

endmodule<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="五、串行数码管驱动"><a href="#五、串行数码管驱动" class="headerlink" title="五、串行数码管驱动"></a>五、串行数码管驱动</h3><pre class="line-numbers language-verilog"><code class="language-verilog"><span class="token constant">`timescale</span> <span class="token number">1</span>ns <span class="token operator">/</span> <span class="token number">1</span>ps


<span class="token keyword">module</span> <span class="token function">SEG_DRV</span><span class="token punctuation">(</span>
               <span class="token keyword">input</span> clk<span class="token punctuation">,</span>
               <span class="token keyword">input</span> <span class="token punctuation">[</span><span class="token number">31</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span>num<span class="token punctuation">,</span>
               <span class="token keyword">input</span> ena<span class="token punctuation">,</span>
               <span class="token keyword">input</span> <span class="token punctuation">[</span><span class="token number">7</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span>point<span class="token punctuation">,</span>
               <span class="token keyword">output</span> S_DT<span class="token punctuation">,</span>
               <span class="token keyword">output</span> S_CLK<span class="token punctuation">,</span>
               <span class="token keyword">output</span> S_CLR<span class="token punctuation">,</span>
               <span class="token keyword">output</span> S_EN
    <span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">wire</span> <span class="token punctuation">[</span><span class="token number">63</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span>dto<span class="token punctuation">;</span>

MC14495 <span class="token function">m1</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token function">D0</span><span class="token punctuation">(</span>num<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token function">D1</span><span class="token punctuation">(</span>num<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token function">D2</span><span class="token punctuation">(</span>num<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token function">D3</span><span class="token punctuation">(</span>num<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token function">LE</span><span class="token punctuation">(</span><span class="token operator">~</span>ena<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token function">point</span><span class="token punctuation">(</span>point<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token function">a</span><span class="token punctuation">(</span>dto<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token function">b</span><span class="token punctuation">(</span>dto<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token function">c</span><span class="token punctuation">(</span>dto<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token function">d</span><span class="token punctuation">(</span>dto<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token function">e</span><span class="token punctuation">(</span>dto<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token function">f</span><span class="token punctuation">(</span>dto<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token function">g</span><span class="token punctuation">(</span>dto<span class="token punctuation">[</span><span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token function">p</span><span class="token punctuation">(</span>dto<span class="token punctuation">[</span><span class="token number">7</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
MC14495 <span class="token function">m2</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token function">D0</span><span class="token punctuation">(</span>num<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token function">D1</span><span class="token punctuation">(</span>num<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token function">D2</span><span class="token punctuation">(</span>num<span class="token punctuation">[</span><span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token function">D3</span><span class="token punctuation">(</span>num<span class="token punctuation">[</span><span class="token number">7</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token function">LE</span><span class="token punctuation">(</span><span class="token operator">~</span>ena<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token function">point</span><span class="token punctuation">(</span>point<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token function">a</span><span class="token punctuation">(</span>dto<span class="token punctuation">[</span><span class="token number">8</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token function">b</span><span class="token punctuation">(</span>dto<span class="token punctuation">[</span><span class="token number">9</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token function">c</span><span class="token punctuation">(</span>dto<span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token function">d</span><span class="token punctuation">(</span>dto<span class="token punctuation">[</span><span class="token number">11</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token function">e</span><span class="token punctuation">(</span>dto<span class="token punctuation">[</span><span class="token number">12</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token function">f</span><span class="token punctuation">(</span>dto<span class="token punctuation">[</span><span class="token number">13</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token function">g</span><span class="token punctuation">(</span>dto<span class="token punctuation">[</span><span class="token number">14</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token function">p</span><span class="token punctuation">(</span>dto<span class="token punctuation">[</span><span class="token number">15</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
MC14495 <span class="token function">m3</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token function">D0</span><span class="token punctuation">(</span>num<span class="token punctuation">[</span><span class="token number">8</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token function">D1</span><span class="token punctuation">(</span>num<span class="token punctuation">[</span><span class="token number">9</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token function">D2</span><span class="token punctuation">(</span>num<span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token function">D3</span><span class="token punctuation">(</span>num<span class="token punctuation">[</span><span class="token number">11</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token function">LE</span><span class="token punctuation">(</span><span class="token operator">~</span>ena<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token function">point</span><span class="token punctuation">(</span>point<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token function">a</span><span class="token punctuation">(</span>dto<span class="token punctuation">[</span><span class="token number">16</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token function">b</span><span class="token punctuation">(</span>dto<span class="token punctuation">[</span><span class="token number">17</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token function">c</span><span class="token punctuation">(</span>dto<span class="token punctuation">[</span><span class="token number">18</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token function">d</span><span class="token punctuation">(</span>dto<span class="token punctuation">[</span><span class="token number">19</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token function">e</span><span class="token punctuation">(</span>dto<span class="token punctuation">[</span><span class="token number">20</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token function">f</span><span class="token punctuation">(</span>dto<span class="token punctuation">[</span><span class="token number">21</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token function">g</span><span class="token punctuation">(</span>dto<span class="token punctuation">[</span><span class="token number">22</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token function">p</span><span class="token punctuation">(</span>dto<span class="token punctuation">[</span><span class="token number">23</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
MC14495 <span class="token function">m4</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token function">D0</span><span class="token punctuation">(</span>num<span class="token punctuation">[</span><span class="token number">12</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token function">D1</span><span class="token punctuation">(</span>num<span class="token punctuation">[</span><span class="token number">13</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token function">D2</span><span class="token punctuation">(</span>num<span class="token punctuation">[</span><span class="token number">14</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token function">D3</span><span class="token punctuation">(</span>num<span class="token punctuation">[</span><span class="token number">15</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token function">LE</span><span class="token punctuation">(</span><span class="token operator">~</span>ena<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token function">point</span><span class="token punctuation">(</span>point<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token function">a</span><span class="token punctuation">(</span>dto<span class="token punctuation">[</span><span class="token number">24</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token function">b</span><span class="token punctuation">(</span>dto<span class="token punctuation">[</span><span class="token number">25</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token function">c</span><span class="token punctuation">(</span>dto<span class="token punctuation">[</span><span class="token number">26</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token function">d</span><span class="token punctuation">(</span>dto<span class="token punctuation">[</span><span class="token number">27</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token function">e</span><span class="token punctuation">(</span>dto<span class="token punctuation">[</span><span class="token number">28</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token function">f</span><span class="token punctuation">(</span>dto<span class="token punctuation">[</span><span class="token number">29</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token function">g</span><span class="token punctuation">(</span>dto<span class="token punctuation">[</span><span class="token number">30</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token function">p</span><span class="token punctuation">(</span>dto<span class="token punctuation">[</span><span class="token number">31</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
MC14495 <span class="token function">m5</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token function">D0</span><span class="token punctuation">(</span>num<span class="token punctuation">[</span><span class="token number">16</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token function">D1</span><span class="token punctuation">(</span>num<span class="token punctuation">[</span><span class="token number">17</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token function">D2</span><span class="token punctuation">(</span>num<span class="token punctuation">[</span><span class="token number">18</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token function">D3</span><span class="token punctuation">(</span>num<span class="token punctuation">[</span><span class="token number">19</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token function">LE</span><span class="token punctuation">(</span><span class="token operator">~</span>ena<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token function">point</span><span class="token punctuation">(</span>point<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token function">a</span><span class="token punctuation">(</span>dto<span class="token punctuation">[</span><span class="token number">32</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token function">b</span><span class="token punctuation">(</span>dto<span class="token punctuation">[</span><span class="token number">33</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token function">c</span><span class="token punctuation">(</span>dto<span class="token punctuation">[</span><span class="token number">34</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token function">d</span><span class="token punctuation">(</span>dto<span class="token punctuation">[</span><span class="token number">35</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token function">e</span><span class="token punctuation">(</span>dto<span class="token punctuation">[</span><span class="token number">36</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token function">f</span><span class="token punctuation">(</span>dto<span class="token punctuation">[</span><span class="token number">37</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token function">g</span><span class="token punctuation">(</span>dto<span class="token punctuation">[</span><span class="token number">38</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token function">p</span><span class="token punctuation">(</span>dto<span class="token punctuation">[</span><span class="token number">39</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
MC14495 <span class="token function">m6</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token function">D0</span><span class="token punctuation">(</span>num<span class="token punctuation">[</span><span class="token number">20</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token function">D1</span><span class="token punctuation">(</span>num<span class="token punctuation">[</span><span class="token number">21</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token function">D2</span><span class="token punctuation">(</span>num<span class="token punctuation">[</span><span class="token number">22</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token function">D3</span><span class="token punctuation">(</span>num<span class="token punctuation">[</span><span class="token number">23</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token function">LE</span><span class="token punctuation">(</span><span class="token operator">~</span>ena<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token function">point</span><span class="token punctuation">(</span>point<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token function">a</span><span class="token punctuation">(</span>dto<span class="token punctuation">[</span><span class="token number">40</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token function">b</span><span class="token punctuation">(</span>dto<span class="token punctuation">[</span><span class="token number">41</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token function">c</span><span class="token punctuation">(</span>dto<span class="token punctuation">[</span><span class="token number">42</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token function">d</span><span class="token punctuation">(</span>dto<span class="token punctuation">[</span><span class="token number">43</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token function">e</span><span class="token punctuation">(</span>dto<span class="token punctuation">[</span><span class="token number">44</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token function">f</span><span class="token punctuation">(</span>dto<span class="token punctuation">[</span><span class="token number">45</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token function">g</span><span class="token punctuation">(</span>dto<span class="token punctuation">[</span><span class="token number">46</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token function">p</span><span class="token punctuation">(</span>dto<span class="token punctuation">[</span><span class="token number">47</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
MC14495 <span class="token function">m7</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token function">D0</span><span class="token punctuation">(</span>num<span class="token punctuation">[</span><span class="token number">24</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token function">D1</span><span class="token punctuation">(</span>num<span class="token punctuation">[</span><span class="token number">25</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token function">D2</span><span class="token punctuation">(</span>num<span class="token punctuation">[</span><span class="token number">26</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token function">D3</span><span class="token punctuation">(</span>num<span class="token punctuation">[</span><span class="token number">27</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token function">LE</span><span class="token punctuation">(</span><span class="token operator">~</span>ena<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token function">point</span><span class="token punctuation">(</span>point<span class="token punctuation">[</span><span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token function">a</span><span class="token punctuation">(</span>dto<span class="token punctuation">[</span><span class="token number">48</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token function">b</span><span class="token punctuation">(</span>dto<span class="token punctuation">[</span><span class="token number">49</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token function">c</span><span class="token punctuation">(</span>dto<span class="token punctuation">[</span><span class="token number">50</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token function">d</span><span class="token punctuation">(</span>dto<span class="token punctuation">[</span><span class="token number">51</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token function">e</span><span class="token punctuation">(</span>dto<span class="token punctuation">[</span><span class="token number">52</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token function">f</span><span class="token punctuation">(</span>dto<span class="token punctuation">[</span><span class="token number">53</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token function">g</span><span class="token punctuation">(</span>dto<span class="token punctuation">[</span><span class="token number">54</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token function">p</span><span class="token punctuation">(</span>dto<span class="token punctuation">[</span><span class="token number">55</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
MC14495 <span class="token function">m8</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token function">D0</span><span class="token punctuation">(</span>num<span class="token punctuation">[</span><span class="token number">28</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token function">D1</span><span class="token punctuation">(</span>num<span class="token punctuation">[</span><span class="token number">29</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token function">D2</span><span class="token punctuation">(</span>num<span class="token punctuation">[</span><span class="token number">30</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token function">D3</span><span class="token punctuation">(</span>num<span class="token punctuation">[</span><span class="token number">31</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token function">LE</span><span class="token punctuation">(</span><span class="token operator">~</span>ena<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token function">point</span><span class="token punctuation">(</span>point<span class="token punctuation">[</span><span class="token number">7</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token function">a</span><span class="token punctuation">(</span>dto<span class="token punctuation">[</span><span class="token number">56</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token function">b</span><span class="token punctuation">(</span>dto<span class="token punctuation">[</span><span class="token number">57</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token function">c</span><span class="token punctuation">(</span>dto<span class="token punctuation">[</span><span class="token number">58</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token function">d</span><span class="token punctuation">(</span>dto<span class="token punctuation">[</span><span class="token number">59</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token function">e</span><span class="token punctuation">(</span>dto<span class="token punctuation">[</span><span class="token number">60</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token function">f</span><span class="token punctuation">(</span>dto<span class="token punctuation">[</span><span class="token number">61</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token function">g</span><span class="token punctuation">(</span>dto<span class="token punctuation">[</span><span class="token number">62</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token function">p</span><span class="token punctuation">(</span>dto<span class="token punctuation">[</span><span class="token number">63</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>



SEG_P2S <span class="token function">m9</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token function">clk</span><span class="token punctuation">(</span>clk<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token function">data_in</span><span class="token punctuation">(</span>dto<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token function">ena</span><span class="token punctuation">(</span>ena<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token function">S_DT</span><span class="token punctuation">(</span>S_DT<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token function">S_CLK</span><span class="token punctuation">(</span>S_CLK<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token function">S_CLR</span><span class="token punctuation">(</span>S_CLR<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token function">S_EN</span><span class="token punctuation">(</span>S_EN<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>



<span class="token keyword">endmodule</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="六、并行转串行模块"><a href="#六、并行转串行模块" class="headerlink" title="六、并行转串行模块"></a>六、并行转串行模块</h3><pre class="line-numbers language-verilog"><code class="language-verilog"><span class="token constant">`timescale</span> <span class="token number">1</span>ns <span class="token operator">/</span> <span class="token number">1</span>ps
<span class="token keyword">module</span> <span class="token function">SEG_P2S</span><span class="token punctuation">(</span>clk<span class="token punctuation">,</span>
               data_in<span class="token punctuation">,</span>
               ena<span class="token punctuation">,</span>
               S_DT<span class="token punctuation">,</span>
               S_CLK<span class="token punctuation">,</span>
               S_CLR<span class="token punctuation">,</span>
               S_EN<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">parameter</span> WIDTH <span class="token operator">=</span> <span class="token number">64</span><span class="token punctuation">;</span>
    <span class="token keyword">parameter</span> DELAY <span class="token operator">=</span> <span class="token number">12</span><span class="token punctuation">;</span>

    <span class="token keyword">input</span> clk<span class="token punctuation">;</span>
    <span class="token keyword">input</span> ena<span class="token punctuation">;</span>
    <span class="token keyword">input</span> <span class="token punctuation">[</span>WIDTH<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span> data_in<span class="token punctuation">;</span>
    <span class="token keyword">output</span> S_DT<span class="token punctuation">;</span>
    <span class="token keyword">output</span> S_CLK<span class="token punctuation">;</span>
    <span class="token keyword">output</span> S_CLR<span class="token punctuation">;</span>
    <span class="token keyword">output</span> S_EN<span class="token punctuation">;</span>

    <span class="token keyword">wire</span> s_clk<span class="token punctuation">,</span>s_data<span class="token punctuation">;</span>
    <span class="token keyword">reg</span> out_ena<span class="token punctuation">;</span>

    <span class="token keyword">assign</span> S_CLK <span class="token operator">=</span> s_clk<span class="token punctuation">;</span>
    <span class="token keyword">assign</span> S_DT  <span class="token operator">=</span> s_data<span class="token punctuation">;</span>
    <span class="token keyword">assign</span> S_EN  <span class="token operator">=</span> out_ena<span class="token punctuation">;</span>
    <span class="token keyword">assign</span> S_CLR <span class="token operator">=</span> <span class="token number">1'b1</span><span class="token punctuation">;</span>

    <span class="token keyword">reg</span> <span class="token punctuation">[</span>WIDTH<span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span> shift<span class="token punctuation">;</span>
    <span class="token keyword">reg</span> <span class="token punctuation">[</span>DELAY<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span> counter <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token keyword">wire</span> s_clk_Ena<span class="token punctuation">;</span>

    <span class="token keyword">assign</span> s_clk_Ena <span class="token operator">=</span> <span class="token operator">|</span>shift<span class="token punctuation">[</span>WIDTH<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">assign</span> s_clk     <span class="token operator">=</span> <span class="token operator">~</span>clk <span class="token operator">&amp;&amp;</span> s_clk_Ena<span class="token punctuation">;</span>
    <span class="token keyword">assign</span> s_data    <span class="token operator">=</span> shift<span class="token punctuation">[</span>WIDTH<span class="token punctuation">]</span><span class="token punctuation">;</span>

    <span class="token important">always @</span> <span class="token punctuation">(</span><span class="token keyword">posedge</span> clk <span class="token keyword">or</span> <span class="token keyword">negedge</span> ena<span class="token punctuation">)</span>
    <span class="token keyword">begin</span>
        <span class="token function">if</span><span class="token punctuation">(</span>ena <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token keyword">begin</span>
            shift <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">;</span>
            counter <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">;</span>
            out_ena <span class="token operator">&lt;=</span> <span class="token number">1'b1</span><span class="token punctuation">;</span>
        <span class="token keyword">end</span>
        <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>s_clk_Ena<span class="token punctuation">)</span>
            shift <span class="token operator">&lt;=</span> <span class="token operator">{</span>shift<span class="token punctuation">[</span>WIDTH <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">1'b0</span><span class="token operator">}</span><span class="token punctuation">;</span>
        <span class="token keyword">else</span>
        <span class="token keyword">begin</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">&amp;</span>counter<span class="token punctuation">)</span> <span class="token keyword">begin</span>
                shift <span class="token operator">&lt;=</span> <span class="token operator">{</span>data_in<span class="token punctuation">,</span> <span class="token number">1'b1</span><span class="token operator">}</span><span class="token punctuation">;</span>
                out_ena    <span class="token operator">&lt;=</span> <span class="token number">1'b0</span><span class="token punctuation">;</span>
            <span class="token keyword">end</span> <span class="token keyword">else</span> <span class="token keyword">begin</span>
                out_ena      <span class="token operator">&lt;=</span> <span class="token number">1'b1</span><span class="token punctuation">;</span>
            <span class="token keyword">end</span>

            counter <span class="token operator">&lt;=</span> counter <span class="token operator">+</span> <span class="token number">1'b1</span><span class="token punctuation">;</span>
        <span class="token keyword">end</span>
    <span class="token keyword">end</span>

<span class="token keyword">endmodule</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="七、MC14495模块"><a href="#七、MC14495模块" class="headerlink" title="七、MC14495模块"></a>七、MC14495模块</h3><pre class="line-numbers language-verilog"><code class="language-verilog"><span class="token comment" spellcheck="true">//MyMC14495 begin</span>
<span class="token constant">`timescale</span> <span class="token number">1</span>ns <span class="token operator">/</span> <span class="token number">1</span>ps
<span class="token keyword">module</span>   <span class="token function">MC14495</span><span class="token punctuation">(</span>D0<span class="token punctuation">,</span>
                 D1<span class="token punctuation">,</span>
                 D2<span class="token punctuation">,</span>
                 D3<span class="token punctuation">,</span>
                 LE<span class="token punctuation">,</span>
                 point<span class="token punctuation">,</span>
                 a<span class="token punctuation">,</span>
                 b<span class="token punctuation">,</span>
                 c<span class="token punctuation">,</span>
                 d<span class="token punctuation">,</span>
                 e<span class="token punctuation">,</span>
                 f<span class="token punctuation">,</span>
                 g<span class="token punctuation">,</span>
                 p<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">input</span> D0<span class="token punctuation">;</span>
    <span class="token keyword">input</span> D1<span class="token punctuation">;</span>
    <span class="token keyword">input</span> D2<span class="token punctuation">;</span>
    <span class="token keyword">input</span> D3<span class="token punctuation">;</span>
    <span class="token keyword">input</span> LE<span class="token punctuation">;</span>
    <span class="token keyword">input</span> point<span class="token punctuation">;</span>
    <span class="token keyword">output</span> a<span class="token punctuation">;</span>
    <span class="token keyword">output</span> b<span class="token punctuation">;</span>
    <span class="token keyword">output</span> c<span class="token punctuation">;</span>
    <span class="token keyword">output</span> d<span class="token punctuation">;</span>
    <span class="token keyword">output</span> e<span class="token punctuation">;</span>
    <span class="token keyword">output</span> f<span class="token punctuation">;</span>
    <span class="token keyword">output</span> g<span class="token punctuation">;</span>
    <span class="token keyword">output</span> p<span class="token punctuation">;</span>

    <span class="token keyword">wire</span> XLXN_16<span class="token punctuation">;</span>
    <span class="token keyword">wire</span> XLXN_17<span class="token punctuation">;</span>
    <span class="token keyword">wire</span> XLXN_18<span class="token punctuation">;</span>
    <span class="token keyword">wire</span> XLXN_19<span class="token punctuation">;</span>
    <span class="token keyword">wire</span> XLXN_20<span class="token punctuation">;</span>
    <span class="token keyword">wire</span> XLXN_21<span class="token punctuation">;</span>
    <span class="token keyword">wire</span> XLXN_22<span class="token punctuation">;</span>
    <span class="token keyword">wire</span> XLXN_31<span class="token punctuation">;</span>
    <span class="token keyword">wire</span> XLXN_32<span class="token punctuation">;</span>
    <span class="token keyword">wire</span> XLXN_34<span class="token punctuation">;</span>
    <span class="token keyword">wire</span> XLXN_35<span class="token punctuation">;</span>
    <span class="token keyword">wire</span> XLXN_36<span class="token punctuation">;</span>
    <span class="token keyword">wire</span> XLXN_38<span class="token punctuation">;</span>
    <span class="token keyword">wire</span> XLXN_41<span class="token punctuation">;</span>
    <span class="token keyword">wire</span> XLXN_42<span class="token punctuation">;</span>
    <span class="token keyword">wire</span> XLXN_45<span class="token punctuation">;</span>
    <span class="token keyword">wire</span> XLXN_48<span class="token punctuation">;</span>
    <span class="token keyword">wire</span> XLXN_49<span class="token punctuation">;</span>
    <span class="token keyword">wire</span> XLXN_51<span class="token punctuation">;</span>
    <span class="token keyword">wire</span> XLXN_53<span class="token punctuation">;</span>
    <span class="token keyword">wire</span> XLXN_64<span class="token punctuation">;</span>
    <span class="token keyword">wire</span> XLXN_193<span class="token punctuation">;</span>
    <span class="token keyword">wire</span> XLXN_241<span class="token punctuation">;</span>
    <span class="token keyword">wire</span> XLXN_245<span class="token punctuation">;</span>
    <span class="token keyword">wire</span> XLXN_254<span class="token punctuation">;</span>
    <span class="token keyword">wire</span> XLXN_261<span class="token punctuation">;</span>
    <span class="token keyword">wire</span> XLXN_262<span class="token punctuation">;</span>
    <span class="token keyword">wire</span> XLXN_267<span class="token punctuation">;</span>
    <span class="token keyword">wire</span> XLXN_274<span class="token punctuation">;</span>
    <span class="token keyword">wire</span> XLXN_277<span class="token punctuation">;</span>
    <span class="token keyword">wire</span> XLXN_278<span class="token punctuation">;</span>
    <span class="token keyword">wire</span> XLXN_279<span class="token punctuation">;</span>

    AND4  AD0 <span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token function">I0</span><span class="token punctuation">(</span>XLXN_279<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">.</span><span class="token function">I1</span><span class="token punctuation">(</span>XLXN_278<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">.</span><span class="token function">I2</span><span class="token punctuation">(</span>D2<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">.</span><span class="token function">I3</span><span class="token punctuation">(</span>D3<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">.</span><span class="token function">O</span><span class="token punctuation">(</span>XLXN_31<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    AND4  AD1 <span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token function">I0</span><span class="token punctuation">(</span>D0<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">.</span><span class="token function">I1</span><span class="token punctuation">(</span>D1<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">.</span><span class="token function">I2</span><span class="token punctuation">(</span>D2<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">.</span><span class="token function">I3</span><span class="token punctuation">(</span>XLXN_274<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">.</span><span class="token function">O</span><span class="token punctuation">(</span>XLXN_32<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    AND3  AD2 <span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token function">I0</span><span class="token punctuation">(</span>XLXN_278<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">.</span><span class="token function">I1</span><span class="token punctuation">(</span>XLXN_277<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">.</span><span class="token function">I2</span><span class="token punctuation">(</span>XLXN_274<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">.</span><span class="token function">O</span><span class="token punctuation">(</span>XLXN_64<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    AND3  AD3 <span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token function">I0</span><span class="token punctuation">(</span>D0<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">.</span><span class="token function">I1</span><span class="token punctuation">(</span>D1<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">.</span><span class="token function">I2</span><span class="token punctuation">(</span>XLXN_274<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">.</span><span class="token function">O</span><span class="token punctuation">(</span>XLXN_34<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    AND3  AD4 <span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token function">I0</span><span class="token punctuation">(</span>D1<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">.</span><span class="token function">I1</span><span class="token punctuation">(</span>XLXN_277<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">.</span><span class="token function">I2</span><span class="token punctuation">(</span>XLXN_274<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">.</span><span class="token function">O</span><span class="token punctuation">(</span>XLXN_35<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    AND3  AD5 <span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token function">I0</span><span class="token punctuation">(</span>D0<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">.</span><span class="token function">I1</span><span class="token punctuation">(</span>XLXN_277<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">.</span><span class="token function">I2</span><span class="token punctuation">(</span>XLXN_274<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">.</span><span class="token function">O</span><span class="token punctuation">(</span>XLXN_36<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    AND3  AD6 <span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token function">I0</span><span class="token punctuation">(</span>D0<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">.</span><span class="token function">I1</span><span class="token punctuation">(</span>XLXN_278<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">.</span><span class="token function">I2</span><span class="token punctuation">(</span>XLXN_277<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">.</span><span class="token function">O</span><span class="token punctuation">(</span>XLXN_38<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    AND3  AD7 <span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token function">I0</span><span class="token punctuation">(</span>XLXN_278<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">.</span><span class="token function">I1</span><span class="token punctuation">(</span>D2<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">.</span><span class="token function">I2</span><span class="token punctuation">(</span>XLXN_274<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">.</span><span class="token function">O</span><span class="token punctuation">(</span>XLXN_193<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    AND2  AD8 <span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token function">I0</span><span class="token punctuation">(</span>D0<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">.</span><span class="token function">I1</span><span class="token punctuation">(</span>XLXN_274<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">.</span><span class="token function">O</span><span class="token punctuation">(</span>XLXN_245<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    AND4  AD9 <span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token function">I0</span><span class="token punctuation">(</span>XLXN_279<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">.</span><span class="token function">I1</span><span class="token punctuation">(</span>D1<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">.</span><span class="token function">I2</span><span class="token punctuation">(</span>XLXN_277<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">.</span><span class="token function">I3</span><span class="token punctuation">(</span>D3<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">.</span><span class="token function">O</span><span class="token punctuation">(</span>XLXN_41<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    AND3  AD10 <span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token function">I0</span><span class="token punctuation">(</span>D0<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">.</span><span class="token function">I1</span><span class="token punctuation">(</span>D1<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">.</span><span class="token function">I2</span><span class="token punctuation">(</span>D2<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">.</span><span class="token function">O</span><span class="token punctuation">(</span>XLXN_42<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    AND3  AD11 <span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token function">I0</span><span class="token punctuation">(</span>D1<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">.</span><span class="token function">I1</span><span class="token punctuation">(</span>D2<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">.</span><span class="token function">I2</span><span class="token punctuation">(</span>D3<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">.</span><span class="token function">O</span><span class="token punctuation">(</span>XLXN_45<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    AND4  AD12 <span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token function">I0</span><span class="token punctuation">(</span>XLXN_279<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">.</span><span class="token function">I1</span><span class="token punctuation">(</span>D1<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">.</span><span class="token function">I2</span><span class="token punctuation">(</span>XLXN_277<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">.</span><span class="token function">I3</span><span class="token punctuation">(</span>XLXN_274<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">.</span><span class="token function">O</span><span class="token punctuation">(</span>XLXN_241<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    AND3  AD13 <span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token function">I0</span><span class="token punctuation">(</span>D0<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">.</span><span class="token function">I1</span><span class="token punctuation">(</span>D1<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">.</span><span class="token function">I2</span><span class="token punctuation">(</span>D3<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">.</span><span class="token function">O</span><span class="token punctuation">(</span>XLXN_48<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    AND3  AD14 <span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token function">I0</span><span class="token punctuation">(</span>XLXN_279<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">.</span><span class="token function">I1</span><span class="token punctuation">(</span>D2<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">.</span><span class="token function">I2</span><span class="token punctuation">(</span>D3<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">.</span><span class="token function">O</span><span class="token punctuation">(</span>XLXN_49<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    AND3  AD15 <span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token function">I0</span><span class="token punctuation">(</span>XLXN_279<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">.</span><span class="token function">I1</span><span class="token punctuation">(</span>D1<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">.</span><span class="token function">I2</span><span class="token punctuation">(</span>D2<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">.</span><span class="token function">O</span><span class="token punctuation">(</span>XLXN_254<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    AND4  AD16 <span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token function">I0</span><span class="token punctuation">(</span>D0<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">.</span><span class="token function">I1</span><span class="token punctuation">(</span>XLXN_278<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">.</span><span class="token function">I2</span><span class="token punctuation">(</span>D2<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">.</span><span class="token function">I3</span><span class="token punctuation">(</span>XLXN_274<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">.</span><span class="token function">O</span><span class="token punctuation">(</span>XLXN_51<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    AND4  AD17 <span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token function">I0</span><span class="token punctuation">(</span>D0<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">.</span><span class="token function">I1</span><span class="token punctuation">(</span>D1<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">.</span><span class="token function">I2</span><span class="token punctuation">(</span>XLXN_277<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">.</span><span class="token function">I3</span><span class="token punctuation">(</span>D3<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">.</span><span class="token function">O</span><span class="token punctuation">(</span>XLXN_53<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    AND4  AD18 <span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token function">I0</span><span class="token punctuation">(</span>D0<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">.</span><span class="token function">I1</span><span class="token punctuation">(</span>XLXN_278<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">.</span><span class="token function">I2</span><span class="token punctuation">(</span>D2<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">.</span><span class="token function">I3</span><span class="token punctuation">(</span>D3<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">.</span><span class="token function">O</span><span class="token punctuation">(</span>XLXN_262<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    AND4  AD19 <span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token function">I0</span><span class="token punctuation">(</span>XLXN_279<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">.</span><span class="token function">I1</span><span class="token punctuation">(</span>XLXN_278<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">.</span><span class="token function">I2</span><span class="token punctuation">(</span>D2<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">.</span><span class="token function">I3</span><span class="token punctuation">(</span>XLXN_274<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">.</span><span class="token function">O</span><span class="token punctuation">(</span>XLXN_267<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    AND4  AD20 <span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token function">I0</span><span class="token punctuation">(</span>D0<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">.</span><span class="token function">I1</span><span class="token punctuation">(</span>XLXN_277<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">.</span><span class="token function">I2</span><span class="token punctuation">(</span>XLXN_278<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">.</span><span class="token function">I3</span><span class="token punctuation">(</span>XLXN_274<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">.</span><span class="token function">O</span><span class="token punctuation">(</span>XLXN_261<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    OR2  XLXI_1 <span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token function">I0</span><span class="token punctuation">(</span>LE<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">.</span><span class="token function">I1</span><span class="token punctuation">(</span>XLXN_16<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">.</span><span class="token function">O</span><span class="token punctuation">(</span>g<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    OR2  XLXI_2 <span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token function">I0</span><span class="token punctuation">(</span>LE<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">.</span><span class="token function">I1</span><span class="token punctuation">(</span>XLXN_17<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">.</span><span class="token function">O</span><span class="token punctuation">(</span>f<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    OR2  XLXI_3 <span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token function">I0</span><span class="token punctuation">(</span>LE<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">.</span><span class="token function">I1</span><span class="token punctuation">(</span>XLXN_18<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">.</span><span class="token function">O</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    OR2  XLXI_4 <span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token function">I0</span><span class="token punctuation">(</span>LE<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">.</span><span class="token function">I1</span><span class="token punctuation">(</span>XLXN_19<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">.</span><span class="token function">O</span><span class="token punctuation">(</span>d<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    OR2  XLXI_5 <span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token function">I0</span><span class="token punctuation">(</span>LE<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">.</span><span class="token function">I1</span><span class="token punctuation">(</span>XLXN_20<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">.</span><span class="token function">O</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    OR2  XLXI_6 <span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token function">I0</span><span class="token punctuation">(</span>LE<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">.</span><span class="token function">I1</span><span class="token punctuation">(</span>XLXN_21<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">.</span><span class="token function">O</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    OR2  XLXI_8 <span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token function">I0</span><span class="token punctuation">(</span>LE<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">.</span><span class="token function">I1</span><span class="token punctuation">(</span>XLXN_22<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">.</span><span class="token function">O</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    OR3  XLXI_15 <span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token function">I0</span><span class="token punctuation">(</span>XLXN_31<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">.</span><span class="token function">I1</span><span class="token punctuation">(</span>XLXN_32<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">.</span><span class="token function">I2</span><span class="token punctuation">(</span>XLXN_64<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">.</span><span class="token function">O</span><span class="token punctuation">(</span>XLXN_16<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    OR3  XLXI_16 <span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token function">I0</span><span class="token punctuation">(</span>XLXN_38<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">.</span><span class="token function">I1</span><span class="token punctuation">(</span>XLXN_193<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">.</span><span class="token function">I2</span><span class="token punctuation">(</span>XLXN_245<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">.</span><span class="token function">O</span><span class="token punctuation">(</span>XLXN_18<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    OR3  XLXI_17 <span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token function">I0</span><span class="token punctuation">(</span>XLXN_45<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">.</span><span class="token function">I1</span><span class="token punctuation">(</span>XLXN_241<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">.</span><span class="token function">I2</span><span class="token punctuation">(</span>XLXN_49<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">.</span><span class="token function">O</span><span class="token punctuation">(</span>XLXN_20<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    OR4  XLXI_18 <span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token function">I0</span><span class="token punctuation">(</span>XLXN_34<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">.</span><span class="token function">I1</span><span class="token punctuation">(</span>XLXN_35<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">.</span><span class="token function">I2</span><span class="token punctuation">(</span>XLXN_36<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">.</span><span class="token function">I3</span><span class="token punctuation">(</span>XLXN_262<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">.</span><span class="token function">O</span><span class="token punctuation">(</span>XLXN_17<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    OR4  XLXI_19 <span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token function">I0</span><span class="token punctuation">(</span>XLXN_41<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">.</span><span class="token function">I1</span><span class="token punctuation">(</span>XLXN_42<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">.</span><span class="token function">I2</span><span class="token punctuation">(</span>XLXN_267<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">.</span><span class="token function">I3</span><span class="token punctuation">(</span>XLXN_261<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">.</span><span class="token function">O</span><span class="token punctuation">(</span>XLXN_19<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    OR4  XLXI_20 <span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token function">I0</span><span class="token punctuation">(</span>XLXN_48<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">.</span><span class="token function">I1</span><span class="token punctuation">(</span>XLXN_49<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">.</span><span class="token function">I2</span><span class="token punctuation">(</span>XLXN_254<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">.</span><span class="token function">I3</span><span class="token punctuation">(</span>XLXN_51<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">.</span><span class="token function">O</span><span class="token punctuation">(</span>XLXN_21<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    OR4  XLXI_21 <span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token function">I0</span><span class="token punctuation">(</span>XLXN_53<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">.</span><span class="token function">I1</span><span class="token punctuation">(</span>XLXN_262<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">.</span><span class="token function">I2</span><span class="token punctuation">(</span>XLXN_267<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">.</span><span class="token function">I3</span><span class="token punctuation">(</span>XLXN_261<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">.</span><span class="token function">O</span><span class="token punctuation">(</span>XLXN_22<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    INV  XLXI_23 <span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token function">I</span><span class="token punctuation">(</span>point<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">.</span><span class="token function">O</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    INV  XLXI_91 <span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token function">I</span><span class="token punctuation">(</span>D3<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">.</span><span class="token function">O</span><span class="token punctuation">(</span>XLXN_274<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    INV  XLXI_92 <span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token function">I</span><span class="token punctuation">(</span>D2<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">.</span><span class="token function">O</span><span class="token punctuation">(</span>XLXN_277<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    INV  XLXI_102 <span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token function">I</span><span class="token punctuation">(</span>D1<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">.</span><span class="token function">O</span><span class="token punctuation">(</span>XLXN_278<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    INV  XLXI_103 <span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token function">I</span><span class="token punctuation">(</span>D0<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">.</span><span class="token function">O</span><span class="token punctuation">(</span>XLXN_279<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">endmodule</span>
    <span class="token comment" spellcheck="true">//MyMC14495 end</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="八、去抖动模块"><a href="#八、去抖动模块" class="headerlink" title="八、去抖动模块"></a>八、去抖动模块</h3><pre class="line-numbers language-verilog"><code class="language-verilog"><span class="token keyword">module</span> <span class="token function">pbdebounce</span><span class="token punctuation">(</span>
    <span class="token keyword">input</span> <span class="token keyword">wire</span> clk_1ms<span class="token punctuation">,</span>
    <span class="token keyword">input</span> <span class="token keyword">wire</span> button<span class="token punctuation">,</span>
    <span class="token keyword">output</span> <span class="token keyword">reg</span> pbreg
        <span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">reg</span> <span class="token punctuation">[</span><span class="token number">7</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span> pbshift<span class="token punctuation">;</span>
    <span class="token keyword">initial</span> <span class="token keyword">begin</span>
        pbshift <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">end</span>
    <span class="token important">always@</span><span class="token punctuation">(</span><span class="token keyword">posedge</span> clk_1ms<span class="token punctuation">)</span><span class="token keyword">begin</span>
    pbshift <span class="token operator">=</span> pbshift <span class="token operator">&lt;&lt;</span> <span class="token number">1</span><span class="token punctuation">;</span>
    pbshift<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">=</span>button<span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>pbshift<span class="token operator">==</span><span class="token number">8'b0</span><span class="token punctuation">)</span>
    pbreg<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>pbshift<span class="token operator">==</span><span class="token number">8'hff</span><span class="token punctuation">)</span>
     pbreg<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>
     <span class="token keyword">end</span>

 <span class="token keyword">endmodule</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="九、分频器模块"><a href="#九、分频器模块" class="headerlink" title="九、分频器模块"></a>九、分频器模块</h3><pre class="line-numbers language-verilog"><code class="language-verilog"><span class="token keyword">module</span> <span class="token function">clkdiv</span><span class="token punctuation">(</span><span class="token keyword">input</span> <span class="token keyword">wire</span> clk<span class="token punctuation">,</span>
        <span class="token keyword">input</span> <span class="token keyword">wire</span> rst<span class="token punctuation">,</span>
        <span class="token keyword">output</span> <span class="token keyword">reg</span><span class="token punctuation">[</span><span class="token number">31</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span> clkdiv
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//clock divider</span>
      <span class="token important">always @</span> <span class="token punctuation">(</span><span class="token keyword">posedge</span> clk <span class="token keyword">or</span> <span class="token keyword">posedge</span> rst<span class="token punctuation">)</span> <span class="token keyword">begin</span>
         <span class="token keyword">if</span> <span class="token punctuation">(</span>rst<span class="token punctuation">)</span> clkdiv <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">;</span>
         <span class="token keyword">else</span> clkdiv <span class="token operator">&lt;=</span> clkdiv <span class="token operator">+</span> <span class="token number">1'b1</span><span class="token punctuation">;</span>
        <span class="token keyword">end</span>
<span class="token keyword">endmodule</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="十、随机数模块"><a href="#十、随机数模块" class="headerlink" title="十、随机数模块"></a>十、随机数模块</h3><pre class="line-numbers language-Verilog"><code class="language-Verilog">module Random(
    input clk,
    output wire [3:0]random
    );
    reg [31:0]rand;
    assign random =  rand[3:0] % 6 + 1; 
    initial begin
        rand <= 0;
    end

    always @(posedge clk) begin 
        rand <= rand + 1;
    end
endmodule
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="十一、BCD模块"><a href="#十一、BCD模块" class="headerlink" title="十一、BCD模块"></a>十一、BCD模块</h3><pre class="line-numbers language-verilog"><code class="language-verilog"><span class="token keyword">module</span> <span class="token function">BCD_20</span><span class="token punctuation">(</span>
    <span class="token keyword">input</span> <span class="token punctuation">[</span><span class="token number">19</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span>binary<span class="token punctuation">,</span>
    <span class="token keyword">output</span> <span class="token punctuation">[</span><span class="token number">19</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span>bcd
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">wire</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span> d1<span class="token punctuation">;</span>    
    <span class="token keyword">wire</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span> d2<span class="token punctuation">;</span>    
    <span class="token keyword">wire</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span> d3<span class="token punctuation">;</span>    
    <span class="token keyword">wire</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span> d4<span class="token punctuation">;</span>    
    <span class="token keyword">wire</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span> d5<span class="token punctuation">;</span>    

    <span class="token keyword">assign</span> d1 <span class="token operator">=</span> binary <span class="token operator">%</span> <span class="token number">10</span><span class="token punctuation">;</span>
    <span class="token keyword">assign</span> d2 <span class="token operator">=</span> <span class="token punctuation">(</span>binary <span class="token operator">/</span> <span class="token number">10</span><span class="token punctuation">)</span> <span class="token operator">%</span> <span class="token number">10</span><span class="token punctuation">;</span> 
    <span class="token keyword">assign</span> d3 <span class="token operator">=</span> <span class="token punctuation">(</span>binary <span class="token operator">/</span> <span class="token number">100</span><span class="token punctuation">)</span> <span class="token operator">%</span> <span class="token number">10</span><span class="token punctuation">;</span> 
    <span class="token keyword">assign</span> d4 <span class="token operator">=</span> <span class="token punctuation">(</span>binary <span class="token operator">/</span> <span class="token number">1000</span><span class="token punctuation">)</span> <span class="token operator">%</span> <span class="token number">10</span><span class="token punctuation">;</span> 
    <span class="token keyword">assign</span> d5 <span class="token operator">=</span> <span class="token punctuation">(</span>binary <span class="token operator">/</span> <span class="token number">10000</span><span class="token punctuation">)</span> <span class="token operator">%</span> <span class="token number">10</span><span class="token punctuation">;</span> 
    <span class="token keyword">assign</span> bcd <span class="token operator">=</span> <span class="token operator">{</span> d5 <span class="token punctuation">,</span> d4 <span class="token punctuation">,</span> d3 <span class="token punctuation">,</span> d2 <span class="token punctuation">,</span> d1 <span class="token operator">}</span><span class="token punctuation">;</span>
<span class="token keyword">endmodule</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<pre class="line-numbers language-verilog"><code class="language-verilog"><span class="token keyword">module</span> <span class="token function">BCD_8</span><span class="token punctuation">(</span>
    <span class="token keyword">input</span> <span class="token punctuation">[</span><span class="token number">7</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span>binary<span class="token punctuation">,</span>
    <span class="token keyword">output</span> <span class="token punctuation">[</span><span class="token number">7</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span>bcd
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">wire</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span> d1<span class="token punctuation">;</span>    
    <span class="token keyword">wire</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span> d2<span class="token punctuation">;</span>    

    <span class="token keyword">assign</span> d1 <span class="token operator">=</span> binary <span class="token operator">%</span> <span class="token number">10</span><span class="token punctuation">;</span>
    <span class="token keyword">assign</span> d2 <span class="token operator">=</span> binary <span class="token operator">/</span> <span class="token number">10</span><span class="token punctuation">;</span> 
    <span class="token keyword">assign</span> bcd <span class="token operator">=</span> <span class="token operator">{</span> d2 <span class="token punctuation">,</span> d1 <span class="token operator">}</span><span class="token punctuation">;</span>
<span class="token keyword">endmodule</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="十二、XDC引脚文件"><a href="#十二、XDC引脚文件" class="headerlink" title="十二、XDC引脚文件"></a>十二、XDC引脚文件</h3><pre class="line-numbers language-Verilog"><code class="language-Verilog">set_property PACKAGE_PIN AC18 [get_ports clk]
set_property IOSTANDARD LVCMOS18 [get_ports clk]

set_property PACKAGE_PIN AA10 [get_ports {reset}]
set_property IOSTANDARD LVCMOS15 [get_ports {reset}]
set_property PACKAGE_PIN V18 [get_ports {dice_in}]
set_property IOSTANDARD LVCMOS18 [get_ports {dice_in}]
set_property PACKAGE_PIN V19 [get_ports {yes_in}]
set_property IOSTANDARD LVCMOS18 [get_ports {yes_in}]
set_property PACKAGE_PIN V14 [get_ports {no_in}]
set_property IOSTANDARD LVCMOS18 [get_ports {no_in}]
set_property PACKAGE_PIN AF10 [get_ports {sw_input}]
set_property IOSTANDARD LVCMOS15 [get_ports {sw_input}]
set_property PACKAGE_PIN W16 [get_ports keypad]
set_property IOSTANDARD LVCMOS18 [get_ports keypad]

set_property PACKAGE_PIN N18 [get_ports ps2_data]
set_property IOSTANDARD LVCMOS33 [get_ports ps2_data]
set_property PULLUP true [get_ports ps2_data]

set_property PACKAGE_PIN M19 [get_ports ps2_clk]
set_property IOSTANDARD LVCMOS33 [get_ports ps2_clk]
set_property PULLUP true [get_ports ps2_clk]

set_property PACKAGE_PIN T20 [get_ports {b[0]}]
set_property IOSTANDARD LVCMOS33 [get_ports {b[0]}]
set_property SLEW FAST [get_ports {b[0]}]
set_property PACKAGE_PIN R20 [get_ports {b[1]}]
set_property IOSTANDARD LVCMOS33 [get_ports {b[1]}]
set_property SLEW FAST [get_ports {b[1]}]
set_property PACKAGE_PIN T22 [get_ports {b[2]}]
set_property IOSTANDARD LVCMOS33 [get_ports {b[2]}]
set_property SLEW FAST [get_ports {b[2]}]
set_property PACKAGE_PIN T23 [get_ports {b[3]}]
set_property IOSTANDARD LVCMOS33 [get_ports {b[3]}]
set_property SLEW FAST [get_ports {b[3]}]
set_property PACKAGE_PIN R22 [get_ports {g[0]}]
set_property IOSTANDARD LVCMOS33 [get_ports {g[0]}]
set_property SLEW FAST [get_ports {g[0]}]
set_property PACKAGE_PIN R23 [get_ports {g[1]}]
set_property IOSTANDARD LVCMOS33 [get_ports {g[1]}]
set_property SLEW FAST [get_ports {g[1]}]
set_property PACKAGE_PIN T24 [get_ports {g[2]}]
set_property IOSTANDARD LVCMOS33 [get_ports {g[2]}]
set_property SLEW FAST [get_ports {g[2]}]
set_property PACKAGE_PIN T25 [get_ports {g[3]}]
set_property IOSTANDARD LVCMOS33 [get_ports {g[3]}]
set_property SLEW FAST [get_ports {g[3]}]
set_property PACKAGE_PIN N21 [get_ports {r[0]}]
set_property IOSTANDARD LVCMOS33 [get_ports {r[0]}]
set_property SLEW FAST [get_ports {r[0]}]
set_property PACKAGE_PIN N22 [get_ports {r[1]}]
set_property IOSTANDARD LVCMOS33 [get_ports {r[1]}]
set_property SLEW FAST [get_ports {r[1]}]
set_property PACKAGE_PIN R21 [get_ports {r[2]}]
set_property IOSTANDARD LVCMOS33 [get_ports {r[2]}]
set_property SLEW FAST [get_ports {r[2]}]
set_property PACKAGE_PIN P21 [get_ports {r[3]}]
set_property IOSTANDARD LVCMOS33 [get_ports {r[3]}]
set_property SLEW FAST [get_ports {r[3]}]
set_property PACKAGE_PIN M22 [get_ports hs]
set_property IOSTANDARD LVCMOS33 [get_ports hs]
set_property SLEW FAST [get_ports hs]
set_property PACKAGE_PIN M21 [get_ports vs]
set_property IOSTANDARD LVCMOS33 [get_ports vs]
set_property SLEW FAST [get_ports vs]


set_property PACKAGE_PIN AB22 [get_ports {ArduinoSegment[0]}]
set_property IOSTANDARD LVCMOS33 [get_ports {ArduinoSegment[0]}]
set_property PACKAGE_PIN AD24 [get_ports {ArduinoSegment[1]}]
set_property IOSTANDARD LVCMOS33 [get_ports {ArduinoSegment[1]}]
set_property PACKAGE_PIN AD23 [get_ports {ArduinoSegment[2]}]
set_property IOSTANDARD LVCMOS33 [get_ports {ArduinoSegment[2]}]
set_property PACKAGE_PIN Y21 [get_ports {ArduinoSegment[3]}]
set_property IOSTANDARD LVCMOS33 [get_ports {ArduinoSegment[3]}]
set_property PACKAGE_PIN W20 [get_ports {ArduinoSegment[4]}]
set_property IOSTANDARD LVCMOS33 [get_ports {ArduinoSegment[4]}]
set_property PACKAGE_PIN AC24 [get_ports {ArduinoSegment[5]}]
set_property IOSTANDARD LVCMOS33 [get_ports {ArduinoSegment[5]}]
set_property PACKAGE_PIN AC23 [get_ports {ArduinoSegment[6]}]
set_property IOSTANDARD LVCMOS33 [get_ports {ArduinoSegment[6]}]
set_property PACKAGE_PIN AA22 [get_ports {ArduinoSegment[7]}]
set_property IOSTANDARD LVCMOS33 [get_ports {ArduinoSegment[7]}]

set_property PACKAGE_PIN AD21 [get_ports {ArduinoAN[0]}]
set_property IOSTANDARD LVCMOS33 [get_ports {ArduinoAN[0]}]
set_property PACKAGE_PIN AC21 [get_ports {ArduinoAN[1]}]
set_property IOSTANDARD LVCMOS33 [get_ports {ArduinoAN[1]}]
set_property PACKAGE_PIN AB21 [get_ports {ArduinoAN[2]}]
set_property IOSTANDARD LVCMOS33 [get_ports {ArduinoAN[2]}]
set_property PACKAGE_PIN AC22 [get_ports {ArduinoAN[3]}]
set_property IOSTANDARD LVCMOS33 [get_ports {ArduinoAN[3]}]

set_property PACKAGE_PIN M24 [get_ports S_CLK]
set_property IOSTANDARD LVCMOS33 [get_ports S_CLK]
set_property PACKAGE_PIN M20 [get_ports S_CLR]
set_property IOSTANDARD LVCMOS33 [get_ports S_CLR]
set_property PACKAGE_PIN L24 [get_ports S_DT]
set_property IOSTANDARD LVCMOS33 [get_ports S_DT]
set_property PACKAGE_PIN R18 [get_ports S_EN]
set_property IOSTANDARD LVCMOS33 [get_ports S_EN]<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

            </div>
            <hr/>

            

    <div class="reprint" id="reprint-statement">
        
            <div class="reprint__author">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-user">
                        文章作者:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="https://di-zhipeng.github.io" rel="external nofollow noreferrer">Tenderness</a>
                </span>
            </div>
            <div class="reprint__type">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-link">
                        文章链接:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="https://di-zhipeng.github.io/article/d1dfbad5.html">https://di-zhipeng.github.io/article/d1dfbad5.html</a>
                </span>
            </div>
            <div class="reprint__notice">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-copyright">
                        版权声明:
                    </i>
                </span>
                <span class="reprint-info">
                    本博客所有文章除特別声明外，均采用
                    <a href="https://creativecommons.org/licenses/by/4.0/deed.zh" rel="external nofollow noreferrer" target="_blank">CC BY 4.0</a>
                    许可协议。转载请注明来源
                    <a href="https://di-zhipeng.github.io" target="_blank">Tenderness</a>
                    !
                </span>
            </div>
        
    </div>

    <script async defer>
      document.addEventListener("copy", function (e) {
        let toastHTML = '<span>复制成功，请遵循本文的转载规则</span><button class="btn-flat toast-action" onclick="navToReprintStatement()" style="font-size: smaller">查看</a>';
        M.toast({html: toastHTML})
      });

      function navToReprintStatement() {
        $("html, body").animate({scrollTop: $("#reprint-statement").offset().top - 80}, 800);
      }
    </script>



            <div class="tag_share" style="display: block;">
                <div class="post-meta__tag-list" style="display: inline-block;">
                    
                        <div class="article-tag">
                            
                                <a href="/tags/Verilog/">
                                    <span class="chip bg-color">Verilog</span>
                                </a>
                            
                                <a href="/tags/%E6%95%B0%E5%AD%97%E9%80%BB%E8%BE%91/">
                                    <span class="chip bg-color">数字逻辑</span>
                                </a>
                            
                                <a href="/tags/FPGA/">
                                    <span class="chip bg-color">FPGA</span>
                                </a>
                            
                        </div>
                    
                </div>
                <div class="post_share" style="zoom: 80%; width: fit-content; display: inline-block; float: right; margin: -0.15rem 0;">
                    <link rel="stylesheet" type="text/css" href="/libs/share/css/share.min.css">

<div id="article-share">
    
    
    <div class="social-share" data-sites="twitter,facebook,google,qq,qzone,wechat,weibo,douban,linkedin" data-wechat-qrcode-helper="<p>微信扫一扫即可分享！</p>"></div>
    <script src="/libs/share/js/social-share.min.js"></script>
    

    

</div>

                </div>
            </div>
            
                <style>
    #reward {
        margin: 40px 0;
        text-align: center;
    }

    #reward .reward-link {
        font-size: 1.4rem;
        line-height: 38px;
    }

    #reward .btn-floating:hover {
        box-shadow: 0 6px 12px rgba(0, 0, 0, 0.2), 0 5px 15px rgba(0, 0, 0, 0.2);
    }

    #rewardModal {
        width: 320px;
        height: 350px;
    }

    #rewardModal .reward-title {
        margin: 15px auto;
        padding-bottom: 5px;
    }

    #rewardModal .modal-content {
        padding: 10px;
    }

    #rewardModal .close {
        position: absolute;
        right: 15px;
        top: 15px;
        color: rgba(0, 0, 0, 0.5);
        font-size: 1.3rem;
        line-height: 20px;
        cursor: pointer;
    }

    #rewardModal .close:hover {
        color: #ef5350;
        transform: scale(1.3);
        -moz-transform:scale(1.3);
        -webkit-transform:scale(1.3);
        -o-transform:scale(1.3);
    }

    #rewardModal .reward-tabs {
        margin: 0 auto;
        width: 210px;
    }

    .reward-tabs .tabs {
        height: 38px;
        margin: 10px auto;
        padding-left: 0;
    }

    .reward-content ul {
        padding-left: 0 !important;
    }

    .reward-tabs .tabs .tab {
        height: 38px;
        line-height: 38px;
    }

    .reward-tabs .tab a {
        color: #fff;
        background-color: #ccc;
    }

    .reward-tabs .tab a:hover {
        background-color: #ccc;
        color: #fff;
    }

    .reward-tabs .wechat-tab .active {
        color: #fff !important;
        background-color: #22AB38 !important;
    }

    .reward-tabs .alipay-tab .active {
        color: #fff !important;
        background-color: #019FE8 !important;
    }

    .reward-tabs .reward-img {
        width: 210px;
        height: 210px;
    }
</style>

<div id="reward">
    <a href="#rewardModal" class="reward-link modal-trigger btn-floating btn-medium waves-effect waves-light red">赏</a>

    <!-- Modal Structure -->
    <div id="rewardModal" class="modal">
        <div class="modal-content">
            <a class="close modal-close"><i class="fas fa-times"></i></a>
            <h4 class="reward-title">你的赏识是我前进的动力</h4>
            <div class="reward-content">
                <div class="reward-tabs">
                    <ul class="tabs row">
                        <li class="tab col s6 alipay-tab waves-effect waves-light"><a href="#alipay">支付宝</a></li>
                        <li class="tab col s6 wechat-tab waves-effect waves-light"><a href="#wechat">微 信</a></li>
                    </ul>
                    <div id="alipay">
                        <img src="/medias/reward/alipay.jpg" class="reward-img" alt="支付宝打赏二维码">
                    </div>
                    <div id="wechat">
                        <img src="/medias/reward/wechat.jpg" class="reward-img" alt="微信打赏二维码">
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    $(function () {
        $('.tabs').tabs();
    });
</script>
            
        </div>
    </div>

    
        <link rel="stylesheet" href="/libs/gitalk/gitalk.css">
<link rel="stylesheet" href="/css/my-gitalk.css">

<div class="card gitalk-card" data-aos="fade-up">
    <div class="comment_headling" style="font-size: 20px; font-weight: 700; position: relative; left: 20px; top: 15px; padding-bottom: 5px;">
        <i class="fas fa-comments fa-fw" aria-hidden="true"></i>
        <span>评论</span>
    </div>
    <div id="gitalk-container" class="card-content"></div>
</div>

<script src="/libs/gitalk/gitalk.min.js"></script>
<script>
    let gitalk = new Gitalk({
        clientID: '6aad04b940e961464bf1',
        clientSecret: '49c0cb65c88726923f9e3879d1b2125d3b65e628',
        repo: 'BlogTalk',
        owner: 'Di-zhipeng',
        admin: ["Di-zhipeng"],
        id: '2020-03-20T13-39-13',
        distractionFreeMode: false  // Facebook-like distraction free mode
    });

    gitalk.render('gitalk-container');
</script>
    

    

    

    

    

    

<article id="prenext-posts" class="prev-next articles">
    <div class="row article-row">
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge left-badge text-color">
                <i class="fas fa-chevron-left"></i>&nbsp;上一篇</div>
            <div class="card">
                <a href="/article/777ec474.html">
                    <div class="card-image">
                        
                        
                        <img src="/medias/featureimages/23.jpg" class="responsive-img" alt="让Typora自动使用图床">
                        
                        <span class="card-title">让Typora自动使用图床</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            写在前面Typora是一款非常优秀的markdown编写工具，也是我写博客的主力，但是最近在准备上传一个以前写的文档时我发现了问题，这个文档里面本地图片太多了，如果上传到博客上，会让我的博客变的非常臃肿，如何处理这个问题呢？
使用图床最好的
                        
                    </div>
                    <div class="publish-info">
                        <span class="publish-date">
                            <i class="far fa-clock fa-fw icon-date"></i>2020-03-20
                        </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/Typora/" class="post-category">
                                    Typora
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/Markdown/">
                        <span class="chip bg-color">Markdown</span>
                    </a>
                    
                    <a href="/tags/Typora/">
                        <span class="chip bg-color">Typora</span>
                    </a>
                    
                    <a href="/tags/picgo/">
                        <span class="chip bg-color">picgo</span>
                    </a>
                    
                    <a href="/tags/%E5%9B%BE%E5%BA%8A/">
                        <span class="chip bg-color">图床</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge right-badge text-color">
                下一篇&nbsp;<i class="fas fa-chevron-right"></i>
            </div>
            <div class="card">
                <a href="/article/81c0826.html">
                    <div class="card-image">
                        
                        
                        <img src="/medias/featureimages/22.jpg" class="responsive-img" alt="MIPS-32汇编学习">
                        
                        <span class="card-title">MIPS-32汇编学习</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            写在前面MIPS是一种很流行的Risc处理器，但现在已经是2020年了，我还是觉得学习MIPS-32汇编是一种浪费时间的行为，我更想多拿时间去学一学IA32、IA64。但是ZJU机组就是教的这种汇编，所以我也没办法。本文的主要内容均取自《C
                        
                    </div>
                    <div class="publish-info">
                            <span class="publish-date">
                                <i class="far fa-clock fa-fw icon-date"></i>2020-03-17
                            </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/%E6%B1%87%E7%BC%96/" class="post-category">
                                    汇编
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/MIPS/">
                        <span class="chip bg-color">MIPS</span>
                    </a>
                    
                    <a href="/tags/%E6%B1%87%E7%BC%96/">
                        <span class="chip bg-color">汇编</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
    </div>
</article>

</div>



<!-- 代码块功能依赖 -->
<script type="text/javascript" src="/libs/codeBlock/codeBlockFuction.js"></script>

<!-- 代码语言 -->

<script type="text/javascript" src="/libs/codeBlock/codeLang.js"></script>


<!-- 代码块复制 -->

<script type="text/javascript" src="/libs/codeBlock/codeCopy.js"></script>


<!-- 代码块收缩 -->

<script type="text/javascript" src="/libs/codeBlock/codeShrink.js"></script>


<!-- 代码块折行 -->


    </div>
    <div id="toc-aside" class="expanded col l3 hide-on-med-and-down">
        <div class="toc-widget">
            <div class="toc-title"><i class="far fa-list-alt"></i>&nbsp;&nbsp;目录</div>
            <div id="toc-content"></div>
        </div>
    </div>
</div>

<!-- TOC 悬浮按钮. -->

<div id="floating-toc-btn" class="hide-on-med-and-down">
    <a class="btn-floating btn-large bg-color">
        <i class="fas fa-list-ul"></i>
    </a>
</div>


<script src="/libs/tocbot/tocbot.min.js"></script>
<script>
    $(function () {
        tocbot.init({
            tocSelector: '#toc-content',
            contentSelector: '#articleContent',
            headingsOffset: -($(window).height() * 0.4 - 45),
            collapseDepth: Number('0'),
            headingSelector: 'h2, h3, h4'
        });

        // modify the toc link href to support Chinese.
        let i = 0;
        let tocHeading = 'toc-heading-';
        $('#toc-content a').each(function () {
            $(this).attr('href', '#' + tocHeading + (++i));
        });

        // modify the heading title id to support Chinese.
        i = 0;
        $('#articleContent').children('h2, h3, h4').each(function () {
            $(this).attr('id', tocHeading + (++i));
        });

        // Set scroll toc fixed.
        let tocHeight = parseInt($(window).height() * 0.4 - 64);
        let $tocWidget = $('.toc-widget');
        $(window).scroll(function () {
            let scroll = $(window).scrollTop();
            /* add post toc fixed. */
            if (scroll > tocHeight) {
                $tocWidget.addClass('toc-fixed');
            } else {
                $tocWidget.removeClass('toc-fixed');
            }
        });

        
        /* 修复文章卡片 div 的宽度. */
        let fixPostCardWidth = function (srcId, targetId) {
            let srcDiv = $('#' + srcId);
            if (srcDiv.length === 0) {
                return;
            }

            let w = srcDiv.width();
            if (w >= 450) {
                w = w + 21;
            } else if (w >= 350 && w < 450) {
                w = w + 18;
            } else if (w >= 300 && w < 350) {
                w = w + 16;
            } else {
                w = w + 14;
            }
            $('#' + targetId).width(w);
        };

        // 切换TOC目录展开收缩的相关操作.
        const expandedClass = 'expanded';
        let $tocAside = $('#toc-aside');
        let $mainContent = $('#main-content');
        $('#floating-toc-btn .btn-floating').click(function () {
            if ($tocAside.hasClass(expandedClass)) {
                $tocAside.removeClass(expandedClass).hide();
                $mainContent.removeClass('l9');
            } else {
                $tocAside.addClass(expandedClass).show();
                $mainContent.addClass('l9');
            }
            fixPostCardWidth('artDetail', 'prenext-posts');
        });
        
    });
</script>

    

</main>


<script src="https://cdn.bootcss.com/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
<script>
    MathJax.Hub.Config({
        tex2jax: {inlineMath: [['$', '$'], ['\(', '\)']]}
    });
</script>


    <footer class="page-footer bg-color">
    
    <div class="container row center-align" style="margin-bottom: 0px !important;">
        <div class="col s12 m8 l8 copy-right">
            Copyright&nbsp;&copy;
            <span id="year">2020</span>
            <a href="https://di-zhipeng.github.io" target="_blank">Tenderness</a>
            |&nbsp;Powered by&nbsp;<a href="https://hexo.io/" target="_blank">Hexo</a>
            |&nbsp;Theme&nbsp;<a href="https://github.com/blinkfox/hexo-theme-matery" target="_blank">Matery</a>
            <br>
            
            &nbsp;<i class="fas fa-chart-area"></i>&nbsp;站点总字数:&nbsp;<span
                class="white-color">21.4k</span>&nbsp;字
            
            
            
            
            
            
            <span id="busuanzi_container_site_pv">
                |&nbsp;<i class="far fa-eye"></i>&nbsp;总访问量:&nbsp;<span id="busuanzi_value_site_pv"
                    class="white-color"></span>&nbsp;次
            </span>
            
            
            <span id="busuanzi_container_site_uv">
                |&nbsp;<i class="fas fa-users"></i>&nbsp;总访问人数:&nbsp;<span id="busuanzi_value_site_uv"
                    class="white-color"></span>&nbsp;人
            </span>
            
            <br>
            
            <br>
            
        </div>
        <div class="col s12 m4 l4 social-link social-statis">
    <a href="https://github.com/Di-Zhipeng" class="tooltipped" target="_blank" data-tooltip="访问我的GitHub" data-position="top" data-delay="50">
        <i class="fab fa-github"></i>
    </a>



    <a href="mailto:1169028312@qq.com" class="tooltipped" target="_blank" data-tooltip="邮件联系我" data-position="top" data-delay="50">
        <i class="fas fa-envelope-open"></i>
    </a>







    <a href="tencent://AddContact/?fromId=50&fromSubId=1&subcmd=all&uin=1169028312" class="tooltipped" target="_blank" data-tooltip="QQ联系我: 1169028312" data-position="top" data-delay="50">
        <i class="fab fa-qq"></i>
    </a>







    <a href="/atom.xml" class="tooltipped" target="_blank" data-tooltip="RSS 订阅" data-position="top" data-delay="50">
        <i class="fas fa-rss"></i>
    </a>

</div>
    </div>
</footer>

<div class="progress-bar"></div>


    <!-- 搜索遮罩框 -->
<div id="searchModal" class="modal">
    <div class="modal-content">
        <div class="search-header">
            <span class="title"><i class="fas fa-search"></i>&nbsp;&nbsp;搜索</span>
            <input type="search" id="searchInput" name="s" placeholder="请输入搜索的关键字"
                   class="search-input">
        </div>
        <div id="searchResult"></div>
    </div>
</div>

<script src="/js/search.js"></script>
<script type="text/javascript">
$(function () {
    searchFunc("/" + "search.xml", 'searchInput', 'searchResult');
});
</script>
    <!-- 回到顶部按钮 -->
<div id="backTop" class="top-scroll">
    <a class="btn-floating btn-large waves-effect waves-light" href="#!">
        <i class="fas fa-arrow-up"></i>
    </a>
</div>


    <script src="/libs/materialize/materialize.min.js"></script>
    <script src="/libs/masonry/masonry.pkgd.min.js"></script>
    <script src="/libs/aos/aos.js"></script>
    <script src="/libs/scrollprogress/scrollProgress.min.js"></script>
    <script src="/libs/lightGallery/js/lightgallery-all.min.js"></script>
    <script src="/js/matery.js"></script>

    <!-- Baidu Analytics -->

    <!-- Baidu Push -->

<script>
    (function () {
        var bp = document.createElement('script');
        var curProtocol = window.location.protocol.split(':')[0];
        if (curProtocol === 'https') {
            bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
        } else {
            bp.src = 'http://push.zhanzhang.baidu.com/push.js';
        }
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(bp, s);
    })();
</script>

    
    <script src="/libs/others/clicklove.js" async="async"></script>
    
    
    <script async src="/libs/others/busuanzi.pure.mini.js"></script>
    

    

    

    

    

    
    
    
    <script src="/libs/instantpage/instantpage.js" type="module"></script>
    

</body>

</html>
